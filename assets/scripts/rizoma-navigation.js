/**
 * ============================================
 * NAVEGAÇÃO RIZOMÁTICA
 * Revolução Cibernética - Sistema de Conceitos Interligados
 * ============================================
 * 
 * Sistema inspirado no conceito de "rizoma" de Deleuze & Guattari:
 * - Não-hierárquico
 * - Multiplicidade de entradas
 * - Conexões heterogêneas
 * - Sem estrutura arbórea
 * 
 * CHANGELOG:
 * - 2025-10-28 (v9): Expansão massiva do Capítulo 11 (Síntese Informacional)
 *   + 60+ novos conceitos: informação como mercadoria, excedente comportamental, metabolismo informacional
 *   + Informação não-rival: abundância vs escassez artificial (propriedade intelectual)
 *   + Pirataria como luta de classes: Sci-Hub, Library Genesis, resistência ao cercamento
 *   + Excedente comportamental = mais-valia informacional (Zuboff + Marx)
 *   + Taxa de extração informacional: dados necessários vs dados extraídos
 *   + Algoritmos como sistemas de feedback: loops positivos → vício, radicalização
 *   + "Dados são o novo petróleo": crítica da metáfora (não-rival, trabalho vivo)
 *   + Soberania de dados: propriedade privada vs estatal vs comum
 *   + Metabolismo informacional: extração → processamento → mercadificação → feedback
 *   + Casos brasileiros: pirataria acadêmica, Marco Civil da Internet, Cataki
 *   + Ferramentas de luta: variedade, infraestrutura alternativa, transparência algorítmica
 *   + Conexões: Caps 2-3 (cibernética/plataformas) + 8-10 (trabalho/valor) + 30 (dialética)
 *   Total: ~460 conceitos mapeados
 * 
 * - 2025-10-28 (v8): Expansão massiva do Capítulo 10 (Crítica do Valor / Wertkritik)
 *   + 50+ novos conceitos: Wertkritik, sujeito automático, capital fictício, colapso
 *   + Robert Kurz e Moishe Postone: crítica esotérica vs exotérica de Marx
 *   + Dominação abstrata: não é pessoal, é estrutural (forma-valor domina todos)
 *   + Teoria da dissociação (Roswitha Scholz): patriarcado como estrutura do capitalismo
 *   + Automação como contradição: elimina trabalho vivo (única fonte de valor)
 *   + Capital fictício: dívidas, bolhas, financeirização como sobrevida do sistema
 *   + Casos brasileiros: desindustrialização, informalidade, milícias, necropolítica
 *   + Wertkritik e tecnologia: IA destrói trabalho cognitivo, cripto é capital fictício
 *   + Algoritmos como sujeito automático digitalizado (fetiche algorítmico)
 *   + Plataformas como rentismo (não produzem valor, extraem renda)
 *   + Debates: vs marxismo tradicional, feministas, pós-operaísmo, ecossocialistas
 *   + Síntese: forças (radicalidade) e limites (ausência de programa)
 *   Total: ~400 conceitos mapeados
 * 
 * - 2025-10-28 (v7): Expansão massiva do Capítulo 9 (Pós-Operaísmo e a Teoria da Multidão)
 *   + 35+ novos conceitos: Multidão, Império, Biopoder, Êxodo, Comum
 *   + Hardt & Negri: Império (rede de poder desterritorializada), Multidão (vs. Povo)
 *   + Virno: Gramática da Multidão, Êxodo como estratégia política, defecção criativa
 *   + O Comum: natural, artificial/social, metropolitano/urbano
 *   + Cercamento do comum: privatização digital, patentes, copyright, dados
 *   + Instituições do comum: licenças livres, cooperativas de plataforma, governança distribuída
 *   + Biopoder: subsunção real da vida, trabalho biopolítico, produção de subjetividade
 *   + Críticas: eurocentrismo, trabalho reprodutivo invisibilizado (Federici), otimismo tecnológico
 *   + MST e MTST como exemplos brasileiros de multidão e êxodo
 *   + Conexões: trabalho imaterial (Cap 8), Wertkritik (Cap 10), cooperativas (Cap 19)
 *   Total: ~350 conceitos mapeados
 * 
 * - 2025-10-28 (v6): Expansão massiva do Capítulo 8 (Trabalho Imaterial, Cognitivo e Afetivo)
 *   + 40+ novos conceitos: trabalho cognitivo, trabalho afetivo, general intellect
 *   + Lazzarato: dimensões do trabalho imaterial (informacional + cultural/afetiva)
 *   + Trabalho cognitivo: programadores, cientistas dados, general intellect (Marx/Grundrisse)
 *   + Exemplos general intellect: Wikipedia, Stack Overflow, software livre, captura por IAs
 *   + Trabalho afetivo: care work, emotional labor (Hochschild), produção de sociabilidade
 *   + Hardt & Negri: bioprodução/produção biopolítica, indústrias biopolíticas
 *   + Casos brasileiros: call centers (taylorismo afetivo), influencers (pirâmide digital), impulsionadores
 *   + Caso internacional: moderadores Filipinas (trauma como trabalho)
 *   + Subsunção real cibernética: vida inteira capturada (24/7, home office, autoexploração)
 *   + Conceitos: feminização trabalho, precarização cognitiva, trabalho gratuito, parasocialidade
 *   + Pós-fordismo: acumulação flexível, fábrica social, sempre-on
 *   Total: ~310 conceitos mapeados
 * 
 * - 2025-10-28 (v5): Expansão massiva do Capítulo 7 (Marxismo e Tecnologia - Debates Clássicos)
 *   + 30+ novos conceitos: Escola Frankfurt, Operaísmo, Pós-Colonialismo
 *   + Frankfurt: razão instrumental, indústria cultural, Marcuse (homem unidimensional), Adorno
 *   + Operaísmo: Tronti, Panzieri, composição técnica/política, recusa do trabalho
 *   + Operário-massa → operário social → fábrica social (aplicado à uberização)
 *   + Pós-Colonial: Fanon, Quijano, colonialidade, dependência tecnológica
 *   + Imperialismo digital: colonialismo de dados, extrativismo, cosmotécnicas (Yuk Hui)
 *   + Conexões: algoritmos como razão instrumental, breque dos apps como recusa do trabalho
 *   Total: ~230 conceitos mapeados
 * 
 * - 2025-10-28 (v4): Expansão massiva do Capítulo 4 (Economia Política & Dependência)
 *   + 45+ novos conceitos: CEPAL, Prebisch, Furtado, Marini, dependência, superexploração
 *   + Debate cálculo socialista: Mises, Hayek, Lange, conhecimento disperso
 *   + Planejamento cibernético: OGAS (Glushkov), Cybersyn (Beer), VSM
 *   + Dependência digital: neocolonialismo, extrativismo de dados, deterioração termos troca digital
 *   + Soberania tecnológica: software livre, plataformas cooperativas, China, BRICS
 *   + Casos: Zona Franca Manaus, moderação Filipinas, Barcelona, greve caminhoneiros 1972
 *   + Ferramentas: blockchain/DAOs, orçamento participativo, IoT, XAI
 *   Total: ~200 conceitos mapeados
 * 
 * - 2025-10-28 (v3): Expansão massiva do Capítulo 3 (Capitalismo Digital)
 *   + 35+ novos conceitos: Zuboff, excedente comportamental, produtos de previsão
 *   + Plataformas: efeito de rede, lock-in, tipos (Srnicek), guerra Rappi/iFood
 *   + Uberização: gerenciamento algorítmico, Breque dos Apps, transparência
 *   + IA desmistificada: ghost work, Mechanical Turk, moderadores, ciclo de extração
 *   + Fetiche do algoritmo: máscaras de poder, discriminação, caso Uber caixa-preta
 *   + Casos brasileiros: Serasa Score, redlining digital
 *   Total: ~155 conceitos mapeados
 * 
 * - 2025-10-27 (v2): Expansão massiva do Capítulo 2 (Cibernética)
 *   + 40 novos conceitos: Wiener, Turing, Shannon, Babbage, Ada Lovelace
 *   + ENIAC Six e gênero na computação (invisibilização histórica)
 *   + Duplo uso militar: Enigma, DARPA, guerra → paz
 *   + Materialidade/ecologia: e-waste, data centers, extrativismo
 *   + Vício digital: feedback positivo, dopamina, infinite scroll
 *   + Limites da computação: Problema da Parada, democracia algorítmica
 *   + Conceitos adicionais: Cybersyn, necropolítica digital, etc.
 *   Total: ~120 conceitos mapeados
 * 
 * - 2025-10-27 (v1): Expansão massiva do Capítulo 1 (Marxismo)
 *   + 32 novos conceitos: mercadoria, valor, mais-valia, fetichismo, etc.
 *   + Casos brasileiros: Magalu, Reforma Trabalhista 2017
 *   + Conexões reforçadas: capitalismo → cibernética → resistência
 *   Total: ~80 conceitos mapeados
 */

// Grafo de conceitos (nós do rizoma)
const conceptGraph = {
    // ========================================
    // CAPÍTULO 1: MARXISMO BÁSICO
    // ========================================
    'mercadoria': {
        name: 'Mercadoria',
        description: 'Produto do trabalho destinado à troca no mercado',
        connections: ['valor-uso', 'valor-troca', 'fetichismo', 'trabalho-abstrato'],
        color: '#ef4444',
        layer: -1 // Passado (conceito fundacional)
    },
    'valor-uso': {
        name: 'Valor de Uso',
        description: 'Utilidade concreta de uma mercadoria',
        connections: ['mercadoria', 'valor-troca', 'trabalho-concreto'],
        color: '#ef4444',
        layer: -1
    },
    'valor-troca': {
        name: 'Valor de Troca',
        description: 'Relação quantitativa de troca entre mercadorias',
        connections: ['mercadoria', 'valor-uso', 'trabalho-abstrato', 'preco-valor'],
        color: '#ef4444',
        layer: -1
    },
    'trabalho-concreto': {
        name: 'Trabalho Concreto',
        description: 'Atividade específica que cria valor de uso particular',
        connections: ['valor-uso', 'trabalho-abstrato', 'previa-ideacao'],
        color: '#ef4444',
        layer: -1
    },
    'trabalho-abstrato': {
        name: 'Trabalho Abstrato',
        description: 'Trabalho humano reduzido a dispêndio de tempo',
        connections: ['mercadoria', 'valor-troca', 'trabalho-concreto', 'tsn'],
        color: '#ef4444',
        layer: -1
    },
    'tsn': {
        name: 'Tempo de Trabalho Socialmente Necessário',
        description: 'Tempo médio para produzir mercadoria no nível tecnológico da sociedade',
        connections: ['trabalho-abstrato', 'valor-troca', 'forcas-produtivas'],
        color: '#ef4444',
        layer: -1
    },
    'previa-ideacao': {
        name: 'Prévia-Ideação',
        description: 'Capacidade humana de planejar mentalmente antes de executar',
        connections: ['trabalho-concreto', 'objetivacao', 'forcas-produtivas'],
        color: '#ef4444',
        layer: -1
    },
    'objetivacao': {
        name: 'Objetivação',
        description: 'Materialização da ideia no mundo através do trabalho',
        connections: ['previa-ideacao', 'trabalho-concreto', 'alienacao'],
        color: '#ef4444',
        layer: -1
    },
    'forcas-produtivas': {
        name: 'Forças Produtivas',
        description: 'Ferramentas, tecnologias, conhecimentos para transformar natureza',
        connections: ['tsn', 'relacoes-producao', 'automacao', 'ia'],
        color: '#ef4444',
        layer: -1
    },
    'relacoes-producao': {
        name: 'Relações de Produção',
        description: 'Relações sociais estabelecidas para produzir e distribuir bens',
        connections: ['forcas-produtivas', 'mais-valia', 'capital', 'uberizacao'],
        color: '#ef4444',
        layer: -1
    },
    'mais-valia': {
        name: 'Mais-Valia',
        description: 'Valor criado pelo trabalhador além do seu salário',
        connections: ['mais-valia-absoluta', 'mais-valia-relativa', 'capital', 'exploracao'],
        color: '#ef4444',
        layer: 0 // Presente (conceito ativo)
    },
    'mais-valia-absoluta': {
        name: 'Mais-Valia Absoluta',
        description: 'Extração via aumento de jornada ou intensidade do trabalho',
        connections: ['mais-valia', 'mais-valia-relativa', 'uberizacao', 'reforma-trabalhista'],
        color: '#ef4444',
        layer: 0
    },
    'mais-valia-relativa': {
        name: 'Mais-Valia Relativa',
        description: 'Extração via aumento de produtividade (tecnologia)',
        connections: ['mais-valia', 'mais-valia-absoluta', 'automacao', 'algoritmos'],
        color: '#ef4444',
        layer: 0
    },
    'capital': {
        name: 'Capital',
        description: 'Processo de autovalorização: D-M-P-M\'-D\'',
        connections: ['mais-valia', 'circuito-capital', 'acumulacao', 'plataformizacao'],
        color: '#ef4444',
        layer: 0
    },
    'circuito-capital': {
        name: 'Circuito do Capital (D-M-D\')',
        description: 'Dinheiro → Mercadorias → Produção → Mais Dinheiro',
        connections: ['capital', 'mais-valia', 'acumulacao'],
        color: '#ef4444',
        layer: 0
    },
    'fetichismo': {
        name: 'Fetichismo da Mercadoria',
        description: 'Relações sociais aparecem como relações entre coisas',
        connections: ['mercadoria', 'fetichismo-digital', 'ideologia', 'alienacao'],
        color: '#ef4444',
        layer: 0
    },
    'fetichismo-digital': {
        name: 'Fetichismo do Dado',
        description: 'Exploração mascarada como "parceria" e "oportunidade"',
        connections: ['fetichismo', 'mais-valia-dados', 'plataformizacao', 'magalu', 'algoritmo-fetiche'],
        color: '#ef4444',
        layer: 0
    },
    'algoritmo-fetiche': {
        name: 'Fetiche do Algoritmo',
        description: 'Relações de poder aparecem como decisões técnicas neutras',
        connections: ['fetichismo-digital', 'gerenciamento-algoritmico', 'alienacao', 'mascara-poder', 'tres-perguntas-algoritmo'],
        color: '#ef4444',
        layer: 0
    },
    'mascara-poder': {
        name: 'Algoritmo como Máscara',
        description: 'Caixa-preta esconde escolhas humanas e interesses econômicos',
        connections: ['algoritmo-fetiche', 'opacidade', 'caso-uber-caixa-preta'],
        color: '#dc2626',
        layer: 0
    },
    'caso-uber-caixa-preta': {
        name: 'Caso Uber: Caixa-Preta (2019)',
        description: 'Algoritmo "aposentou" motoristas antigos sem avisar',
        connections: ['mascara-poder', 'gerenciamento-algoritmico', 'uberizacao'],
        color: '#10b981',
        layer: 0
    },
    'tres-perguntas-algoritmo': {
        name: 'Três Perguntas para Desmascarar Fetiche',
        description: '1) Quem programou? 2) Quais dados? 3) Quem se beneficia?',
        connections: ['algoritmo-fetiche', 'transparencia-algoritmica', 'resistencia'],
        color: '#10b981',
        layer: 1
    },
    'algoritmo-racismo': {
        name: 'Algoritmo Reproduz Desigualdade',
        description: 'IA treinada em sociedade racista = IA racista',
        connections: ['algoritmo-fetiche', 'serasa-score', 'redlining-digital', 'discriminacao-algoritmica'],
        color: '#dc2626',
        layer: 0
    },
    'discriminacao-algoritmica': {
        name: 'Discriminação Algorítmica',
        description: 'Desigualdades naturalizadas como "análise de risco baseada em dados"',
        connections: ['algoritmo-racismo', 'algoritmo-fetiche', 'ideologia'],
        color: '#dc2626',
        layer: 0
    },
    'preco-valor': {
        name: 'Preço ≠ Valor',
        description: 'Preço oscila em torno do valor, mas não é o valor',
        connections: ['valor-troca', 'fetichismo', 'capitalismo-vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'reforma-trabalhista': {
        name: 'Reforma Trabalhista 2017 (Brasil)',
        description: 'Lei 13.467 - legalização da mais-valia absoluta',
        connections: ['mais-valia-absoluta', 'uberizacao', 'pejotizacao', 'intermitente'],
        color: '#ef4444',
        layer: 0
    },
    'pejotizacao': {
        name: 'Pejotização',
        description: 'Transformar empregados em "pessoas jurídicas" para fugir de direitos',
        connections: ['reforma-trabalhista', 'uberizacao', 'precarizacao'],
        color: '#ef4444',
        layer: 0
    },
    'intermitente': {
        name: 'Trabalho Intermitente',
        description: 'Disponibilidade 24/7, pagamento apenas por horas chamadas',
        connections: ['reforma-trabalhista', 'uberizacao', 'mais-valia-absoluta'],
        color: '#ef4444',
        layer: 0
    },
    'magalu': {
        name: 'Magazine Luiza (Caso)',
        description: 'Plataformização brasileira - controle sem propriedade',
        connections: ['fetichismo-digital', 'plataformizacao', 'mais-valia-dados', 'terceirizacao'],
        color: '#ef4444',
        layer: 0
    },
    'terceirizacao': {
        name: 'Terceirização',
        description: 'Transferência de riscos e custos para trabalhadores',
        connections: ['magalu', 'uberizacao', 'precarizacao'],
        color: '#ef4444',
        layer: 0
    },
    'exploracao': {
        name: 'Exploração Capitalista',
        description: 'Apropriação do trabalho excedente não-pago',
        connections: ['mais-valia', 'alienacao', 'resistencia'],
        color: '#ef4444',
        layer: 0
    },
    'alienacao': {
        name: 'Alienação',
        description: 'Estranhamento do trabalhador em relação ao produto e ao processo',
        connections: ['objetivacao', 'fetichismo', 'exploracao'],
        color: '#ef4444',
        layer: 0
    },
    'precarizacao': {
        name: 'Precarização',
        description: 'Degradação das condições de trabalho e direitos',
        connections: ['uberizacao', 'pejotizacao', 'terceirizacao', 'intermitente'],
        color: '#ef4444',
        layer: 0
    },
    'acumulacao': {
        name: 'Acumulação de Capital',
        description: 'Reinvestimento da mais-valia para gerar mais mais-valia',
        connections: ['capital', 'circuito-capital', 'monopolio'],
        color: '#ef4444',
        layer: 0
    },
    'algoritmos': {
        name: 'Algoritmos de Controle',
        description: 'Gerenciamento algorítmico automatizado do trabalho',
        connections: ['mais-valia-relativa', 'uberizacao', 'ia', 'vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'automacao': {
        name: 'Automação',
        description: 'Substituição de trabalho humano por máquinas',
        connections: ['forcas-produtivas', 'mais-valia-relativa', 'ia', 'desemprego'],
        color: '#ef4444',
        layer: 0
    },
    'ia': {
        name: 'Inteligência Artificial',
        description: 'Machine learning: estatística avançada aplicada a volumes massivos de dados',
        connections: ['automacao', 'algoritmos', 'mais-valia-dados', 'vigilancia', 'ghost-work', 'ciclo-extracao-ia', 'desmistificacao-ia', 'feedback-loop-ia'],
        color: '#ef4444',
        layer: 0
    },
    'desmistificacao-ia': {
        name: 'Desmistificando a IA',
        description: 'IA não é magia: é reconhecimento de padrões em dados',
        connections: ['ia', 'algoritmos', 'dados'],
        color: '#10b981',
        layer: 0
    },
    'ciclo-extracao-ia': {
        name: 'Ciclo de Extração via IA',
        description: 'Mais dados → IA melhor → serviços viciantes → mais usuários → mais dados',
        connections: ['ia', 'capitalismo-vigilancia', 'feedback-positivo', 'vicio-digital'],
        color: '#ef4444',
        layer: 0
    },
    'feedback-loop-ia': {
        name: 'Feedback Loops na IA',
        description: 'Cibernética aplicada ao lucro: loops positivos e negativos mantêm engajamento',
        connections: ['ia', 'feedback', 'feedback-positivo', 'feedback-negativo', 'vicio-digital'],
        color: '#8b5cf6',
        layer: 0
    },
    'ghost-work': {
        name: 'Ghost Work (Trabalho Fantasma)',
        description: 'Trabalho humano invisível que treina IA: rotulação, moderação',
        connections: ['ia', 'mais-valia', 'mechanical-turk', 'moderadores-conteudo', 'anotadores-dados'],
        color: '#dc2626',
        layer: 0
    },
    'mechanical-turk': {
        name: 'Amazon Mechanical Turk',
        description: 'Plataforma de microtarefas: US$ 0,01-0,10 por tarefa',
        connections: ['ghost-work', 'uberizacao', 'mais-valia-absoluta'],
        color: '#dc2626',
        layer: 0
    },
    'moderadores-conteudo': {
        name: 'Moderadores de Conteúdo',
        description: 'Trabalhadores que assistem violência por salário mínimo desenvolvendo PTSD',
        connections: ['ghost-work', 'trabalho-imaterial', 'necropolitica'],
        color: '#dc2626',
        layer: 0
    },
    'anotadores-dados': {
        name: 'Anotadores de Dados',
        description: 'Rotulam objetos em imagens para treinar carros autônomos',
        connections: ['ghost-work', 'ia', 'mais-valia'],
        color: '#dc2626',
        layer: 0
    },

    // ========================================
    // CAPÍTULO 2: CIBERNÉTICA E FUNDAMENTOS
    // ========================================
    'cibernetica': {
        name: 'Cibernética',
        description: 'Ciência do controle e comunicação (Wiener, 1948)',
        connections: ['feedback', 'wiener', 'turing', 'shannon', 'segunda-ordem', 'automacao'],
        color: '#8b5cf6',
        layer: -1 // Passado
    },
    'wiener': {
        name: 'Norbert Wiener',
        description: 'Fundador da cibernética (1948) - alertou sobre automação descontrolada',
        connections: ['cibernetica', 'feedback', 'duplo-uso-militar', 'vicio-digital'],
        color: '#8b5cf6',
        layer: -1
    },
    'turing': {
        name: 'Alan Turing',
        description: 'Máquina Universal + Problema da Parada - fundador da computação',
        connections: ['computabilidade', 'problema-parada', 'enigma', 'duplo-uso-militar'],
        color: '#8b5cf6',
        layer: -1
    },
    'shannon': {
        name: 'Claude Shannon',
        description: 'Teoria da Informação (1948) - informação como bits mensuráveis',
        connections: ['teoria-informacao', 'entropia', 'trabalho-imaterial', 'duplo-uso-militar'],
        color: '#8b5cf6',
        layer: -1
    },
    'babbage': {
        name: 'Charles Babbage',
        description: 'Máquina Analítica (1837) - primeiro computador programável (mecânico)',
        connections: ['ada-lovelace', 'algoritmo', 'automacao', 'materialidade-computacao'],
        color: '#8b5cf6',
        layer: -1
    },
    'ada-lovelace': {
        name: 'Ada Lovelace',
        description: 'Primeira programadora (1843) - viu computação além de números',
        connections: ['babbage', 'algoritmo', 'eniac-six', 'genero-computacao'],
        color: '#ec4899', // Rosa para destacar gênero
        layer: -1
    },
    'eniac-six': {
        name: 'ENIAC Six',
        description: 'Primeiras programadoras (1945) - invisibilizadas pela história',
        connections: ['ada-lovelace', 'genero-computacao', 'trabalho-invisivel'],
        color: '#ec4899',
        layer: -1
    },
    'genero-computacao': {
        name: 'Gênero e Computação',
        description: 'Padrão histórico: trabalho feminizado → masculinizado quando valorizado',
        connections: ['eniac-six', 'ada-lovelace', 'divisao-sexual-trabalho', 'trabalho-invisivel', 'cyborg-feminism', 'tecnofeminismo'],
        color: '#ec4899',
        layer: 0
    },
    'feedback': {
        name: 'Feedback Loop',
        description: 'Ciclo de retorno que modifica o sistema (negativo=estabiliza, positivo=amplifica)',
        connections: ['cibernetica', 'wiener', 'autopoiese', 'temporalidade', 'vicio-digital'],
        color: '#10b981',
        layer: 0 // Presente
    },
    'feedback-negativo': {
        name: 'Feedback Negativo',
        description: 'Estabilizador - busca equilíbrio (termostato, homeostase)',
        connections: ['feedback', 'homeostase', 'cybersyn'],
        color: '#10b981',
        layer: 0
    },
    'feedback-positivo': {
        name: 'Feedback Positivo',
        description: 'Amplificador - crescimento exponencial ou colapso (microfonia, vício)',
        connections: ['feedback', 'vicio-digital', 'viralizacao', 'necropolitica-digital', 'terra-luna-collapse'],
        color: '#f97316', // Laranja para atenção
        layer: 0
    },
    'vicio-digital': {
        name: 'Vício Digital',
        description: 'Apps como máquinas de Wiener: feedback positivo dopamina → mais scroll',
        connections: ['feedback-positivo', 'wiener', 'dopamina', 'infinite-scroll', 'capitalismo-vigilancia'],
        color: '#f97316',
        layer: 0
    },
    'dopamina': {
        name: 'Dopamina Digital',
        description: 'Sensor biológico usado como loop de feedback viciante',
        connections: ['vicio-digital', 'feedback-positivo', 'recompensa-variavel'],
        color: '#f97316',
        layer: 0
    },
    'recompensa-variavel': {
        name: 'Recompensa Variável',
        description: 'Incerteza maximiza dopamina (slot machine = próximo scroll)',
        connections: ['dopamina', 'vicio-digital', 'gamificacao'],
        color: '#f97316',
        layer: 0
    },
    'infinite-scroll': {
        name: 'Infinite Scroll',
        description: 'Remove ponto de parada - feedback positivo sem válvula de escape',
        connections: ['vicio-digital', 'feedback-positivo'],
        color: '#f97316',
        layer: 0
    },
    'algoritmo': {
        name: 'Algoritmo',
        description: 'Conjunto finito de instruções para resolver problema',
        connections: ['ada-lovelace', 'turing', 'computabilidade', 'automacao'],
        color: '#8b5cf6',
        layer: -1
    },
    'computabilidade': {
        name: 'Computabilidade',
        description: 'O que pode ser resolvido por algoritmo (Máquina de Turing)',
        connections: ['turing', 'algoritmo', 'problema-parada'],
        color: '#8b5cf6',
        layer: -1
    },
    'problema-parada': {
        name: 'Problema da Parada',
        description: 'Prova: nem tudo é computável - limites matemáticos da tecnologia',
        connections: ['turing', 'computabilidade', 'limites-tecnologia', 'democracia-algoritmicica'],
        color: '#7c3aed', // Roxo para conceito filosófico
        layer: 0
    },
    'limites-tecnologia': {
        name: 'Limites da Tecnologia',
        description: 'Nem tudo pode ser "resolvido com tecnologia" - exige política',
        connections: ['problema-parada', 'determinismo-tecnologico', 'democracia-algoritmicica'],
        color: '#7c3aed',
        layer: 0
    },
    'teoria-informacao': {
        name: 'Teoria da Informação',
        description: 'Informação mensurável em bits, separada de significado (Shannon)',
        connections: ['shannon', 'bit', 'entropia', 'trabalho-imaterial'],
        color: '#8b5cf6',
        layer: -1
    },
    'bit': {
        name: 'Bit',
        description: 'Unidade básica de informação (0 ou 1) - permite digitalização de tudo',
        connections: ['teoria-informacao', 'shannon', 'digitalizacao'],
        color: '#8b5cf6',
        layer: -1
    },
    'entropia': {
        name: 'Entropia Informacional',
        description: 'Medida de incerteza/imprevisibilidade (Shannon = Boltzmann)',
        connections: ['teoria-informacao', 'shannon', 'materialidade-computacao'],
        color: '#8b5cf6',
        layer: -1
    },
    'duplo-uso-militar': {
        name: 'Duplo Uso Militar',
        description: 'Todas tecnologias fundacionais nasceram da guerra (Enigma, ENIAC, Internet)',
        connections: ['turing', 'wiener', 'shannon', 'enigma', 'darpa', 'geopolitica'],
        color: '#dc2626', // Vermelho para militar
        layer: -1
    },
    'enigma': {
        name: 'Enigma',
        description: 'Código nazista quebrado por Turing - cibernética contra fascismo',
        connections: ['turing', 'duplo-uso-militar', 'necropolitica-digital'],
        color: '#dc2626',
        layer: -1
    },
    'darpa': {
        name: 'DARPA',
        description: 'ARPANET → Internet - rede militar virou www',
        connections: ['duplo-uso-militar', 'internet', 'geopolitica', 'vigilancia'],
        color: '#dc2626',
        layer: 0
    },
    'materialidade-computacao': {
        name: 'Materialidade da Computação',
        description: 'Não há "desmaterialização" - há mineração, energia, e-waste',
        connections: ['babbage', 'entropia', 'extrativismo', 'ecologia-digital', 'data-centers'],
        color: '#22c55e', // Verde para ecologia
        layer: 0
    },
    'ecologia-digital': {
        name: 'Ecologia Digital',
        description: 'Custos ambientais invisibilizados: mineração → energia → e-waste',
        connections: ['materialidade-computacao', 'extrativismo', 'e-waste', 'data-centers'],
        color: '#22c55e',
        layer: 0
    },
    'e-waste': {
        name: 'E-Waste',
        description: 'Lixo eletrônico = genocídio lento (crianças em Gana queimando placas)',
        connections: ['ecologia-digital', 'necropolitica-digital', 'extrativismo'],
        color: '#22c55e',
        layer: 0
    },
    'data-centers': {
        name: 'Data Centers',
        description: 'Não há nuvem - há data centers consumindo rios para refrigeração',
        connections: ['materialidade-computacao', 'ecologia-digital', 'fetichismo-digital'],
        color: '#22c55e',
        layer: 0
    },
    'autopoiese': {
        name: 'Autopoiese',
        description: 'Sistemas que se auto-criam (Maturana & Varela)',
        connections: ['cibernetica', 'feedback', 'nhandereko'],
        color: '#8b5cf6',
        layer: -1
    },
    'segunda-ordem': {
        name: 'Cibernética de Segunda Ordem',
        description: 'Observador incluído no sistema observado',
        connections: ['cibernetica', 'meta-observacao', 'ontologia-executavel'],
        color: '#10b981',
        layer: 0
    },
    'rizoma': {
        name: 'Rizoma',
        description: 'Estrutura não-hierárquica (Deleuze & Guattari)',
        connections: ['multiplicidade', 'devir', 'navegacao-rizomatica'],
        color: '#8b5cf6',
        layer: -1
    },
    'multiplicidade': {
        name: 'Multiplicidade',
        description: 'Não é uno nem múltiplo - é multiplicidade',
        connections: ['rizoma', 'devir', 'ontologia-relacional'],
        color: '#8b5cf6',
        layer: -1
    },
    'capitalismo-vigilancia': {
        name: 'Capitalismo de Vigilância',
        description: 'Extração de dados comportamentais como matéria-prima (Zuboff)',
        connections: ['mais-valia-dados', 'plataformizacao', 'resistencia', 'preco-valor', 'vigilancia', 'excedente-comportamental', 'produtos-previsao', 'shoshana-zuboff', 'mais-valia-informacional', 'metabolismo-informacional'],
        color: '#ef4444',
        layer: 0
    },
    'shoshana-zuboff': {
        name: 'Shoshana Zuboff',
        description: 'Teórica do capitalismo de vigilância - Harvard',
        connections: ['capitalismo-vigilancia', 'excedente-comportamental', 'produtos-previsao', 'mais-valia-informacional'],
        color: '#8b5cf6',
        layer: 0
    },
    'excedente-comportamental': {
        name: 'Excedente Comportamental',
        description: 'Dados coletados além do necessário para o serviço funcionar',
        connections: ['capitalismo-vigilancia', 'produtos-previsao', 'dados', 'google-maps-exemplo', 'mais-valia-informacional', 'taxa-extracao-info'],
        color: '#ef4444',
        layer: 0
    },
    'produtos-previsao': {
        name: 'Produtos de Previsão',
        description: 'Previsões de comportamento futuro vendidas como mercadoria',
        connections: ['capitalismo-vigilancia', 'excedente-comportamental', 'ia', 'serasa-score', 'metabolismo-informacional'],
        color: '#ef4444',
        layer: 0
    },
    'dados': {
        name: 'Dados como Mercadoria',
        description: 'Nova matéria-prima do capitalismo digital',
        connections: ['excedente-comportamental', 'mais-valia-dados', 'capitalismo-vigilancia', 'dupla-expropriacao', 'dados-trabalho-cristalizado', 'informacao-como-trabalho'],
        color: '#ef4444',
        layer: 0
    },
    'dupla-expropriacao': {
        name: 'Dupla Expropriação',
        description: 'Tempo (atenção) + rastro digital convertidos em lucro sem compensação',
        connections: ['dados', 'capitalismo-vigilancia', 'mais-valia'],
        color: '#ef4444',
        layer: 0
    },
    'google-maps-exemplo': {
        name: 'Caso Google Maps',
        description: 'Exemplo concreto de coleta de excedente comportamental',
        connections: ['excedente-comportamental', 'vigilancia', 'dados'],
        color: '#10b981',
        layer: 0
    },
    'serasa-score': {
        name: 'Serasa Score',
        description: 'Discriminação algorítmica via score de crédito no Brasil',
        connections: ['produtos-previsao', 'algoritmo-fetiche', 'redlining-digital', 'necropolitica'],
        color: '#dc2626',
        layer: 0
    },
    'redlining-digital': {
        name: 'Redlining Digital',
        description: 'Discriminação por CEP automatizada via algoritmos',
        connections: ['serasa-score', 'algoritmo-fetiche', 'necropolitica'],
        color: '#dc2626',
        layer: 0
    },
    'mais-valia-dados': {
        name: 'Mais-Valia de Dados',
        description: 'Valor extraído do trabalho digital não-pago',
        connections: ['capitalismo-vigilancia', 'uberizacao', 'trabalho-imaterial', 'fetichismo-digital', 'magalu', 'ia'],
        color: '#ef4444',
        layer: 0
    },
    'vigilancia': {
        name: 'Vigilância Digital',
        description: 'Monitoramento contínuo de comportamento para extração de valor',
        connections: ['capitalismo-vigilancia', 'algoritmos', 'ia', 'resistencia'],
        color: '#ef4444',
        layer: 0
    },
    'monopolio': {
        name: 'Monopólio de Plataforma',
        description: 'Concentração de poder via efeitos de rede',
        connections: ['plataformizacao', 'acumulacao', 'capitalismo-vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'ideologia': {
        name: 'Ideologia',
        description: 'Sistema de representações que mascara contradições reais',
        connections: ['fetichismo', 'fetichismo-digital', 'alienacao'],
        color: '#ef4444',
        layer: 0
    },
    'desemprego': {
        name: 'Desemprego Estrutural',
        description: 'Excedente de população trabalhadora devido à automação',
        connections: ['automacao', 'precarizacao', 'uberizacao'],
        color: '#ef4444',
        layer: 0
    },
    'ontologia-executavel': {
        name: 'Ontologia Executável',
        description: 'Filosofia que se performa em código',
        connections: ['segunda-ordem', 'critica-performativa', 'canvas-background'],
        color: '#10b981',
        layer: 0
    },
    'critica-performativa': {
        name: 'Crítica Performativa',
        description: 'Sistema que executa sua própria crítica',
        connections: ['ontologia-executavel', 'captcha', 'ironia-politica'],
        color: '#10b981',
        layer: 0
    },
    'captcha': {
        name: 'CAPTCHA Anti-Algorítmico',
        description: 'Humanos passam, bots falham',
        connections: ['critica-performativa', 'caos', 'resistencia'],
        color: '#10b981',
        layer: 0
    },
    'sistema-ternario': {
        name: 'Sistema Ternário (-1, 0, +1)',
        description: 'Base 3 balanceada para representar temporalidade',
        connections: ['temporalidade', 'feedback', 'backfeed'],
        color: '#10b981',
        layer: 0
    },
    'temporalidade': {
        name: 'Temporalidade Ternária',
        description: 'Presente como tensão entre passado e futuro',
        connections: ['sistema-ternario', 'feedback', 'guaiamum'],
        color: '#10b981',
        layer: 0
    },
    'nhandereko': {
        name: 'Nhandereko',
        description: 'Orquestrador de conhecimento autopoiético',
        connections: ['autopoiese', 'epistemologia-guarani', 'modo-colaborativo'],
        color: '#6366f1',
        layer: 1 // Futuro
    },
    'epistemologia-guarani': {
        name: 'Epistemologias Guarani',
        description: 'Conhecimento relacional indígena',
        connections: ['nhandereko', 'ontologia-relacional', 'decolonial'],
        color: '#8b5cf6',
        layer: -1
    },
    'navegacao-rizomatica': {
        name: 'Navegação Rizomática',
        description: 'Este sistema que você está usando agora',
        connections: ['rizoma', 'grafo-conceitos', 'modo-colaborativo'],
        color: '#6366f1',
        layer: 1
    },
    'modo-colaborativo': {
        name: 'Modo Colaborativo',
        description: 'Interação síncrona entre usuários (planejado)',
        connections: ['nhandereko', 'navegacao-rizomatica', 'websocket'],
        color: '#6366f1',
        layer: 1
    },
    'resistencia': {
        name: 'Resistência em Código',
        description: 'Técnicas práticas de contra-automação',
        connections: ['captcha', 'opacidade', 'honeypots', 'critica-performativa', 'hackfeministas', 'coding-rights-brasil', 'marialab', 'signal-app', 'tor-browser', 'low-tech'],
        color: '#10b981',
        layer: 0
    },
    'devir': {
        name: 'Devir',
        description: 'Processo de tornar-se, transformação contínua sem destino fixo',
        connections: ['rizoma', 'multiplicidade', 'ontologia-relacional'],
        color: '#8b5cf6',
        layer: -1
    },
    'ontologia-relacional': {
        name: 'Ontologia Relacional',
        description: 'Ser é relação, não substância isolada',
        connections: ['autopoiese', 'devir', 'multiplicidade', 'epistemologia-guarani'],
        color: '#8b5cf6',
        layer: -1
    },
    'uberizacao': {
        name: 'Uberização',
        description: 'Precarização do trabalho via plataformas digitais',
        connections: ['mais-valia-dados', 'plataformizacao', 'trabalho-imaterial', 'mais-valia-absoluta', 'mais-valia-relativa', 'reforma-trabalhista', 'intermitente', 'algoritmos', 'magalu', 'precarizacao', 'relacoes-producao', 'gerenciamento-algoritmico', 'breque-apps', 'empreendedorismo-si'],
        color: '#ef4444',
        layer: 0
    },
    'gerenciamento-algoritmico': {
        name: 'Gerenciamento Algorítmico',
        description: 'Controle de trabalhadores via algoritmos sem chefe humano',
        connections: ['uberizacao', 'algoritmos', 'algoritmo-fetiche', 'tyranny-algorithm'],
        color: '#ef4444',
        layer: 0
    },
    'tyranny-algorithm': {
        name: 'Tirania do Algoritmo',
        description: 'Sistema de controle cibernético para maximizar extração de valor',
        connections: ['gerenciamento-algoritmico', 'feedback', 'uberizacao'],
        color: '#dc2626',
        layer: 0
    },
    'empreendedorismo-si': {
        name: 'Empreendedorismo de Si',
        description: 'Ideologia neoliberal: trabalhador precarizado como "empresário"',
        connections: ['uberizacao', 'ideologia', 'neoliberalismo-progressista'],
        color: '#ef4444',
        layer: 0
    },
    'neoliberalismo-progressista': {
        name: 'Neoliberalismo Progressista',
        description: 'Exploração vendida como libertação via linguagem emancipatória',
        connections: ['empreendedorismo-si', 'ideologia', 'ultrarracionalismo'],
        color: '#dc2626',
        layer: 0
    },
    'breque-apps': {
        name: 'Breque dos Apps (2020)',
        description: 'Primeira greve de algoritmos - entregadores no Brasil',
        connections: ['uberizacao', 'resistencia', 'gerenciamento-algoritmico', 'transparencia-algoritmica'],
        color: '#10b981',
        layer: 0
    },
    'transparencia-algoritmica': {
        name: 'Transparência Algorítmica',
        description: 'Reivindicação: abrir a caixa-preta do algoritmo',
        connections: ['breque-apps', 'algoritmo-fetiche', 'auditoria-algoritmica'],
        color: '#10b981',
        layer: 1
    },
    'auditoria-algoritmica': {
        name: 'Auditoria Algorítmica',
        description: 'Proposta de fiscalização de decisões algorítmicas',
        connections: ['transparencia-algoritmica', 'resistencia'],
        color: '#6366f1',
        layer: 1
    },
    'trabalho-imaterial': {
        name: 'Trabalho Imaterial',
        description: 'Trabalho cujo produto é informação, conhecimento, afeto ou relação social',
        connections: ['trabalho-cognitivo', 'trabalho-afetivo', 'lazzarato', 'mais-valia-dados', 'uberizacao', 'capitalismo-vigilancia', 'trabalho-reprodutivo', 'pos-fordismo', 'general-intellect', 'fabrica-social'],
        color: '#ef4444',
        layer: 0
    },
    'lazzarato': {
        name: 'Maurizio Lazzarato',
        description: 'Sociólogo italiano que cunhou o conceito de trabalho imaterial (1996)',
        connections: ['trabalho-imaterial', 'trabalho-cognitivo', 'trabalho-afetivo', 'pos-operaismo', 'sociedade-divida'],
        color: '#8b5cf6',
        layer: -1
    },
    'trabalho-cognitivo': {
        name: 'Trabalho Cognitivo',
        description: 'Trabalho que manipula conhecimento, informação e símbolos (programação, design, análise)',
        connections: ['trabalho-imaterial', 'general-intellect', 'capitalismo-cognitivo', 'software-livre', 'ia', 'lazzarato', 'precarizacao-cognitiva', 'programadores', 'cientistas-dados'],
        color: '#ef4444',
        layer: 0
    },
    'trabalho-afetivo': {
        name: 'Trabalho Afetivo',
        description: 'Trabalho que produz ou manipula afetos, emoções e relações sociais',
        connections: ['trabalho-imaterial', 'trabalho-cuidado', 'emotional-labor', 'trabalho-sociabilidade', 'influencers', 'moderadores-conteudo', 'bioproducao', 'lazzarato', 'hardt', 'feminizacao-trabalho', 'cyborg-feminism', 'hackfeministas'],
        color: '#ef4444',
        layer: 0
    },
    'trabalho-cuidado': {
        name: 'Trabalho Corporal de Cuidado (Care Work)',
        description: 'Enfermeiras, cuidadores, babás - manipulam corpos através de interação afetiva',
        connections: ['trabalho-afetivo', 'trabalho-reprodutivo', 'feminizacao-trabalho', 'precarizacao', 'plataformizacao'],
        color: '#ef4444',
        layer: 0
    },
    'emotional-labor': {
        name: 'Trabalho Emocional (Emotional Labor)',
        description: 'Gestão e performance de emoções como obrigação profissional (Arlie Hochschild)',
        connections: ['trabalho-afetivo', 'call-centers-brasil', 'atendentes', 'vendedores', 'hochschild'],
        color: '#ef4444',
        layer: 0
    },
    'hochschild': {
        name: 'Arlie Hochschild',
        description: 'Socióloga que desenvolveu conceito de emotional labor (The Managed Heart, 1983)',
        connections: ['emotional-labor', 'trabalho-afetivo'],
        color: '#8b5cf6',
        layer: -1
    },
    'trabalho-sociabilidade': {
        name: 'Trabalho de Produção de Sociabilidade',
        description: 'Produzir conexões sociais, comunidades, identidades (influencers, community managers)',
        connections: ['trabalho-afetivo', 'influencers', 'community-managers', 'redes-sociais', 'parasocialidade'],
        color: '#ef4444',
        layer: 0
    },
    'general-intellect': {
        name: 'General Intellect (Intelecto Geral)',
        description: 'Conhecimento social coletivo que se torna força produtiva (Marx, Grundrisse)',
        connections: ['trabalho-cognitivo', 'trabalho-imaterial', 'capitalismo-cognitivo', 'software-livre', 'wikipedia-caso', 'stack-overflow', 'common-digital', 'pos-operaismo', 'negri'],
        color: '#ef4444',
        layer: -1
    },
    'capitalismo-cognitivo': {
        name: 'Capitalismo Cognitivo',
        description: 'Regime onde conhecimento e informação são principais fontes de valor',
        connections: ['trabalho-cognitivo', 'general-intellect', 'propriedade-intelectual', 'patentes', 'copyright', 'comum-digital'],
        color: '#ef4444',
        layer: 0
    },
    'wikipedia-caso': {
        name: 'Caso Wikipedia',
        description: 'Exemplo de general intellect: 6M artigos, produção colaborativa, captura corporativa por IAs',
        connections: ['general-intellect', 'software-livre', 'comum-digital', 'captura-comum', 'ia'],
        color: '#10b981',
        layer: 0
    },
    'stack-overflow': {
        name: 'Caso Stack Overflow',
        description: 'Plataforma de Q&A para programadores: conhecimento coletivo valendo US$ 1,8 bi (2021)',
        connections: ['general-intellect', 'trabalho-cognitivo', 'captura-comum', 'trabalho-gratuito'],
        color: '#10b981',
        layer: 0
    },
    'captura-comum': {
        name: 'Captura do Comum',
        description: 'Privatização de conhecimento produzido coletivamente (via plataformas, patentes, copyright)',
        connections: ['general-intellect', 'comum-digital', 'propriedade-intelectual', 'wikipedia-caso', 'stack-overflow', 'ia-treinamento'],
        color: '#ef4444',
        layer: 0
    },
    'ia-treinamento': {
        name: 'Dados de Treinamento para IA',
        description: 'GPT/Gemini treinados com bilhões de textos coletivos (livros, código, posts) sem compensação',
        connections: ['captura-comum', 'ia', 'general-intellect', 'copyright', 'trabalho-gratuito'],
        color: '#ef4444',
        layer: 0
    },
    'hardt': {
        name: 'Michael Hardt',
        description: 'Professor Duke University, co-autor de Império/Multidão com Negri. Teórico do trabalho afetivo',
        connections: ['trabalho-afetivo', 'bioproducao', 'negri', 'imperio-livro', 'multidao-conceito'],
        color: '#8b5cf6',
        layer: -1
    },
    'bioproducao': {
        name: 'Bioprodução (Produção Biopolítica)',
        description: 'Capital produz e gerencia não só mercadorias, mas a própria vida (saúde, afeto, cultura)',
        connections: ['trabalho-afetivo', 'hardt', 'negri', 'foucault', 'biopolitica', 'industrias-biopoliticas'],
        color: '#ef4444',
        layer: 0
    },
    'industrias-biopoliticas': {
        name: 'Indústrias Biopolíticas',
        description: 'Farmacêuticas, planos saúde, entretenimento, segurança privada, redes sociais',
        connections: ['bioproducao', 'trabalho-afetivo', 'capitalismo-vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'feminizacao-trabalho': {
        name: 'Feminização do Trabalho',
        description: 'Qualidades historicamente femininas (cuidado, empatia) exigidas de todos, mas desvalorizadas',
        connections: ['trabalho-afetivo', 'trabalho-reprodutivo', 'trabalho-cuidado', 'pos-fordismo', 'precarizacao', 'federici'],
        color: '#ef4444',
        layer: 0
    },
    'moderadores-conteudo': {
        name: 'Caso: Moderadores Filipinas',
        description: 'Manila: epicentro global da moderação traumática (violência, abuso) - PTSD, US$300-500/mês',
        connections: ['trabalho-afetivo', 'emotional-labor', 'necropolitica', 'imperialismo-digital', 'ghost-work', 'precarizacao'],
        color: '#10b981',
        layer: 0
    },
    'call-centers-brasil': {
        name: 'Caso: Call Centers Brasil',
        description: '1,5M trabalhadores: taylorismo afetivo - TMA em segundos, scripts obrigatórios, LER/DORT',
        connections: ['emotional-labor', 'trabalho-afetivo', 'fordismo', 'taylorismo', 'precarizacao', 'trabalho-imaterial'],
        color: '#10b981',
        layer: 0
    },
    'influencers-brasil': {
        name: 'Caso: Criadores de Conteúdo Brasil',
        description: '500k+ vivendo de conteúdo: pirâmide (0,01% ganham, 90% trabalham de graça), vida íntima vira produto',
        connections: ['trabalho-afetivo', 'trabalho-sociabilidade', 'plataformizacao', 'algoritmos', 'trabalho-gratuito', 'autoexploracao', 'parasocialidade'],
        color: '#10b981',
        layer: 0
    },
    'impulsionadores-brasil': {
        name: 'Caso: "Impulsionadores" Brasil',
        description: 'Jovens vendendo gestão de mídias sociais/tráfego pago - trabalho cognitivo precarizado periférico',
        connections: ['trabalho-cognitivo', 'precarizacao', 'autoexploracao', 'algoritmos', 'periferia-global'],
        color: '#10b981',
        layer: 0
    },
    'parasocialidade': {
        name: 'Relações Parasociais',
        description: 'Vínculos unilaterais audiência→influencer sentidos como amizade real - trabalho afetivo monetizado',
        connections: ['trabalho-sociabilidade', 'influencers-brasil', 'trabalho-afetivo', 'redes-sociais'],
        color: '#ef4444',
        layer: 0
    },
    'subsuncao-cibernetica': {
        name: 'Subsunção Real Cibernética (Vital)',
        description: 'Capital captura não só tempo de trabalho, mas vida inteira: afetos, relações, corpo, lazer 24/7',
        connections: ['subsuncao-real', 'trabalho-imaterial', 'pos-fordismo', 'fabrica-social', 'uberizacao', 'sempre-on', 'home-office'],
        color: '#ef4444',
        layer: 0
    },
    'sempre-on': {
        name: 'Trabalho 24/7 (Always On)',
        description: 'Dissolução fronteiras trabalho/vida: e-mails à noite, networking em "lazer", home office sem expediente',
        connections: ['subsuncao-cibernetica', 'precarizacao', 'burnout', 'trabalho-cognitivo', 'trabalho-afetivo'],
        color: '#ef4444',
        layer: 0
    },
    'home-office': {
        name: 'Home Office como Armadilha',
        description: '"Trabalhe de onde quiser" = casa vira fábrica permanente, sem divisão espacial trabalho/vida',
        connections: ['subsuncao-cibernetica', 'sempre-on', 'precarizacao', 'pandemia-covid'],
        color: '#ef4444',
        layer: 0
    },
    'autoexploracao': {
        name: 'Autoexploração Gamificada',
        description: 'Paixão como ideologia: quanto mais ama trabalho, mais aceita precariedade - "faça o que ama"',
        connections: ['precarizacao', 'trabalho-imaterial', 'subsuncao-cibernetica', 'influencers-brasil', 'impulsionadores-brasil', 'lazzarato'],
        color: '#ef4444',
        layer: 0
    },
    'trabalho-gratuito': {
        name: 'Trabalho Não-Pago Massivo',
        description: 'Usuários geram conteúdo/dados que plataformas monetizam sem compensação',
        connections: ['trabalho-imaterial', 'mais-valia-dados', 'capitalismo-vigilancia', 'wikipedia-caso', 'stack-overflow', 'ia-treinamento', 'influencers-brasil'],
        color: '#ef4444',
        layer: 0
    },
    'precarizacao-cognitiva': {
        name: 'Precarização do Trabalho Cognitivo',
        description: 'Programadores, designers, cientistas em contratos temporários, freela sem direitos, burnout',
        connections: ['trabalho-cognitivo', 'precarizacao', 'burnout', 'sempre-on', 'pos-fordismo'],
        color: '#ef4444',
        layer: 0
    },
    'sociedade-divida': {
        name: 'Sociedade da Dívida (Lazzarato)',
        description: 'Endividamento (estudantes, trabalhadores, países) como controle social - futuro subordinado ao capital',
        connections: ['lazzarato', 'precarizacao', 'financeirizacao'],
        color: '#ef4444',
        layer: 0
    },
    'pos-fordismo': {
        name: 'Pós-Fordismo (Acumulação Flexível)',
        description: 'Modelo produtivo: flexibilização, terceirização, just-in-time, centralidade do trabalho imaterial',
        connections: ['fordismo', 'trabalho-imaterial', 'precarizacao', 'uberizacao', 'fabrica-social', 'feminizacao-trabalho', 'recusa-trabalho'],
        color: '#ef4444',
        layer: 0
    },
    'fabrica-social': {
        name: 'Fábrica Social',
        description: 'Produção de valor se estende para além da fábrica - toda sociedade vira produtiva (comunicação, lazer, cultura)',
        connections: ['pos-fordismo', 'trabalho-imaterial', 'subsuncao-cibernetica', 'pos-operaismo', 'negri'],
        color: '#ef4444',
        layer: 0
    },
    'trabalho-reprodutivo': {
        name: 'Trabalho Reprodutivo',
        description: 'Trabalho de cuidado e manutenção da vida, historicamente invisibilizado',
        connections: ['trabalho-imaterial', 'ciberfeminismo', 'federici'],
        color: '#ef4444',
        layer: 0
    },
    'federici': {
        name: 'Silvia Federici',
        description: 'Teórica do trabalho reprodutivo e acumulação primitiva',
        connections: ['trabalho-reprodutivo', 'ciberfeminismo'],
        color: '#8b5cf6',
        layer: -1
    },
    'ciberfeminismo': {
        name: 'Ciberfeminismo',
        description: 'Análise feminista da tecnologia e do trabalho digital',
        connections: ['trabalho-reprodutivo', 'federici', 'resistencia'],
        color: '#8b5cf6',
        layer: 0
    },

    // ========================================
    // CAPÍTULO 9: PÓS-OPERAÍSMO E A TEORIA DA MULTIDÃO
    // ========================================
    'pos-operaismo': {
        name: 'Pós-Operaísmo',
        description: 'Atualização do operaísmo para a era do trabalho imaterial e capitalismo cognitivo',
        connections: ['operaismo', 'multidao-conceito', 'imperio-livro', 'comum-conceito', 'hardt-negri', 'virno'],
        color: '#10b981',
        layer: 0
    },
    'multidao-conceito': {
        name: 'Multidão',
        description: 'Multiplicidade de singularidades que cooperam - não pode ser reduzida a unidade (vs. Povo)',
        connections: ['pos-operaismo', 'hardt-negri', 'virno', 'povo-conceito', 'general-intellect', 'comum-conceito'],
        color: '#10b981',
        layer: 0
    },
    'povo-conceito': {
        name: 'Povo (vs. Multidão)',
        description: 'Identidade unificada que subsume diferenças - vontade geral representada pelo Estado',
        connections: ['multidao-conceito', 'estado', 'representacao-politica'],
        color: '#10b981',
        layer: -1
    },
    'imperio-livro': {
        name: 'Império (Hardt & Negri)',
        description: 'Nova forma de soberania global - rede descentralizada de poder (Estados, corporações, FMI, OMC)',
        connections: ['pos-operaismo', 'hardt-negri', 'imperialismo-digital', 'multidao-conceito', 'biopoder-conceito'],
        color: '#10b981',
        layer: 0
    },
    'hardt-negri': {
        name: 'Michael Hardt & Antonio Negri',
        description: 'Autores de Império, Multidão, Commonwealth - teóricos do pós-operaísmo',
        connections: ['pos-operaismo', 'imperio-livro', 'multidao-conceito', 'comum-conceito', 'bioproducao'],
        color: '#10b981',
        layer: -1
    },
    'virno': {
        name: 'Paolo Virno',
        description: 'Gramática da Multidão - linguagem e trabalho imaterial, Êxodo como estratégia',
        connections: ['pos-operaismo', 'multidao-conceito', 'exodo-estrategia', 'general-intellect', 'operaismo'],
        color: '#10b981',
        layer: -1
    },
    'biopoder-conceito': {
        name: 'Biopoder',
        description: 'Poder sobre a vida da população (Foucault) - fazer viver ou deixar morrer',
        connections: ['imperio-livro', 'bioproducao', 'trabalho-imaterial', 'subsuncao-real-vida'],
        color: '#10b981',
        layer: 0
    },
    'bioproducao': {
        name: 'Bioprodução / Trabalho Biopolítico',
        description: 'Trabalho que produz e reproduz a vida social em sua totalidade (afetos, relações, subjetividade)',
        connections: ['trabalho-afetivo', 'biopoder-conceito', 'hardt-negri', 'imperio-livro', 'multidao-conceito'],
        color: '#10b981',
        layer: 0
    },
    'subsuncao-real-vida': {
        name: 'Subsunção Real da Vida',
        description: 'Toda a vida (não só trabalho) é capturada pelo capital - trabalho 24/7, redes sociais, sono',
        connections: ['biopoder-conceito', 'trabalho-imaterial', 'fabrica-social', 'capitalismo-vigilancia'],
        color: '#10b981',
        layer: 0
    },
    'exodo-estrategia': {
        name: 'Êxodo (Estratégia Política)',
        description: 'Deserção criativa + construção de alternativas - não tomar o poder, mas construir outro poder',
        connections: ['virno', 'pos-operaismo', 'recusa-trabalho', 'comum-conceito', 'mst-mtst', 'zapatistas'],
        color: '#10b981',
        layer: 1 // Futuro (estratégia)
    },
    'comum-conceito': {
        name: 'O Comum',
        description: 'Riqueza produzida e compartilhada - nem estatal nem privada (natural, artificial, urbana)',
        connections: ['pos-operaismo', 'hardt-negri', 'comum-natural', 'comum-artificial', 'comum-urbano', 'cercamento-digital', 'modelo-dados-comum', 'cooperativa-dados', 'sci-hub'],
        color: '#10b981',
        layer: 0
    },
    'comum-natural': {
        name: 'Comum Natural',
        description: 'Recursos compartilhados da Terra: ar, água, florestas, biodiversidade',
        connections: ['comum-conceito', 'cercamento-classico', 'elinor-ostrom'],
        color: '#10b981',
        layer: -1
    },
    'comum-artificial': {
        name: 'Comum Artificial / Social',
        description: 'Conhecimento, linguagem, código, cultura produzidos coletivamente',
        connections: ['comum-conceito', 'general-intellect', 'wikipedia-caso', 'software-livre', 'common-digital'],
        color: '#10b981',
        layer: 0
    },
    'comum-urbano': {
        name: 'Comum Metropolitano / Urbano',
        description: 'Espaço urbano, encontros, redes de vizinhança - direito à cidade (Harvey)',
        connections: ['comum-conceito', 'david-harvey', 'direito-cidade', 'ocupacoes-urbanas'],
        color: '#10b981',
        layer: 0
    },
    'david-harvey': {
        name: 'David Harvey',
        description: 'Geógrafo marxista - acumulação por espoliação, direito à cidade, crítico do Império',
        connections: ['comum-urbano', 'direito-cidade', 'neoliberalismo', 'acumulacao-primitiva'],
        color: '#10b981',
        layer: -1
    },
    'direito-cidade': {
        name: 'Direito à Cidade',
        description: 'Direito coletivo de moldar e recriar o espaço urbano - não só acessar',
        connections: ['comum-urbano', 'david-harvey', 'ocupacoes-urbanas', 'mst-mtst'],
        color: '#10b981',
        layer: 1
    },
    'cercamento-digital': {
        name: 'Cercamento Digital do Comum',
        description: 'Privatização de conhecimento, dados, cultura - patentes, copyright, propriedade de dados',
        connections: ['comum-conceito', 'cercamento-classico', 'propriedade-intelectual', 'capitalismo-vigilancia', 'escassez-artificial', 'pirataria-luta-classes'],
        color: '#10b981',
        layer: 0
    },
    'cercamento-classico': {
        name: 'Cercamento (Enclosure)',
        description: 'Privatização histórica dos commons - terras comunais transformadas em propriedade privada',
        connections: ['comum-natural', 'cercamento-digital', 'acumulacao-primitiva'],
        color: '#10b981',
        layer: -1
    },
    'propriedade-intelectual': {
        name: 'Propriedade Intelectual',
        description: 'Copyright, patentes, marcas - mercantilização do conhecimento',
        connections: ['cercamento-digital', 'software-livre', 'pirataria', 'creative-commons'],
        color: '#10b981',
        layer: 0
    },
    'creative-commons': {
        name: 'Creative Commons',
        description: 'Licenças que permitem compartilhamento e remix de obras culturais',
        connections: ['propriedade-intelectual', 'software-livre', 'comum-artificial', 'instituicoes-comum'],
        color: '#10b981',
        layer: 1
    },
    'pirataria': {
        name: 'Pirataria Digital',
        description: 'Compartilhamento não-autorizado como resistência ao cercamento - Napster, Pirate Bay',
        connections: ['propriedade-intelectual', 'cercamento-digital', 'resistencia', 'torrent'],
        color: '#10b981',
        layer: 0
    },
    'torrent': {
        name: 'BitTorrent / P2P',
        description: 'Protocolo peer-to-peer de compartilhamento sem servidor central',
        connections: ['pirataria', 'comum-artificial', 'descentralizacao', 'instituicoes-comum', 'sci-hub', 'mastodon'],
        color: '#10b981',
        layer: 0
    },
    'commons-digital': {
        name: 'Commons Digital',
        description: 'Infraestrutura informacional compartilhada - Wikipedia, software livre, bibliotecas piratas',
        connections: ['comum-conceito', 'comum-artificial', 'sci-hub', 'library-genesis', 'mastodon', 'software-livre', 'desescassificacao'],
        color: '#10b981',
        layer: 1
    },
    'instituicoes-comum': {
        name: 'Instituições do Comum',
        description: 'Formas organizacionais nem estatais nem mercantis - licenças livres, cooperativas, governança distribuída',
        connections: ['comum-conceito', 'elinor-ostrom', 'software-livre', 'cooperativas-plataforma', 'creative-commons', 'commons-digital'],
        color: '#10b981',
        layer: 1
    },
    'elinor-ostrom': {
        name: 'Elinor Ostrom',
        description: 'Nobel Economia - gestão comunitária de recursos comuns sem Estado ou mercado',
        connections: ['instituicoes-comum', 'comum-natural', 'governanca-comum'],
        color: '#10b981',
        layer: -1
    },
    'governanca-comum': {
        name: 'Governança do Comum',
        description: 'Sistemas de decisão coletiva e autogestão de recursos compartilhados',
        connections: ['instituicoes-comum', 'elinor-ostrom', 'cooperativas-plataforma', 'assembleia'],
        color: '#10b981',
        layer: 1
    },
    'mst-mtst': {
        name: 'MST e MTST',
        description: 'Movimentos brasileiros de ocupação (terra e moradia) - exemplos de multidão e êxodo',
        connections: ['exodo-estrategia', 'multidao-conceito', 'ocupacoes-urbanas', 'comum-conceito', 'assembleia'],
        color: '#10b981',
        layer: 0
    },
    'ocupacoes-urbanas': {
        name: 'Ocupações Urbanas',
        description: 'Prédios/espaços abandonados ocupados e transformados em moradia/cultura coletiva',
        connections: ['mst-mtst', 'direito-cidade', 'comum-urbano', 'exodo-estrategia'],
        color: '#10b981',
        layer: 0
    },
    'zapatistas': {
        name: 'Zapatistas (EZLN)',
        description: 'Movimento indígena mexicano - "mandar obedecendo", autonomia, resistência ao neoliberalismo',
        connections: ['exodo-estrategia', 'autonomia', 'nhandereko', 'assembleia'],
        color: '#10b981',
        layer: 0
    },
    'representacao-politica': {
        name: 'Representação Política',
        description: 'Sistema onde representantes eleitos tomam decisões em nome do povo',
        connections: ['povo-conceito', 'estado', 'democracia-direta', 'assembleia'],
        color: '#10b981',
        layer: -1
    },
    'democracia-direta': {
        name: 'Democracia Direta',
        description: 'Participação direta nas decisões sem intermediários - assembleias, referendos',
        connections: ['representacao-politica', 'assembleia', 'mst-mtst', 'zapatistas'],
        color: '#10b981',
        layer: 1
    },
    'assembleia': {
        name: 'Assembleia Popular',
        description: 'Reunião horizontal para tomada coletiva de decisões',
        connections: ['democracia-direta', 'mst-mtst', 'zapatistas', 'ocupacoes-urbanas', 'governanca-comum'],
        color: '#10b981',
        layer: 1
    },
    'eurocentrismo-posop': {
        name: 'Crítica: Eurocentrismo Pós-Operaísta',
        description: 'Pós-operaísmo foca em trabalhadores cognitivos, negligencia trabalho manual/reprodutivo periférico',
        connections: ['pos-operaismo', 'trabalho-reprodutivo', 'federici', 'colonialidade'],
        color: '#10b981',
        layer: 0
    },
    'otimismo-tecnologico': {
        name: 'Crítica: Otimismo Tecnológico',
        description: 'Pós-operaísmo superestima potencial emancipatório da tecnologia?',
        connections: ['pos-operaismo', 'capitalismo-vigilancia', 'plataformizacao'],
        color: '#10b981',
        layer: 0
    },

    // ========================================
    // CAPÍTULO 10: CRÍTICA DO VALOR (WERTKRITIK)
    // ========================================
    'wertkritik': {
        name: 'Crítica do Valor (Wertkritik)',
        description: 'Corrente alemã que critica o trabalho abstrato e a forma-valor em si, não apenas sua distribuição',
        connections: ['robert-kurz', 'moishe-postone', 'sujeito-automatico', 'dominacao-abstrata', 'dissociacao-valor', 'colapso-modernizacao'],
        color: '#dc2626',
        layer: -1
    },
    'robert-kurz': {
        name: 'Robert Kurz (1943-2012)',
        description: 'Teórico alemão fundador da Wertkritik - O Colapso da Modernização (1991)',
        connections: ['wertkritik', 'krisis-revista', 'colapso-modernizacao', 'capital-ficti cio', 'trabalho-abstrato'],
        color: '#8b5cf6',
        layer: -1
    },
    'moishe-postone': {
        name: 'Moishe Postone (1942-2018)',
        description: 'Historiador canadense-americano - Time, Labor and Social Domination (1993) - reinterpretação radical de Marx',
        connections: ['wertkritik', 'dominacao-abstrata', 'trabalho-abstrato', 'tempo-abstrato'],
        color: '#8b5cf6',
        layer: -1
    },
    'krisis-revista': {
        name: 'Revista Krisis (1986) / Exit! (2004)',
        description: 'Revistas alemãs fundadas por Kurz e colegas para desenvolver a crítica do valor',
        connections: ['robert-kurz', 'wertkritik', 'dissociacao-valor'],
        color: '#8b5cf6',
        layer: -1
    },
    'critica-esoterica': {
        name: 'Crítica Esotérica de Marx',
        description: 'Análise das categorias abstratas e impessoais (Valor, fetiche) que dominam toda a sociedade',
        connections: ['wertkritik', 'critica-exoterica', 'sujeito-automatico', 'fetiche-mercadoria'],
        color: '#dc2626',
        layer: -1
    },
    'critica-exoterica': {
        name: 'Crítica Exotérica de Marx',
        description: 'Análise da luta de classes e exploração (superfície visível do capitalismo)',
        connections: ['critica-esoterica', 'luta-classes', 'mais-valia'],
        color: '#dc2626',
        layer: -1
    },
    'sujeito-automatico': {
        name: 'Sujeito Automático',
        description: 'O Valor como força quase consciente cujo único objetivo é sua autovalorização infinita (D-M-D\')',
        connections: ['wertkritik', 'dominacao-abstrata', 'fetiche-mercadoria', 'ultrarracionalismo', 'algoritmos-sujeito-automatico'],
        color: '#dc2626',
        layer: 0
    },
    'dominacao-abstrata': {
        name: 'Dominação Abstrata',
        description: 'Dominação não-pessoal da estrutura social (Valor) sobre capitalistas e trabalhadores',
        connections: ['wertkritik', 'sujeito-automatico', 'fetiche-mercadoria'],
        color: '#dc2626',
        layer: 0
    },
    'dissociacao-valor': {
        name: 'Teoria da Dissociação (Abspaltung)',
        description: 'Roswitha Scholz: patriarcado é estrutural ao capitalismo - o "feminino" (cuidado, afeto) é dissociado/desvalorizado',
        connections: ['wertkritik', 'roswitha-scholz', 'trabalho-reprodutivo', 'feminizacao-trabalho', 'dissociacao-geopolitica'],
        color: '#ec4899',
        layer: 0
    },
    'roswitha-scholz': {
        name: 'Roswitha Scholz',
        description: 'Teórica feminista alemã da Wertkritik - desenvolveu teoria da dissociação valor-gênero',
        connections: ['dissociacao-valor', 'wertkritik', 'krisis-revista'],
        color: '#8b5cf6',
        layer: -1
    },
    'dissociacao-geopolitica': {
        name: 'Dissociação Geopolítica',
        description: 'Sul Global é dissociado: necessário (recursos) mas desprezado (sem direitos) - paralelo com gênero',
        connections: ['dissociacao-valor', 'imperialismo-digital', 'extrativismo-digital', 'colonialidade'],
        color: '#dc2626',
        layer: 0
    },
    'colapso-modernizacao': {
        name: 'Colapso da Modernização',
        description: 'Tese de Kurz: capitalismo caminha para limite interno absoluto - automação destrói base do valor',
        connections: ['wertkritik', 'robert-kurz', 'automacao-crise-valor', 'capital-ficticio', 'barbarizacao'],
        color: '#dc2626',
        layer: 0
    },
    'automacao-crise-valor': {
        name: 'Automação como Crise do Valor',
        description: 'Contradição: automação elimina trabalho vivo (única fonte de valor) → crise de valorização',
        connections: ['colapso-modernizacao', 'trabalho-vivo', 'capital-ficticio', 'ia-automacao-cognitiva'],
        color: '#dc2626',
        layer: 0
    },
    'trabalho-vivo': {
        name: 'Trabalho Vivo',
        description: 'Trabalho humano atual - única fonte de valor no capitalismo (Marx)',
        connections: ['trabalho-abstrato', 'mais-valia', 'automacao-crise-valor'],
        color: '#ef4444',
        layer: -1
    },
    'capital-ficticio': {
        name: 'Capital Fictício',
        description: 'Riqueza que parece real mas não tem substância de valor - dívidas, bolhas, derivativos',
        connections: ['colapso-modernizacao', 'financeirizacao', 'bolhas-especulativas', 'criptomoedas-capital-ficticio', 'daos-plutocracia', 'ftx-collapse', 'terra-luna-collapse', 'el-salvador-bitcoin'],
        color: '#dc2626',
        layer: 0
    },
    'financeirizacao': {
        name: 'Financeirização',
        description: 'Migração do capital da produção para especulação - sintoma de crise de valorização',
        connections: ['capital-ficticio', 'bolhas-especulativas', 'derivativos', 'quantitative-easing'],
        color: '#dc2626',
        layer: 0
    },
    'bolhas-especulativas': {
        name: 'Bolhas Especulativas',
        description: 'Preços inflam sem correspondência com valor real - imóveis, ações, criptos',
        connections: ['capital-ficticio', 'financeirizacao', 'criptomoedas-capital-ficticio'],
        color: '#dc2626',
        layer: 0
    },
    'derivativos': {
        name: 'Derivativos Financeiros',
        description: 'Produtos financeiros abstratos (apostas sobre apostas) - mercado valia 10x PIB mundial em 2008',
        connections: ['capital-ficticio', 'financeirizacao', 'crise-2008'],
        color: '#dc2626',
        layer: 0
    },
    'quantitative-easing': {
        name: 'Expansão Monetária (QE)',
        description: 'Bancos centrais imprimem dinheiro para evitar colapso - adia crise, não resolve',
        connections: ['capital-ficticio', 'financeirizacao'],
        color: '#dc2626',
        layer: 0
    },
    'crise-2008': {
        name: 'Crise Financeira 2008',
        description: 'Colapso de bolha imobiliária/derivativos - confirmou tese do capital fictício',
        connections: ['derivativos', 'capital-ficticio', 'bolhas-especulativas'],
        color: '#dc2626',
        layer: 0
    },
    'desindustrializacao-brasil': {
        name: 'Desindustrialização Brasil (1990-2024)',
        description: 'Indústria cai de 34% (1985) para 11% (2023) do PIB - reprimarização da economia',
        connections: ['colapso-modernizacao', 'neoliberalismo-brasil', 'extrativismo-digital'],
        color: '#10b981',
        layer: 0
    },
    'neoliberalismo-brasil': {
        name: 'Neoliberalismo Brasil (Collor, FHC)',
        description: 'Abertura econômica + Real sobrevalorizado = destruição indústria nacional',
        connections: ['desindustrializacao-brasil', 'dependencia-digital'],
        color: '#10b981',
        layer: 0
    },
    'informalidade-brasil': {
        name: 'Informalidade Brasil (39% em 2023)',
        description: 'Não é atraso - é forma periférica da crise de valorização (população supérflua)',
        connections: ['populacao-superflua', 'uberizacao', 'reforma-trabalhista-2017'],
        color: '#10b981',
        layer: 0
    },
    'reforma-trabalhista-2017': {
        name: 'Reforma Trabalhista 2017 (Lei 13.467)',
        description: 'Legalização da precarização - contrato intermitente, pejotização',
        connections: ['informalidade-brasil', 'uberizacao', 'trabalho-abstrato'],
        color: '#10b981',
        layer: 0
    },
    'populacao-superflua': {
        name: 'População Supérflua (Humanidade Supérflua)',
        description: 'Massas expulsas da produção de valor - não são mais "exército de reserva"',
        connections: ['colapso-modernizacao', 'automacao-crise-valor', 'informalidade-brasil', 'barbarizacao'],
        color: '#dc2626',
        layer: 0
    },
    'milicias-necropolitica-brasil': {
        name: 'Milícias e Necropolítica (Rio/SP)',
        description: 'Re-feudalização: poderes armados controlam territórios onde Estado não garante valorização',
        connections: ['barbarizacao', 'necropolitica-digital', 'populacao-superflua'],
        color: '#dc2626',
        layer: 0
    },
    'barbarizacao': {
        name: 'Barbarização',
        description: 'Desintegração social que acompanha colapso - guerras, autoritarismo, re-feudalização',
        connections: ['colapso-modernizacao', 'populacao-superflua', 'milicias-necropolitica-brasil'],
        color: '#dc2626',
        layer: 0
    },
    'ia-automacao-cognitiva': {
        name: 'IA e Automação do Trabalho Cognitivo',
        description: 'GPT, DALL-E substituem trabalho imaterial - elimina até general intellect',
        connections: ['automacao-crise-valor', 'trabalho-cognitivo', 'general-intellect', 'capital-ficticio'],
        color: '#dc2626',
        layer: 1
    },
    'paradoxo-ia-valor': {
        name: 'Paradoxo da IA',
        description: 'IA produz abundância mas não cria valor - tempo socialmente necessário → zero',
        connections: ['ia-automacao-cognitiva', 'trabalho-abstrato', 'capital-ficticio'],
        color: '#dc2626',
        layer: 1
    },
    'criptomoedas-capital-ficticio': {
        name: 'Criptomoedas como Capital Fictício',
        description: 'Bitcoin não é pós-capitalista - é capital fictício descentralizado (especulação pura)',
        connections: ['capital-ficticio', 'bolhas-especulativas', 'cripto-consumo-energetico', 'daos-plutocracia', 'web3-critique', 'ftx-collapse', 'terra-luna-collapse', 'el-salvador-bitcoin'],
        color: '#dc2626',
        layer: 1
    },
    'cripto-consumo-energetico': {
        name: 'Mineração Bitcoin = Trabalho Abstrato Computacional',
        description: 'Consome mais energia que Argentina - queima recursos sem criar valor de uso',
        connections: ['criptomoedas-capital-ficticio', 'trabalho-abstrato', 'crise-ecologica'],
        color: '#dc2626',
        layer: 1
    },
    'algoritmos-sujeito-automatico': {
        name: 'Algoritmos como Sujeito Automático Digitalizado',
        description: 'Algoritmos parecem ter vontade própria - mas apenas executam lógica de valorização',
        connections: ['sujeito-automatico', 'fetiche-algoritmo', 'capitalismo-vigilancia'],
        color: '#dc2626',
        layer: 1
    },
    'fetiche-algoritmo': {
        name: 'Fetichismo Algorítmico',
        description: 'Atribuir agência ao algoritmo - mas ele cristaliza relações sociais capitalistas',
        connections: ['algoritmos-sujeito-automatico', 'fetiche-mercadoria', 'transparencia-algoritmica'],
        color: '#dc2626',
        layer: 1
    },
    'plataformas-rentismo': {
        name: 'Plataformas como Rentismo Digital',
        description: 'Uber, Meta, Amazon não produzem valor - extraem renda de posição monopolista',
        connections: ['plataformizacao', 'capital-ficticio', 'financeirizacao'],
        color: '#dc2626',
        layer: 1
    },
    'critica-marxismo-tradicional-wertkritik': {
        name: 'Debate: Wertkritik vs Marxismo Ortodoxo',
        description: 'Ortodoxos: "Wertkritik paralisa luta". Wertkritik: "Vocês gerenciam capitalismo, não abolem"',
        connections: ['wertkritik', 'luta-classes', 'pos-operaismo'],
        color: '#8b5cf6',
        layer: 0
    },
    'critica-feminista-wertkritik': {
        name: 'Debate: Feministas vs Dissociação',
        description: 'Federici: risco de essencializar gênero. Scholz: é construção histórica, não biologia',
        connections: ['dissociacao-valor', 'federici', 'interseccionalidade'],
        color: '#ec4899',
        layer: 0
    },
    'debate-posop-wertkritik': {
        name: 'Debate: Pós-Operaísmo vs Wertkritik',
        description: 'Hardt/Negri: "há agência". Kurz: "êxodo opera dentro da forma-valor". Cap 11 media isso',
        connections: ['wertkritik', 'pos-operaismo', 'multidao-conceito', 'sintese-informacional'],
        color: '#8b5cf6',
        layer: 0
    },
    'sintese-informacional': {
        name: 'Síntese Informacional (Cap 11)',
        description: 'Cibernética 2ª ordem media Wertkritik (estrutura) e Pós-Operaísmo (agência) - acoplamento circular',
        connections: ['debate-posop-wertkritik', 'segunda-ordem', 'wertkritik', 'pos-operaismo', 'informacao-como-trabalho', 'metabolismo-informacional', 'subsuncao-real-cibernetica'],
        color: '#a855f7',
        layer: 1
    },
    
    // ========================================
    // CAPÍTULO 11: SÍNTESE INFORMACIONAL (EXPANSÃO v9)
    // ========================================
    'informacao-como-trabalho': {
        name: 'Informação como Trabalho Cristalizado',
        description: 'Trabalho = inscrição de ordem (redução de entropia). Logo, informação = trabalho materializado',
        connections: ['sintese-informacional', 'tempo-trabalho-necessario', 'trabalho-abstrato', 'informacao-nao-rival'],
        color: '#a855f7',
        layer: 0
    },
    'informacao-nao-rival': {
        name: 'Informação Não-Rival',
        description: 'Custo marginal de cópia = zero. Abundância natural vs necessidade capitalista de escassez',
        connections: ['informacao-como-trabalho', 'escassez-artificial', 'pirataria-luta-classes', 'commons-digital'],
        color: '#a855f7',
        layer: 0
    },
    'escassez-artificial': {
        name: 'Escassificação Artificial',
        description: 'Capital precisa criar escassez para lucrar: copyright, DRM, plataformização, SaaS',
        connections: ['informacao-nao-rival', 'propriedade-intelectual', 'lock-in', 'cercamento-comum'],
        color: '#dc2626',
        layer: 0
    },
    'propriedade-intelectual': {
        name: 'Propriedade Intelectual',
        description: 'Cercamento legal do conhecimento: patents, copyright, segredos comerciais',
        connections: ['escassez-artificial', 'cercamento-comum', 'pirataria-luta-classes'],
        color: '#dc2626',
        layer: 0
    },
    'pirataria-luta-classes': {
        name: 'Pirataria como Luta de Classes',
        description: 'No Sul Global, pirataria = resistência à escassificação artificial do conhecimento',
        connections: ['informacao-nao-rival', 'escassez-artificial', 'sci-hub', 'library-genesis', 'desescassificacao'],
        color: '#16a34a',
        layer: 1
    },
    'sci-hub': {
        name: 'Sci-Hub',
        description: 'Alexandra Elbakyan: 88M+ artigos científicos gratuitos. Commons digital pirata, feedback corretivo',
        connections: ['pirataria-luta-classes', 'commons-digital', 'exodo', 'infraestrutura-alternativa'],
        color: '#16a34a',
        layer: 1
    },
    'library-genesis': {
        name: 'Library Genesis / Z-Library',
        description: 'Bibliotecas piratas essenciais no Sul Global. Infraestrutura vital de acesso ao conhecimento',
        connections: ['pirataria-luta-classes', 'sci-hub', 'commons-digital'],
        color: '#16a34a',
        layer: 1
    },
    'desescassificacao': {
        name: 'Desescassificação',
        description: 'Prática de reverter cercamentos artificiais, distribuindo livremente o que tem custo marginal zero',
        connections: ['pirataria-luta-classes', 'commons-digital', 'multidao-conceito'],
        color: '#16a34a',
        layer: 1
    },
    'excedente-comportamental': {
        name: 'Excedente Comportamental (Zuboff)',
        description: 'Dados além do necessário para o serviço, coletados para criar produtos de previsão',
        connections: ['capitalismo-vigilancia', 'mais-valia-informacional', 'taxa-extracao-info', 'produtos-previsao'],
        color: '#f59e0b',
        layer: 0
    },
    'mais-valia-informacional': {
        name: 'Mais-Valia Informacional',
        description: 'Excedente comportamental = mais-trabalho não-pago capturado pelas plataformas',
        connections: ['excedente-comportamental', 'mais-valia', 'taxa-extracao-info', 'trabalho-gratuito'],
        color: '#f59e0b',
        layer: 0
    },
    'taxa-extracao-info': {
        name: 'Taxa de Extração Informacional',
        description: 'e_info = dados extraídos / dados necessários. Facebook/Google têm taxas altíssimas',
        connections: ['mais-valia-informacional', 'excedente-comportamental', 'taxa-exploracao', 'gdpr-experimento'],
        color: '#f59e0b',
        layer: 0
    },
    'gdpr-experimento': {
        name: 'GDPR como Experimento Natural',
        description: 'Lei europeia revelou: plataformas coletam 20x mais dados do que o necessário (600MB-1GB/usuário)',
        connections: ['taxa-extracao-info', 'excedente-comportamental', 'soberania-dados'],
        color: '#3b82f6',
        layer: 1
    },
    'loop-feedback-plataforma': {
        name: 'Loop de Feedback das Plataformas',
        description: 'Input (comportamento) → algoritmo → output (interface modificada) → novo comportamento → iteração',
        connections: ['feedback', 'algoritmo', 'gerenciamento-algoritmico', 'feedback-positivo-vicioso'],
        color: '#a855f7',
        layer: 0
    },
    'feedback-positivo-vicioso': {
        name: 'Feedback Positivo Vicioso',
        description: 'Plataformas usam feedback positivo para viciar: mais cliques → mais extremismo → mais engajamento',
        connections: ['loop-feedback-plataforma', 'feedback', 'vicio-digital', 'radicalizacao-algoritmica'],
        color: '#dc2626',
        layer: 0
    },
    'radicalizacao-algoritmica': {
        name: 'Radicalização Algorítmica',
        description: 'YouTube/Facebook empurram usuários para extremos via feedback positivo (caso Caleb Cain)',
        connections: ['feedback-positivo-vicioso', 'youtube-radicaliza', 'sujeito-automatico', 'camaras-eco'],
        color: '#dc2626',
        layer: 1
    },
    'youtube-radicaliza': {
        name: 'Caso YouTube: Caleb Cain',
        description: 'Peterson → Shapiro → Molyneux → Spencer. Algoritmo otimiza tempo de tela = empurra p/ extremismo',
        connections: ['radicalizacao-algoritmica', 'feedback-positivo-vicioso', 'sujeito-automatico'],
        color: '#dc2626',
        layer: 1
    },
    'camaras-eco': {
        name: 'Câmaras de Eco',
        description: 'Algoritmos reforçam crenças existentes, isolando usuários em bolhas informacionais',
        connections: ['radicalizacao-algoritmica', 'feedback-positivo-vicioso', 'polarizacao'],
        color: '#dc2626',
        layer: 1
    },
    'dados-novo-petroleo': {
        name: '"Dados São o Novo Petróleo" (Crítica)',
        description: 'Metáfora enganosa: petróleo é rival/escasso/natural. Dados são não-rival/abundante/trabalho vivo',
        connections: ['informacao-nao-rival', 'mais-valia-informacional', 'dados-trabalho-cristalizado'],
        color: '#f59e0b',
        layer: 0
    },
    'dados-trabalho-cristalizado': {
        name: 'Dados como Trabalho Cristalizado',
        description: 'Metáfora correta: Seus cliques = trabalho na linha de montagem. Plataforma = dono da fábrica',
        connections: ['dados-novo-petroleo', 'informacao-como-trabalho', 'mais-valia-informacional'],
        color: '#a855f7',
        layer: 0
    },
    'soberania-dados': {
        name: 'Soberania de Dados',
        description: 'Quem controla os dados? 3 modelos: propriedade privada (EUA), estatal (China), comum (proposta)',
        connections: ['modelo-propriedade-privada', 'modelo-soberania-estatal', 'modelo-dados-comum', 'marco-civil-internet'],
        color: '#3b82f6',
        layer: 1
    },
    'modelo-propriedade-privada': {
        name: 'Modelo 1: Propriedade Privada (Status Quo)',
        description: 'Dados pertencem às plataformas. Resultado: concentração (GAFAM), vigilância, monetização da vida',
        connections: ['soberania-dados', 'capitalismo-vigilancia', 'monopolio'],
        color: '#dc2626',
        layer: 0
    },
    'modelo-soberania-estatal': {
        name: 'Modelo 2: Soberania Estatal (China)',
        description: 'Dados sob controle estatal. Planejamento + vigilância autoritária. Democracia inexistente',
        connections: ['soberania-dados', 'china-cyberpunk', 'credito-social'],
        color: '#dc2626',
        layer: 0
    },
    'modelo-dados-comum': {
        name: 'Modelo 3: Dados como Comum',
        description: 'Governança coletiva de dados. Data cooperatives, controle democrático da infraestrutura',
        connections: ['soberania-dados', 'comum', 'cooperativa-dados', 'cataki-exemplo', 'infraestrutura-alternativa'],
        color: '#16a34a',
        layer: 1
    },
    'cooperativa-dados': {
        name: 'Cooperativas de Dados',
        description: 'Usuários se organizam coletivamente para controlar seus próprios dados',
        connections: ['modelo-dados-comum', 'cooperativa-plataforma', 'comum', 'cataki-exemplo'],
        color: '#16a34a',
        layer: 1
    },
    'cataki-exemplo': {
        name: 'Caso Cataki (Brasil)',
        description: 'Plataforma cooperativa de catadores de recicláveis. Eles controlam seus próprios dados de coleta',
        connections: ['cooperativa-dados', 'modelo-dados-comum', 'cooperativa-plataforma', 'brasil-resistencia'],
        color: '#16a34a',
        layer: 1
    },
    'marco-civil-internet': {
        name: 'Marco Civil da Internet (2014)',
        description: 'Tentativa brasileira de soberania digital. Lobby corporativo removeu data localization',
        connections: ['soberania-dados', 'brasil-resistencia', 'dependencia-digital', 'lobby-big-tech'],
        color: '#f59e0b',
        layer: 1
    },
    'lobby-big-tech': {
        name: 'Lobby de Big Tech',
        description: 'Google/Facebook/Microsoft removeram exigências de soberania do Marco Civil',
        connections: ['marco-civil-internet', 'monopolio', 'imperialismo-digital'],
        color: '#dc2626',
        layer: 1
    },
    'metabolismo-informacional': {
        name: 'Metabolismo Informacional do Capital',
        description: 'Sistema cibernético: extração (dados) → processamento (algoritmo) → mercadificação → feedback → acumulação',
        connections: ['sintese-informacional', 'loop-feedback-plataforma', 'extracao-dados', 'produtos-previsao', 'subsuncao-real-cibernetica'],
        color: '#a855f7',
        layer: 1
    },
    'extracao-dados': {
        name: 'Extração de Dados',
        description: 'Trabalho humano (cognitivo, afetivo, atencional) gera dados como subproduto',
        connections: ['metabolismo-informacional', 'trabalho-cognitivo', 'trabalho-afetivo', 'excedente-comportamental'],
        color: '#f59e0b',
        layer: 0
    },
    'subsuncao-real-cibernetica': {
        name: 'Subsunção Real Cibernética',
        description: 'Tese central: plataformas controlam rede informacional que media toda existência social',
        connections: ['metabolismo-informacional', 'sintese-informacional', 'subsuncao-real', 'plataformizacao'],
        color: '#a855f7',
        layer: 1
    },
    'dupla-face-cibernetica': {
        name: 'Dupla Face da Cibernética',
        description: 'Mesma tecnologia: controle (sob capital) OU auto-organização (sob democracia). Depende de quem controla',
        connections: ['sintese-informacional', 'cibernetica', 'planejamento-cibernetico', 'cybersyn'],
        color: '#a855f7',
        layer: 1
    },
    'bitcoin-sujeito-automatico': {
        name: 'Caso Bitcoin: Sujeito Automático Puro',
        description: 'Algoritmo autônomo valorizando valor sem controle humano. Forma-valor cristalizada em código',
        connections: ['sujeito-automatico', 'capital-fictico', 'cripto-extrativismo', 'sintese-informacional'],
        color: '#dc2626',
        layer: 1
    },
    'cripto-extrativismo': {
        name: 'Cripto-extrativismo',
        description: 'Mineração de Bitcoin consome energia de países inteiros para valorizar capital fictício',
        connections: ['bitcoin-sujeito-automatico', 'capital-fictico', 'crise-ecologica', 'extrativismo-dados'],
        color: '#dc2626',
        layer: 1
    },
    'lei-ashby-luta-classes': {
        name: 'Lei de Ashby na Luta de Classes',
        description: 'Batalha pela variedade: capital quer reduzir (controle), multidão quer aumentar (insubordinação)',
        connections: ['lei-variedade-requisita', 'sintese-informacional', 'multidao-conceito', 'recusa-trabalho'],
        color: '#a855f7',
        layer: 1
    },
    'vigilancia-aumento-variedade': {
        name: 'Vigilância como Aumento de Variedade do Capital',
        description: 'Coleta massiva de dados = aumentar variedade do sistema de controle para antecipar/neutralizar resistência',
        connections: ['lei-ashby-luta-classes', 'capitalismo-vigilancia', 'excedente-comportamental'],
        color: '#dc2626',
        layer: 1
    },
    'transparencia-algoritmica': {
        name: 'Transparência Algorítmica',
        description: 'Exigência de explicação das decisões algorítmicas. Luta de classes contra caixas-pretas de poder',
        connections: ['fetiche-algoritmo', 'auditoria-algoritmica', 'contestacao-humana', 'ferramentas-luta'],
        color: '#16a34a',
        layer: 1
    },
    'auditoria-algoritmica': {
        name: 'Auditoria Algorítmica Independente',
        description: 'Investigar viés algorítmico (raça, gênero, classe) por entidades não-corporativas',
        connections: ['transparencia-algoritmica', 'discriminacao-algoritmica', 'serasa-score'],
        color: '#16a34a',
        layer: 1
    },
    'contestacao-humana': {
        name: 'Direito à Contestação Humana',
        description: 'Decisões automatizadas devem poder ser questionadas por humanos (não-algoritmos)',
        connections: ['transparencia-algoritmica', 'gerenciamento-algoritmico', 'uber-demissao-automatica'],
        color: '#16a34a',
        layer: 1
    },
    'socializacao-dados': {
        name: 'Socialização de Dados',
        description: 'Dados = trabalho cristalizado → devem ser propriedade social. Data trusts públicos, impostos sobre lucro de dados',
        connections: ['modelo-dados-comum', 'mais-valia-informacional', 'dados-trabalho-cristalizado'],
        color: '#16a34a',
        layer: 1
    },
    'infraestrutura-alternativa': {
        name: 'Infraestrutura Alternativa',
        description: 'Construir fora do capital: cooperativas de plataforma, redes mesh, servidores próprios',
        connections: ['sci-hub', 'cooperativa-plataforma', 'redes-mesh', 'mastodon', 'infoamazonia'],
        color: '#16a34a',
        layer: 1
    },
    'redes-mesh': {
        name: 'Redes Mesh',
        description: 'Internet comunitária peer-to-peer, sem provedores corporativos. Infraestrutura descentralizada',
        connections: ['infraestrutura-alternativa', 'comum', 'exodo'],
        color: '#16a34a',
        layer: 1
    },
    'mastodon': {
        name: 'Mastodon / Fediverse',
        description: 'Rede social descentralizada, open-source, federada. Alternativa ao Twitter/Facebook',
        connections: ['infraestrutura-alternativa', 'software-livre', 'commons-digital'],
        color: '#16a34a',
        layer: 1
    },
    'infoamazonia': {
        name: 'Caso InfoAmazonia (Brasil)',
        description: 'Rede de satélites comunitários monitora desmatamento fora de controle governamental/corporativo',
        connections: ['infraestrutura-alternativa', 'brasil-resistencia', 'exodo', 'comum'],
        color: '#16a34a',
        layer: 1
    },
    'ferramentas-luta': {
        name: '5 Princípios Táticos (Cap 11)',
        description: 'Aumentar variedade, construir infraestrutura, transparência, socializar dados, cibernética horizontal',
        connections: ['sintese-informacional', 'lei-ashby-luta-classes', 'infraestrutura-alternativa', 'transparencia-algoritmica', 'socializacao-dados'],
        color: '#16a34a',
        layer: 1
    },
    'metabolismo-industrial-vs-info': {
        name: 'Metabolismo Industrial vs Informacional',
        description: 'Séc XIX-XX (matéria/energia) vs Séc XXI (comportamento/dados). Mesma lógica de acumulação, nova base material',
        connections: ['metabolismo-informacional', 'capitalismo', 'subsuncao-real-cibernetica'],
        color: '#a855f7',
        layer: 0
    },
    'residuo-digital': {
        name: 'Resíduo Digital (Poluição Informacional)',
        description: 'Metabolismo info produz: desinformação, vício, polarização, ansiedade (= CO₂ da era digital)',
        connections: ['metabolismo-informacional', 'vicio-digital', 'radicalizacao-algoritmica', 'crise-saude-mental'],
        color: '#dc2626',
        layer: 1
    },
    'crise-saude-mental': {
        name: 'Crise de Saúde Mental Digital',
        description: 'Ansiedade, depressão, TDAH dispararam com redes sociais. Não é individual, é sistêmico',
        connections: ['residuo-digital', 'vicio-digital', 'feedback-positivo-vicioso'],
        color: '#dc2626',
        layer: 1
    },
    'critica-ecossocialista-wertkritik': {
        name: 'Debate: Ecossocialistas vs Wertkritik',
        description: 'Moore/Malm: "foca só em valor, ignora natureza". Kurz: "crise ecológica = consequência da forma-valor"',
        connections: ['wertkritik', 'crise-ecologica', 'decrescimento'],
        color: '#16a34a',
        layer: 0
    },
    'decrescimento': {
        name: 'Decrescimento',
        description: 'Economia pós-crescimento baseada em necessidades humanas e limites ecológicos',
        connections: ['crise-ecologica', 'wertkritik', 'colapso-modernizacao'],
        color: '#16a34a',
        layer: 1
    },
    'critica-negativa-wertkritik': {
        name: 'Crítica Negativa',
        description: 'Força da Wertkritik: destrói ilusões reformistas. Limite: não constrói programa positivo',
        connections: ['wertkritik', 'ultrarracionalismo', 'sintese-informacional'],
        color: '#8b5cf6',
        layer: 0
    },
    'ultrarracionalismo': {
        name: 'Ultrarracionalismo (Cap 31)',
        description: 'Fé cega em lógicas sistêmicas abstratas - naturaliza dominação (mercado, algoritmo, "TINA")',
        connections: ['sujeito-automatico', 'critica-negativa-wertkritik', 'neoliberalismo-progressista'],
        color: '#dc2626',
        layer: 1
    },
    'neoliberalismo-progressista': {
        name: 'Neoliberalismo Progressista',
        description: '"Gostaríamos de fazer diferente, mas o mercado exige" - esquerda capturada pelo sujeito automático',
        connections: ['ultrarracionalismo', 'sujeito-automatico'],
        color: '#dc2626',
        layer: 1
    },
    'tempo-abstrato': {
        name: 'Tempo Abstrato',
        description: 'Postone: capitalismo impõe temporalidade abstrata (tempo-relógio) sobre tempo concreto da vida',
        connections: ['moishe-postone', 'trabalho-abstrato', 'dominacao-abstrata'],
        color: '#dc2626',
        layer: 0
    },
    
    // ========================================
    // CONTINUAÇÃO CONCEITOS OUTROS CAPÍTULOS
    // ========================================
    'plataformizacao': {
        name: 'Plataformização',
        description: 'Monopolização da infraestrutura digital via efeitos de rede',
        connections: ['capitalismo-vigilancia', 'uberizacao', 'resistencia', 'magalu', 'capital', 'fetichismo-digital', 'monopolio', 'efeito-rede', 'plataforma-lean', 'plataforma-publicidade', 'technofeudalism-varoufakis'],
        color: '#ef4444',
        layer: 0
    },
    'efeito-rede': {
        name: 'Efeito de Rede',
        description: 'Valor cresce exponencialmente com número de usuários (Lei de Metcalfe)',
        connections: ['plataformizacao', 'monopolio', 'lock-in', 'guerra-plataformas-brasil'],
        color: '#ef4444',
        layer: 0
    },
    'lock-in': {
        name: 'Lock-in Effect',
        description: 'Aprisionamento do usuário pela massa crítica de uma rede',
        connections: ['efeito-rede', 'monopolio', 'whatsapp-exemplo'],
        color: '#ef4444',
        layer: 0
    },
    'whatsapp-exemplo': {
        name: 'Caso WhatsApp',
        description: 'Exemplo de lock-in: impossível migrar sem perder toda a rede',
        connections: ['lock-in', 'efeito-rede'],
        color: '#10b981',
        layer: 0
    },
    'guerra-plataformas-brasil': {
        name: 'Guerra Rappi vs iFood (2020-2025)',
        description: 'Estudo de caso sobre efeitos de rede e imperialismo digital',
        connections: ['efeito-rede', 'plataformizacao', 'imperialismo-digital'],
        color: '#10b981',
        layer: 0
    },
    'plataforma-lean': {
        name: 'Plataforma Lean',
        description: 'Uber/iFood - intermediação sem ativos físicos (Srnicek)',
        connections: ['plataformizacao', 'uberizacao', 'srnicek'],
        color: '#ef4444',
        layer: 0
    },
    'plataforma-publicidade': {
        name: 'Plataforma de Publicidade',
        description: 'Google/Facebook - extração de dados para anúncios',
        connections: ['plataformizacao', 'capitalismo-vigilancia', 'srnicek'],
        color: '#ef4444',
        layer: 0
    },
    'srnicek': {
        name: 'Nick Srnicek',
        description: 'Teórico do capitalismo de plataforma (Platform Capitalism, 2016)',
        connections: ['plataforma-lean', 'plataforma-publicidade', 'plataformizacao'],
        color: '#8b5cf6',
        layer: 0
    },
    'decolonial': {
        name: 'Pensamento Decolonial',
        description: 'Crítica à colonialidade do saber e do poder',
        connections: ['epistemologia-guarani', 'ubuntu', 'cosmotecnica', 'afrofuturismo', 'dubois-dupla-consciencia', 'cosmotecnica-yuk-hui'],
        color: '#8b5cf6',
        layer: -1
    },
    'ubuntu': {
        name: 'Ubuntu',
        description: 'Filosofia africana: "Eu sou porque nós somos"',
        connections: ['decolonial', 'ontologia-relacional', 'modo-colaborativo'],
        color: '#8b5cf6',
        layer: -1
    },
    'cosmotecnica': {
        name: 'Cosmotécnica',
        description: 'Técnicas enraizadas em cosmologias locais (Yuk Hui)',
        connections: ['decolonial', 'epistemologia-guarani', 'ontologia-executavel'],
        color: '#8b5cf6',
        layer: -1
    },
    'guaiamum': {
        name: 'Guaiamum Lateral',
        description: 'Movimento diagonal, não-linear, caranguejo',
        connections: ['temporalidade', 'navegacao-rizomatica', 'backfeed'],
        color: '#10b981',
        layer: 0
    },
    'backfeed': {
        name: 'Backfeed',
        description: 'Retorno do futuro para o presente (antecipação)',
        connections: ['feedback', 'temporalidade', 'guaiamum', 'sistema-ternario'],
        color: '#10b981',
        layer: 0
    },
    'opacidade': {
        name: 'Opacidade Estratégica',
        description: 'Resistir via não-transparência (Édouard Glissant)',
        connections: ['resistencia', 'honeypots', 'captcha'],
        color: '#10b981',
        layer: 0
    },
    'honeypots': {
        name: 'Honeypots',
        description: 'Armadilhas para capturar bots invasores',
        connections: ['resistencia', 'opacidade', 'captcha'],
        color: '#10b981',
        layer: 0
    },
    'ironia-politica': {
        name: 'Ironia Política',
        description: 'Crítica através da performance contraditória',
        connections: ['critica-performativa', 'captcha', 'ontologia-executavel'],
        color: '#10b981',
        layer: 0
    },
    'grafo-conceitos': {
        name: 'Grafo de Conceitos',
        description: 'Estrutura de dados que representa o rizoma',
        connections: ['navegacao-rizomatica', 'rizoma', 'websocket'],
        color: '#6366f1',
        layer: 1
    },
    'websocket': {
        name: 'WebSocket',
        description: 'Comunicação bidirecional em tempo real',
        connections: ['modo-colaborativo', 'grafo-conceitos', 'nhandereko'],
        color: '#6366f1',
        layer: 1
    },
    'meta-observacao': {
        name: 'Meta-Observação',
        description: 'Observar o ato de observar (segunda ordem)',
        connections: ['segunda-ordem', 'ontologia-executavel', 'cibernetica'],
        color: '#10b981',
        layer: 0
    },
    'canvas-background': {
        name: 'Canvas Background',
        description: 'Sistema de arte generativa que performa a filosofia',
        connections: ['ontologia-executavel', 'sistema-ternario', 'caos'],
        color: '#10b981',
        layer: 0
    },
    'caos': {
        name: 'Caos Criativo',
        description: 'Desordem produtiva, não-entrópica',
        connections: ['canvas-background', 'captcha', 'sistema-ternario'],
        color: '#10b981',
        layer: 0
    },

    // ========================================
    // CAPÍTULO 12: INTERSECCIONALIDADE DIGITAL
    // ========================================
    'ciborgue': {
        name: 'Figura do Ciborgue',
        description: 'Híbrido humano-máquina que dissolve dualismos',
        connections: ['donna-haraway', 'manifesto-ciborgue', 'pos-humanismo', 'corpo-informacional'],
        color: '#ec4899',
        layer: 0
    },
    'donna-haraway': {
        name: 'Donna Haraway',
        description: 'Teórica do ciborgue, feminismo pós-humanista',
        connections: ['ciborgue', 'manifesto-ciborgue', 'conhecimento-situado', 'cyborg-feminism'],
        color: '#8b5cf6',
        layer: 0
    },
    'manifesto-ciborgue': {
        name: 'Manifesto Ciborgue (1985)',
        description: 'Dissolução de fronteiras natureza/cultura, humano/máquina',
        connections: ['donna-haraway', 'ciborgue', 'xenofeminismo', 'glitch-feminism'],
        color: '#a855f7',
        layer: -1
    },
    'cyborg-feminism': {
        name: 'Ciberfeminismo',
        description: 'Tecnologia como espaço de luta feminista e reconfiguração',
        connections: ['donna-haraway', 'xenofeminismo', 'glitch-feminism', 'tecnofeminismo', 'hackfeministas'],
        color: '#ec4899',
        layer: 0
    },
    'xenofeminismo': {
        name: 'Xenofeminismo',
        description: 'Tecnologia para abolir gênero naturalizado (Laboria Cuboniks)',
        connections: ['cyborg-feminism', 'laboria-cuboniks', 'aceleracionismo', 'tecnofeminismo'],
        color: '#a855f7',
        layer: 1
    },
    'laboria-cuboniks': {
        name: 'Laboria Cuboniks',
        description: 'Coletivo autor do Manifesto Xenofeminista (2015)',
        connections: ['xenofeminismo', 'cyborg-feminism', 'aceleracionismo'],
        color: '#8b5cf6',
        layer: 0
    },
    'glitch-feminism': {
        name: 'Glitch Feminism',
        description: 'Erro como resistência, corpo digital recusado (Legacy Russell)',
        connections: ['cyborg-feminism', 'legacy-russell', 'manifesto-ciborgue', 'resistencia'],
        color: '#ec4899',
        layer: 0
    },
    'legacy-russell': {
        name: 'Legacy Russell',
        description: 'Teórica do glitch feminism, erro como potência',
        connections: ['glitch-feminism', 'cyborg-feminism', 'avatar'],
        color: '#8b5cf6',
        layer: 0
    },
    'tecnofeminismo': {
        name: 'Tecnofeminismo',
        description: 'Tecnologia nem neutra nem determinista (Judy Wajcman)',
        connections: ['cyborg-feminism', 'judy-wajcman', 'xenofeminismo', 'genero-computacao'],
        color: '#a855f7',
        layer: 0
    },
    'judy-wajcman': {
        name: 'Judy Wajcman',
        description: 'Socióloga, autora de TechnoFeminism (2004)',
        connections: ['tecnofeminismo', 'cyborg-feminism', 'divisao-sexual-trabalho'],
        color: '#8b5cf6',
        layer: 0
    },
    'coding-rights-brasil': {
        name: 'Coding Rights',
        description: 'Organização brasileira de direitos digitais feminista',
        connections: ['cyborg-feminism', 'hackfeministas', 'marialab', 'resistencia'],
        color: '#22c55e',
        layer: 0
    },
    'marialab': {
        name: 'MariaLab',
        description: 'Hacklab feminista de São Paulo (2017-presente)',
        connections: ['coding-rights-brasil', 'hackfeministas', 'criptografia-popular', 'resistencia'],
        color: '#22c55e',
        layer: 0
    },
    'think-olga': {
        name: 'Think Olga',
        description: 'ONG contra assédio online e violência de gênero digital',
        connections: ['cyborg-feminism', 'resistencia', 'violencia-digital'],
        color: '#22c55e',
        layer: 0
    },
    'hackfeministas': {
        name: 'Hackfeministas',
        description: 'Prática tecnológica feminista (criptografia, anonimato)',
        connections: ['cyborg-feminism', 'coding-rights-brasil', 'marialab', 'criptografia-popular', 'signal-app'],
        color: '#ec4899',
        layer: 0
    },
    'signal-app': {
        name: 'Signal',
        description: 'App de mensagens criptografadas end-to-end',
        connections: ['hackfeministas', 'criptografia-popular', 'tor-browser', 'resistencia'],
        color: '#22c55e',
        layer: 1
    },
    'tor-browser': {
        name: 'Tor Browser',
        description: 'Navegação anônima via rede cebola',
        connections: ['hackfeministas', 'signal-app', 'resistencia', 'criptografia-popular'],
        color: '#22c55e',
        layer: 1
    },
    'afrofuturismo': {
        name: 'Afrofuturismo',
        description: 'Estética que reimagina passado/futuro negro via ficção científica',
        connections: ['sun-ra', 'octavia-butler', 'kodwo-eshun', 'dubois-dupla-consciencia', 'decolonial'],
        color: '#a855f7',
        layer: 0
    },
    'sun-ra': {
        name: 'Sun Ra',
        description: 'Músico afrofuturista (Space is the Place, 1974)',
        connections: ['afrofuturismo', 'sonic-fiction', 'mythos-tecnologico'],
        color: '#8b5cf6',
        layer: -1
    },
    'octavia-butler': {
        name: 'Octavia Butler',
        description: 'Autora de ficção científica (Kindred, Xenogenesis)',
        connections: ['afrofuturismo', 'samuel-delany', 'cyborg-feminism', 'corpo-informacional'],
        color: '#8b5cf6',
        layer: -1
    },
    'samuel-delany': {
        name: 'Samuel Delany',
        description: 'Pioneiro afro-queer da FC (Babel-17, Dhalgren)',
        connections: ['afrofuturismo', 'octavia-butler', 'corpo-informacional'],
        color: '#8b5cf6',
        layer: -1
    },
    'dubois-dupla-consciencia': {
        name: 'Dupla Consciência (Du Bois)',
        description: 'Ver-se pelos olhos do opressor (The Souls of Black Folk, 1903)',
        connections: ['afrofuturismo', 'decolonial', 'feedback-opressao'],
        color: '#a855f7',
        layer: -1
    },
    'kodwo-eshun': {
        name: 'Kodwo Eshun',
        description: 'Teórico da sonic fiction e do afrofuturismo',
        connections: ['afrofuturismo', 'sonic-fiction', 'sun-ra', 'temporalidade'],
        color: '#8b5cf6',
        layer: 0
    },
    'sonic-fiction': {
        name: 'Sonic Fiction',
        description: 'Ficção sonora, música como veículo afrofuturista',
        connections: ['kodwo-eshun', 'sun-ra', 'afrofuturismo', 'mythos-tecnologico'],
        color: '#a855f7',
        layer: 0
    },
    'cosmotecnica-yuk-hui': {
        name: 'Cosmotécnicas (Yuk Hui)',
        description: 'Técnicas enraizadas em cosmologias não-ocidentais',
        connections: ['cosmotecnica', 'decolonial', 'afrofuturismo', 'epistemologia-guarani'],
        color: '#a855f7',
        layer: 0
    },
    'emicida-amarelo': {
        name: 'Emicida (Amarelo)',
        description: 'Álbum afrofuturista brasileiro (2019)',
        connections: ['afrofuturismo', 'bia-ferreira', 'resistencia'],
        color: '#22c55e',
        layer: 0
    },
    'bia-ferreira': {
        name: 'Bia Ferreira',
        description: 'Cantora afrofuturista, ciberpunk periférico brasileiro',
        connections: ['afrofuturismo', 'emicida-amarelo', 'resistencia'],
        color: '#22c55e',
        layer: 0
    },
    'neurodiversidade': {
        name: 'Neurodiversidade',
        description: 'Cérebros diversos como variação, não patologia',
        connections: ['crip-theory', 'assistive-tech', 'design-universal', 'corpo-informacional'],
        color: '#a855f7',
        layer: 0
    },
    'crip-theory': {
        name: 'Crip Theory',
        description: 'Deficiência como construção social opressiva',
        connections: ['neurodiversidade', 'robert-mcruer', 'alison-kafer', 'corpo-informacional'],
        color: '#a855f7',
        layer: 0
    },
    'robert-mcruer': {
        name: 'Robert McRuer',
        description: 'Teórico queer-crip (Crip Theory, 2006)',
        connections: ['crip-theory', 'neurodiversidade', 'corpo-informacional'],
        color: '#8b5cf6',
        layer: 0
    },
    'alison-kafer': {
        name: 'Alison Kafer',
        description: 'Teórica feminist crip (Feminist, Queer, Crip, 2013)',
        connections: ['crip-theory', 'neurodiversidade', 'futuro-acessivel'],
        color: '#8b5cf6',
        layer: 0
    },
    'assistive-tech': {
        name: 'Tecnologias Assistivas',
        description: 'Dupla face: libertação ou controle capacitista',
        connections: ['neurodiversidade', 'design-universal', 'eugenia-digital', 'corpo-informacional'],
        color: '#f59e0b',
        layer: 0
    },
    'design-universal': {
        name: 'Design Universal',
        description: 'Acessibilidade como design para todos desde o início',
        connections: ['assistive-tech', 'neurodiversidade', 'resistencia'],
        color: '#22c55e',
        layer: 1
    },
    'exclusao-digital-brasil': {
        name: 'Exclusão Digital no Brasil',
        description: '45 milhões sem internet, capacitismo estrutural',
        connections: ['neurodiversidade', 'assistive-tech', 'desigualdade', 'infraestrutura'],
        color: '#ef4444',
        layer: 0
    },
    'eugenia-digital': {
        name: 'Eugenia Digital',
        description: 'Seleção genética via CRISPR e testes pré-natais',
        connections: ['assistive-tech', 'crispr-etica', 'crip-theory', 'corpo-informacional'],
        color: '#dc2626',
        layer: 0
    },
    'crispr-etica': {
        name: 'CRISPR e Ética',
        description: 'Edição genética: cura ou eliminação da diferença?',
        connections: ['eugenia-digital', 'neurodiversidade', 'transumanismo'],
        color: '#f59e0b',
        layer: 0
    },
    'futuro-acessivel': {
        name: 'Futuro Acessível',
        description: 'Tecnologia para todos os corpos, não normalização',
        connections: ['alison-kafer', 'design-universal', 'assistive-tech', 'utopia-concreta'],
        color: '#22c55e',
        layer: 1
    },
    'andreas-malm': {
        name: 'Andreas Malm',
        description: 'Teórico do Capitaloceno e Fossil Capital',
        connections: ['capitaloceno', 'fossil-capital', 'crise-ecologica', 'ecosocialismo'],
        color: '#8b5cf6',
        layer: 0
    },
    'capitaloceno': {
        name: 'Capitaloceno',
        description: 'Crise ecológica como produto do capitalismo, não da humanidade',
        connections: ['andreas-malm', 'crise-ecologica', 'fossil-capital', 'jason-moore'],
        color: '#a855f7',
        layer: 0
    },
    'fossil-capital': {
        name: 'Fossil Capital',
        description: 'Capitalismo forjado no carvão e petróleo (Malm, 2016)',
        connections: ['andreas-malm', 'capitaloceno', 'crise-ecologica', 'extracao-dados'],
        color: '#ef4444',
        layer: -1
    },
    'jason-moore': {
        name: 'Jason W. Moore',
        description: 'Teórico da world-ecology, capitalismo como web of life',
        connections: ['capitaloceno', 'andreas-malm', 'crise-ecologica', 'ecosocialismo'],
        color: '#8b5cf6',
        layer: 0
    },
    'web-of-life': {
        name: 'Web of Life',
        description: 'Capitalismo como ecologia-mundo, não sistema econômico isolado',
        connections: ['jason-moore', 'capitaloceno', 'crise-ecologica', 'infraestrutura'],
        color: '#a855f7',
        layer: 0
    },
    'kohei-saito': {
        name: 'Kohei Saito',
        description: 'Marxista ecológico japonês (Degrowth Communism, 2020)',
        connections: ['ecosocialismo', 'degrowth-communism', 'decrescimento-digital', 'marx-ecologico'],
        color: '#8b5cf6',
        layer: 0
    },
    'degrowth-communism': {
        name: 'Degrowth Communism',
        description: 'Comunismo do decrescimento: abundância via suficiência',
        connections: ['kohei-saito', 'ecosocialismo', 'decrescimento-digital', 'utopia-concreta'],
        color: '#a855f7',
        layer: 1
    },
    'decrescimento-digital': {
        name: 'Decrescimento Digital',
        description: 'Menos dispositivos, mais durabilidade, suficiência tecnológica',
        connections: ['degrowth-communism', 'kohei-saito', 'low-tech', 'e-waste-brasil', 'ecosocialismo'],
        color: '#22c55e',
        layer: 1
    },
    'low-tech': {
        name: 'Low-Tech',
        description: 'Tecnologia simples, reparável, de baixo impacto',
        connections: ['decrescimento-digital', 'reparo', 'obsolescencia-programada', 'resistencia'],
        color: '#22c55e',
        layer: 1
    },
    'e-waste-brasil': {
        name: 'E-waste no Brasil',
        description: '2,4 milhões de toneladas/ano, apenas 3% reciclado',
        connections: ['decrescimento-digital', 'crise-ecologica', 'mineracao-amazonia', 'necropolitica-digital'],
        color: '#ef4444',
        layer: 0
    },
    'mineracao-amazonia': {
        name: 'Mineração na Amazônia',
        description: 'Extração de coltan, ouro, lítio para dispositivos digitais',
        connections: ['e-waste-brasil', 'crise-ecologica', 'extracao-dados', 'capitaloceno'],
        color: '#dc2626',
        layer: 0
    },
    'green-new-deal-limites': {
        name: 'Limites do Green New Deal',
        description: 'Crescimento verde impossível: extração continua',
        connections: ['ecosocialismo', 'degrowth-communism', 'crise-ecologica', 'capitaloceno'],
        color: '#f59e0b',
        layer: 0
    },
    'daos-plutocracia': {
        name: 'DAOs como Plutocracia',
        description: 'Organizações autônomas descentralizadas = 1 token = 1 voto',
        connections: ['blockchain', 'web3-critique', 'capital-fictico', 'criptomoeda'],
        color: '#ef4444',
        layer: 0
    },
    'web3-critique': {
        name: 'Crítica ao Web3',
        description: 'Descentralização ilusória, recentralização via capital',
        connections: ['daos-plutocracia', 'molly-white', 'blockchain', 'criptomoeda', 'nft'],
        color: '#f59e0b',
        layer: 0
    },
    'molly-white': {
        name: 'Molly White',
        description: 'Crítica do Web3 (Web3 is Going Just Great)',
        connections: ['web3-critique', 'ftx-collapse', 'criptomoeda'],
        color: '#8b5cf6',
        layer: 0
    },
    'ftx-collapse': {
        name: 'Colapso da FTX',
        description: 'Exchange fraudulenta, US$ 8 bilhões desviados (2022)',
        connections: ['molly-white', 'web3-critique', 'criptomoeda', 'capital-fictico', 'terra-luna-collapse'],
        color: '#dc2626',
        layer: 0
    },
    'terra-luna-collapse': {
        name: 'Colapso Terra/Luna',
        description: 'Stablecoin algorítmica: espiral da morte de US$ 40 bilhões (2022)',
        connections: ['ftx-collapse', 'criptomoeda', 'capital-fictico', 'feedback-positivo'],
        color: '#dc2626',
        layer: 0
    },
    'el-salvador-bitcoin': {
        name: 'El Salvador Bitcoin',
        description: 'Experimento autoritário falho: imposição de BTC como moeda legal',
        connections: ['criptomoeda', 'ftx-collapse', 'capital-fictico', 'technofeudalism'],
        color: '#ef4444',
        layer: 0
    },
    'technofeudalism-varoufakis': {
        name: 'Tecnofeudalismo (Varoufakis)',
        description: 'Plataformas como novos feudos, renda substituindo lucro',
        connections: ['el-salvador-bitcoin', 'plataformizacao', 'extracao-renda', 'capitalismo-vigilancia'],
        color: '#a855f7',
        layer: 0
    },
    'ecosocialismo': {
        name: 'Ecossocialismo Digital',
        description: 'Convergência entre crise ecológica e tecnologia: decrescimento, reparo, suficiência',
        connections: ['andreas-malm', 'jason-moore', 'kohei-saito', 'degrowth-communism', 'decrescimento-digital', 'green-new-deal-limites'],
        color: '#22c55e',
        layer: 1
    },
    'criptografia-popular': {
        name: 'Criptografia Popular',
        description: 'Uso de criptografia end-to-end como ferramenta de resistência',
        connections: ['hackfeministas', 'signal-app', 'tor-browser', 'resistencia', 'coding-rights-brasil'],
        color: '#22c55e',
        layer: 1
    },
    'conhecimento-situado': {
        name: 'Conhecimento Situado',
        description: 'Epistemologia feminista: todo conhecimento é localizado, corporificado (Haraway)',
        connections: ['donna-haraway', 'cyborg-feminism', 'decolonial'],
        color: '#a855f7',
        layer: 0
    },
    'violencia-digital': {
        name: 'Violência Digital de Gênero',
        description: 'Assédio, doxing, revenge porn - extensão digital da violência patriarcal',
        connections: ['think-olga', 'cyborg-feminism', 'necropolitica-digital'],
        color: '#dc2626',
        layer: 0
    },
    'mythos-tecnologico': {
        name: 'Mythos Tecnológico',
        description: 'Narrativas míticas na ficção científica afrofuturista',
        connections: ['afrofuturismo', 'sun-ra', 'sonic-fiction'],
        color: '#a855f7',
        layer: 0
    },
    'feedback-opressao': {
        name: 'Feedback de Opressão',
        description: 'Ciclos auto-reforçadores de desigualdade algorítmica',
        connections: ['dubois-dupla-consciencia', 'feedback-positivo', 'necropolitica-digital'],
        color: '#ef4444',
        layer: 0
    },
    'avatar': {
        name: 'Avatar Digital',
        description: 'Representação digital corporificada, potencial de refúgio e reconfiguração',
        connections: ['legacy-russell', 'glitch-feminism', 'ciborgue'],
        color: '#10b981',
        layer: 0
    },
    'reparo': {
        name: 'Direito ao Reparo',
        description: 'Movimento contra obsolescência programada, reparo como resistência',
        connections: ['low-tech', 'obsolescencia-programada', 'decrescimento-digital'],
        color: '#22c55e',
        layer: 1
    },
    'obsolescencia-programada': {
        name: 'Obsolescência Programada',
        description: 'Produtos projetados para quebrar, criando lixo eletrônico',
        connections: ['e-waste-brasil', 'reparo', 'low-tech'],
        color: '#ef4444',
        layer: 0
    },
    'marx-ecologico': {
        name: 'Marx Ecológico',
        description: 'Leitura ecológica de Marx: metabolic rift, relação sociedade-natureza',
        connections: ['kohei-saito', 'ecosocialismo', 'capitaloceno'],
        color: '#a855f7',
        layer: 0
    },
    'extracao-renda': {
        name: 'Extração de Renda Digital',
        description: 'Plataformas extraem renda como novos rentistas feudais',
        connections: ['technofeudalism-varoufakis', 'plataformizacao', 'capitalismo-vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'criptomoeda': {
        name: 'Criptomoedas',
        description: 'Moedas digitais descentralizadas: promessa libertária, realidade especulativa',
        connections: ['criptomoedas-capital-ficticio', 'bitcoin-sujeito-automatico', 'daos-plutocracia', 'web3-critique', 'ftx-collapse', 'terra-luna-collapse', 'el-salvador-bitcoin'],
        color: '#f59e0b',
        layer: 0
    },
    'nft': {
        name: 'NFTs',
        description: 'Non-fungible tokens: propriedade digital via blockchain, especulação artística',
        connections: ['web3-critique', 'criptomoeda', 'capital-fictico'],
        color: '#f59e0b',
        layer: 0
    },
    'transumanismo': {
        name: 'Transumanismo',
        description: 'Ideologia de superação do corpo via tecnologia (crítica: eugenia tech)',
        connections: ['crispr-etica', 'eugenia-digital', 'pos-humanismo'],
        color: '#f59e0b',
        layer: 0
    },
    'utopia-concreta': {
        name: 'Utopia Concreta',
        description: 'Futuros prefigurados no presente via práxis (Ernst Bloch)',
        connections: ['futuro-acessivel', 'degrowth-communism', 'resistencia'],
        color: '#22c55e',
        layer: 1
    },
    'desigualdade': {
        name: 'Desigualdade Digital',
        description: 'Exclusão estrutural via acesso desigual à tecnologia',
        connections: ['exclusao-digital-brasil', 'divisao-sexual-trabalho', 'necropolitica-digital'],
        color: '#ef4444',
        layer: 0
    },
    'infraestrutura': {
        name: 'Infraestrutura Material',
        description: 'Base física da internet: cabos, servidores, mineração, energia',
        connections: ['web-of-life', 'fossil-capital', 'mineracao-amazonia', 'exclusao-digital-brasil'],
        color: '#f59e0b',
        layer: 0
    },
    'aceleracionismo': {
        name: 'Aceleracionismo',
        description: 'Corrente que propõe acelerar contradições do capitalismo (Nick Land vs Left Acc)',
        connections: ['xenofeminismo', 'laboria-cuboniks', 'colapso-modernizacao'],
        color: '#a855f7',
        layer: 0
    },
    'pos-humanismo': {
        name: 'Pós-Humanismo',
        description: 'Crítica ao humanismo universalista, abertura a outras formas de vida',
        connections: ['ciborgue', 'donna-haraway', 'transumanismo', 'neurodiversidade'],
        color: '#a855f7',
        layer: 0
    },
    'corpo-informacional': {
        name: 'Corpo Informacional',
        description: 'Corpo como interface, dados, código - nem puramente biológico nem digital',
        connections: ['ciborgue', 'octavia-butler', 'neurodiversidade', 'crip-theory', 'assistive-tech', 'eugenia-digital'],
        color: '#a855f7',
        layer: 0
    },

    // ========================================
    // CONCEITOS ADICIONAIS (CAPS 14-28)
    // ========================================
    'trabalho-invisivel': {
        name: 'Trabalho Invisível',
        description: 'Trabalho técnico desvalorizado e não-reconhecido',
        connections: ['eniac-six', 'genero-computacao', 'trabalho-reprodutivo', 'moderacao-conteudo'],
        color: '#ec4899',
        layer: 0
    },
    'divisao-sexual-trabalho': {
        name: 'Divisão Sexual do Trabalho',
        description: 'Segregação de gênero no trabalho digital',
        connections: ['genero-computacao', 'trabalho-invisivel', 'uberizacao'],
        color: '#ec4899',
        layer: 0
    },
    'moderacao-conteudo': {
        name: 'Moderação de Conteúdo',
        description: 'Trabalho traumático invisibilizado nas plataformas',
        connections: ['trabalho-invisivel', 'capitalismo-vigilancia', 'necropolitica-digital'],
        color: '#ef4444',
        layer: 0
    },
    'necropolitica-digital': {
        name: 'Necropolítica Digital',
        description: 'Algoritmos que decidem quem vive e quem morre (Mbembe)',
        connections: ['feedback-positivo', 'enigma', 'e-waste', 'moderacao-conteudo', 'gabinete-odio'],
        color: '#dc2626',
        layer: 0
    },
    'gabinete-odio': {
        name: 'Gabinete do Ódio',
        description: 'Feedback positivo amplificando genocídio via algoritmos',
        connections: ['necropolitica-digital', 'feedback-positivo', 'viralizacao'],
        color: '#dc2626',
        layer: 0
    },
    'viralizacao': {
        name: 'Viralização',
        description: 'Feedback positivo social (engajamento exponencial)',
        connections: ['feedback-positivo', 'gabinete-odio', 'dopamina'],
        color: '#f97316',
        layer: 0
    },
    'gamificacao': {
        name: 'Gamificação',
        description: 'Mecânicas de jogo aplicadas para maximizar engajamento',
        connections: ['recompensa-variavel', 'vicio-digital', 'uberizacao'],
        color: '#f97316',
        layer: 0
    },
    'cybersyn': {
        name: 'Proyecto Cybersyn',
        description: 'Cibernética socialista no Chile de Allende (1971-73)',
        connections: ['feedback-negativo', 'cibernetica', 'wiener', 'planejamento-participativo'],
        color: '#22c55e',
        layer: -1
    },
    'planejamento-participativo': {
        name: 'Planejamento Participativo',
        description: 'Cibernética como ferramenta democrática, não tecnocrática',
        connections: ['cybersyn', 'democracia-algoritmicica', 'resistencia'],
        color: '#22c55e',
        layer: 0
    },
    'democracia-algoritmicica': {
        name: 'Democracia Algorítmica',
        description: 'Limites e possibilidades de tecnologia na democracia',
        connections: ['problema-parada', 'limites-tecnologia', 'planejamento-participativo'],
        color: '#7c3aed',
        layer: 0
    },
    'determinismo-tecnologico': {
        name: 'Determinismo Tecnológico',
        description: 'Crença falsa de que tecnologia resolve tudo',
        connections: ['limites-tecnologia', 'problema-parada', 'fetichismo-digital'],
        color: '#7c3aed',
        layer: 0
    },
    'homeostase': {
        name: 'Homeostase',
        description: 'Equilíbrio dinâmico via feedback negativo',
        connections: ['feedback-negativo', 'cybersyn', 'autopoiese'],
        color: '#10b981',
        layer: 0
    },
    'digitalizacao': {
        name: 'Digitalização',
        description: 'Conversão de tudo em bits - base da mercantilização digital',
        connections: ['bit', 'teoria-informacao', 'mais-valia-dados', 'fetichismo-digital'],
        color: '#8b5cf6',
        layer: 0
    },
    'extrativismo': {
        name: 'Extrativismo Digital',
        description: 'Mineração de dados + mineração literal (terras raras)',
        connections: ['materialidade-computacao', 'ecologia-digital', 'e-waste', 'mais-valia-dados'],
        color: '#22c55e',
        layer: 0
    },
    'geopolitica': {
        name: 'Geopolítica Digital',
        description: 'Guerra das redes, soberania tecnológica, BRICS vs OTAN',
        connections: ['darpa', 'duplo-uso-militar', 'vigilancia', 'internet'],
        color: '#dc2626',
        layer: 0
    },
    'internet': {
        name: 'Internet',
        description: 'ARPANET militar → www civil (mas vigilância permanece)',
        connections: ['darpa', 'geopolitica', 'capitalismo-vigilancia'],
        color: '#6366f1',
        layer: 0
    },

    // ========================================
    // CAPÍTULO 7: MARXISMO E TECNOLOGIA - DEBATES CLÁSSICOS
    // ========================================
    'determinismo-tecnologico': {
        name: 'Determinismo Tecnológico',
        description: 'Visão de que a tecnologia determina a sociedade ("o moinho a vapor nos deu o capitalista")',
        connections: ['construtivismo-social', 'forcas-produtivas', 'relacoes-producao'],
        color: '#ef4444',
        layer: -1 // Passado (debate clássico)
    },
    'construtivismo-social': {
        name: 'Construtivismo Social da Tecnologia',
        description: 'A sociedade molda a tecnologia, não o contrário - escolhas políticas definem design',
        connections: ['determinismo-tecnologico', 'operaismo', 'cosmotecnica'],
        color: '#ef4444',
        layer: -1
    },
    
    // Escola de Frankfurt
    'escola-frankfurt': {
        name: 'Escola de Frankfurt',
        description: 'Teoria crítica: Adorno, Horkheimer, Marcuse - crítica da razão instrumental',
        connections: ['razao-instrumental', 'industria-cultural', 'marcuse', 'adorno'],
        color: '#dc2626',
        layer: -1
    },
    'razao-instrumental': {
        name: 'Razão Instrumental',
        description: 'Razão reduzida a cálculo de meios eficientes, sem questionar os fins',
        connections: ['escola-frankfurt', 'adorno', 'marcuse', 'algoritmos'],
        color: '#dc2626',
        layer: 0 // Presente (crítica aplicável ao digital)
    },
    'adorno': {
        name: 'Theodor Adorno',
        description: 'Filósofo da Escola de Frankfurt - crítica da indústria cultural',
        connections: ['escola-frankfurt', 'industria-cultural', 'pseudo-individualizacao', 'horkheimer'],
        color: '#dc2626',
        layer: -1
    },
    'horkheimer': {
        name: 'Max Horkheimer',
        description: 'Filósofo da Escola de Frankfurt - co-autor da Dialética do Esclarecimento',
        connections: ['escola-frankfurt', 'adorno', 'razao-instrumental'],
        color: '#dc2626',
        layer: -1
    },
    'marcuse': {
        name: 'Herbert Marcuse',
        description: 'O Homem Unidimensional (1964) - tecnologia como controle através do conforto',
        connections: ['escola-frankfurt', 'homem-unidimensional', 'falsas-necessidades', 'razao-instrumental'],
        color: '#dc2626',
        layer: -1
    },
    'homem-unidimensional': {
        name: 'Homem Unidimensional',
        description: 'Indivíduo cuja capacidade crítica foi suprimida por satisfação de falsas necessidades',
        connections: ['marcuse', 'falsas-necessidades', 'industria-cultural', 'vicio-digital'],
        color: '#dc2626',
        layer: 0 // Presente (crítica ao usuário de redes sociais)
    },
    'falsas-necessidades': {
        name: 'Falsas Necessidades',
        description: 'Desejos criados pelo sistema para integrar indivíduos à lógica capitalista',
        connections: ['marcuse', 'homem-unidimensional', 'industria-cultural', 'capitalismo-vigilancia'],
        color: '#dc2626',
        layer: 0
    },
    'industria-cultural': {
        name: 'Indústria Cultural',
        description: 'Produção em massa de cultura padronizada para pacificar e controlar',
        connections: ['adorno', 'escola-frankfurt', 'pseudo-individualizacao', 'plataformas', 'algoritmos'],
        color: '#dc2626',
        layer: 0 // Presente (Netflix, Spotify, TikTok)
    },
    'pseudo-individualizacao': {
        name: 'Pseudo-Individualização',
        description: 'Ilusão de escolha e personalidade dentro de sistema padronizado',
        connections: ['industria-cultural', 'adorno', 'algoritmos', 'plataformas'],
        color: '#dc2626',
        layer: 0
    },
    
    // Operaísmo Italiano
    'operaismo': {
        name: 'Operaísmo Italiano',
        description: 'Inversão da perspectiva: luta operária como motor da história (Tronti, Panzieri)',
        connections: ['tronti', 'panzieri', 'recusa-trabalho', 'composicao-tecnica', 'pos-operaismo'],
        color: '#8b5cf6',
        layer: -1 // Passado (anos 1960-70)
    },
    'tronti': {
        name: 'Mario Tronti',
        description: 'Operários e Capital (1966) - capital é REATIVO à luta operária',
        connections: ['operaismo', 'recusa-trabalho', 'composicao-tecnica', 'composicao-politica'],
        color: '#8b5cf6',
        layer: -1
    },
    'panzieri': {
        name: 'Raniero Panzieri',
        description: 'Fundador do operaísmo - tecnologia como arma política do capital',
        connections: ['operaismo', 'tronti', 'composicao-tecnica'],
        color: '#8b5cf6',
        layer: -1
    },
    'composicao-tecnica': {
        name: 'Composição Técnica da Classe',
        description: 'Organização do trabalho imposta pelo capital (divisão de tarefas, ritmo, hierarquia)',
        connections: ['operaismo', 'composicao-politica', 'subsuncao-real', 'algoritmos'],
        color: '#8b5cf6',
        layer: 0 // Presente (gerenciamento algorítmico)
    },
    'composicao-politica': {
        name: 'Composição Política da Classe',
        description: 'Capacidade organizativa e consciência coletiva dos trabalhadores',
        connections: ['operaismo', 'composicao-tecnica', 'recusa-trabalho', 'breque-apps'],
        color: '#8b5cf6',
        layer: 0
    },
    'recusa-trabalho': {
        name: 'Recusa do Trabalho',
        description: 'Estratégia: trabalhar menos, desvincular renda do trabalho, afirmar necessidades',
        connections: ['operaismo', 'tronti', 'greve', 'breque-apps', 'pos-operaismo'],
        color: '#8b5cf6',
        layer: 0
    },
    'operario-massa': {
        name: 'Operário-Massa',
        description: 'Trabalhador fordista desqualificado mas concentrado (poder de bloqueio)',
        connections: ['operaismo', 'fordismo', 'operario-social', 'composicao-tecnica'],
        color: '#8b5cf6',
        layer: -1
    },
    'operario-social': {
        name: 'Operário Social',
        description: 'Exploração além da fábrica - cidade inteira como "fábrica social"',
        connections: ['operario-massa', 'operaismo', 'pos-operaismo', 'uberizacao', 'fabrica-social'],
        color: '#8b5cf6',
        layer: 0 // Presente (trabalho de plataforma)
    },
    'fabrica-social': {
        name: 'Fábrica Social',
        description: 'Toda a sociedade se torna espaço de exploração e luta (não só a fábrica)',
        connections: ['operario-social', 'pos-operaismo', 'uberizacao', 'breque-apps'],
        color: '#8b5cf6',
        layer: 0
    },
    
    // Pensamento Pós-Colonial
    'pos-colonialismo': {
        name: 'Pensamento Pós-Colonial',
        description: 'Crítica da modernidade europeia como projeto colonial (Fanon, Césaire, Quijano)',
        connections: ['fanon', 'quijano', 'colonialidade', 'cosmotecnica', 'dependencia'],
        color: '#22c55e',
        layer: -1
    },
    'fanon': {
        name: 'Frantz Fanon',
        description: 'Os Condenados da Terra - violência colonial e descolonização tecnológica',
        connections: ['pos-colonialismo', 'colonialidade', 'violencia-colonial', 'cosmotecnica'],
        color: '#22c55e',
        layer: -1
    },
    'quijano': {
        name: 'Aníbal Quijano',
        description: 'Colonialidade do Poder - modernidade inseparável da colonialidade',
        connections: ['pos-colonialismo', 'colonialidade', 'centro-periferia', 'dependencia'],
        color: '#22c55e',
        layer: -1
    },
    'colonialidade': {
        name: 'Colonialidade',
        description: 'Padrões de poder colonial que sobrevivem ao colonialismo formal',
        connections: ['quijano', 'pos-colonialismo', 'dependencia-tecnologica', 'extrativismo-dados'],
        color: '#22c55e',
        layer: 0 // Presente (colonialismo digital)
    },
    'dependencia-tecnologica': {
        name: 'Dependência Tecnológica',
        description: 'Sul não participa do design das tecnologias que usa - importa do Norte',
        connections: ['colonialidade', 'centro-periferia', 'imperialismo-digital', 'cosmotecnica'],
        color: '#22c55e',
        layer: 0
    },
    'imperialismo-digital': {
        name: 'Imperialismo Digital',
        description: 'Continuidade do imperialismo via tecnologia (algoritmos, plataformas, IA)',
        connections: ['dependencia-tecnologica', 'colonialidade', 'extrativismo-dados', 'geopolitica'],
        color: '#22c55e',
        layer: 0
    },
    'colonialismo-dados': {
        name: 'Colonialismo de Dados',
        description: 'Extração de dados do Sul por corporações do Norte (Couldry & Mejias)',
        connections: ['extrativismo-dados', 'imperialismo-digital', 'mais-valia-dados', 'geopolitica'],
        color: '#22c55e',
        layer: 0
    },
    'extrativismo-dados': {
        name: 'Extrativismo de Dados',
        description: 'Dados como matéria-prima extraída sem compensação (paralelo colonial)',
        connections: ['colonialismo-dados', 'capitalismo-vigilancia', 'mais-valia-dados', 'deterioracao-termos-troca'],
        color: '#22c55e',
        layer: 0
    },
    'cosmotecnica': {
        name: 'Cosmotécnica',
        description: 'Formas culturalmente específicas de relacionar cosmos e técnica (Yuk Hui)',
        connections: ['pos-colonialismo', 'dependencia-tecnologica', 'nhandereko', 'fanon'],
        color: '#22c55e',
        layer: 1 // Futuro (alternativas ao eurocentrismo)
    },
    'yuk-hui': {
        name: 'Yuk Hui',
        description: 'Filósofo chinês - crítica da cosmotécnica europeia como única válida',
        connections: ['cosmotecnica', 'pos-colonialismo', 'dependencia-tecnologica'],
        color: '#22c55e',
        layer: 1
    },

    // ========================================
    // CAPÍTULO 4: ECONOMIA POLÍTICA E DEPENDÊNCIA
    // ========================================
    'centro-periferia': {
        name: 'Modelo Centro-Periferia',
        description: 'CEPAL/Prebisch: economia mundial dividida estruturalmente',
        connections: ['cepal', 'prebisch', 'dependencia', 'deterioracao-termos-troca', 'neocolonialismo-digital'],
        color: '#f59e0b',
        layer: -1 // Passado (teoria anos 1950)
    },
    'cepal': {
        name: 'CEPAL',
        description: 'Comissão Econômica para América Latina - estruturalismo latino-americano',
        connections: ['centro-periferia', 'prebisch', 'furtado', 'desenvolvimentismo'],
        color: '#f59e0b',
        layer: -1
    },
    'prebisch': {
        name: 'Raúl Prebisch',
        description: 'Economista argentino, fundador da CEPAL e teoria centro-periferia',
        connections: ['cepal', 'centro-periferia', 'deterioracao-termos-troca'],
        color: '#f59e0b',
        layer: -1
    },
    'deterioracao-termos-troca': {
        name: 'Deterioração dos Termos de Troca',
        description: 'Preços de commodities caem vs manufaturados - transferência de valor',
        connections: ['centro-periferia', 'prebisch', 'extrativismo', 'extrativismo-dados'],
        color: '#f59e0b',
        layer: 0
    },
    'dependencia': {
        name: 'Teoria da Dependência',
        description: 'Subdesenvolvimento não é etapa, é estrutura (Marini, Dos Santos)',
        connections: ['centro-periferia', 'furtado', 'marini', 'superexploracao', 'dependencia-tecnologica'],
        color: '#f59e0b',
        layer: -1
    },
    'furtado': {
        name: 'Celso Furtado',
        description: 'Economista brasileiro - subdesenvolvimento como estrutura, não atraso',
        connections: ['cepal', 'dependencia', 'desenvolvimentismo', 'zona-franca-manaus'],
        color: '#f59e0b',
        layer: -1
    },
    'marini': {
        name: 'Ruy Mauro Marini',
        description: 'Teórico marxista da dependência - conceito de superexploração',
        connections: ['dependencia', 'superexploracao', 'uberizacao', 'mais-valia-absoluta'],
        color: '#f59e0b',
        layer: -1
    },
    'superexploracao': {
        name: 'Superexploração do Trabalho',
        description: 'Jornadas longas + ritmo intenso + salários abaixo subsistência',
        connections: ['marini', 'dependencia', 'uberizacao', 'mais-valia-absoluta', 'moderacao-conteudo'],
        color: '#ef4444',
        layer: 0 // Presente (conceito ativo hoje)
    },
    'desenvolvimentismo': {
        name: 'Desenvolvimentismo',
        description: 'Projeto de industrialização nacional via Estado (CEPAL anos 50-60)',
        connections: ['cepal', 'furtado', 'zona-franca-manaus', 'soberania-tecnologica'],
        color: '#f59e0b',
        layer: -1
    },
    'zona-franca-manaus': {
        name: 'Zona Franca de Manaus',
        description: 'Monta Samsung/LG mas não projeta - dependência tecnológica concreta',
        connections: ['furtado', 'desenvolvimentismo', 'dependencia-tecnologica', 'subsuncao-real'],
        color: '#f59e0b',
        layer: 0
    },
    
    // Debate do Cálculo Socialista
    'calculo-socialista': {
        name: 'Debate do Cálculo Socialista',
        description: 'Mises vs Lange: é possível planejar economia sem mercado?',
        connections: ['mises', 'hayek', 'lange', 'planejamento-cibernetico', 'cybersyn', 'ogas'],
        color: '#8b5cf6',
        layer: -1
    },
    'mises': {
        name: 'Ludwig von Mises',
        description: 'Economista austríaco - argumentou impossibilidade do cálculo socialista',
        connections: ['calculo-socialista', 'hayek', 'mercado'],
        color: '#8b5cf6',
        layer: -1
    },
    'hayek': {
        name: 'Friedrich Hayek',
        description: '"Conhecimento disperso" (1945) - mercado como sistema de informação',
        connections: ['mises', 'calculo-socialista', 'glushkov', 'planejamento-cibernetico'],
        color: '#8b5cf6',
        layer: -1
    },
    'lange': {
        name: 'Oskar Lange',
        description: 'Economista polonês - propôs "socialismo de mercado" (equações)',
        connections: ['calculo-socialista', 'hayek', 'planejamento-cibernetico'],
        color: '#8b5cf6',
        layer: -1
    },
    'mercado': {
        name: 'Mercado',
        description: 'Sistema de coordenação via preços (Hayek: processa info dispersa)',
        connections: ['hayek', 'mises', 'planejamento-cibernetico', 'algoritmos'],
        color: '#8b5cf6',
        layer: 0
    },
    
    // Planejamento Cibernético
    'planejamento-cibernetico': {
        name: 'Planejamento Cibernético',
        description: 'Cibernética resolve "problema do cálculo" via feedback em tempo real',
        connections: ['calculo-socialista', 'hayek', 'ogas', 'cybersyn', 'glushkov', 'beer'],
        color: '#22c55e',
        layer: 0
    },
    'ogas': {
        name: 'OGAS (СССР)',
        description: 'Rede soviética proposta por Glushkov (1962) - nunca implementada',
        connections: ['glushkov', 'planejamento-cibernetico', 'cybersyn', 'feedback'],
        color: '#22c55e',
        layer: -1
    },
    'glushkov': {
        name: 'Viktor Glushkov',
        description: 'Ciberneticista soviético - propôs OGAS (bloqueado por burocracia)',
        connections: ['ogas', 'planejamento-cibernetico', 'hayek', 'cibernetica'],
        color: '#22c55e',
        layer: -1
    },
    'beer': {
        name: 'Stafford Beer',
        description: 'Ciberneticista britânico - criou Cybersyn no Chile (VSM)',
        connections: ['cybersyn', 'planejamento-cibernetico', 'wiener', 'vsm'],
        color: '#22c55e',
        layer: -1
    },
    'vsm': {
        name: 'Viable System Model (VSM)',
        description: 'Modelo de Beer: autonomia local + coordenação global',
        connections: ['beer', 'cybersyn', 'feedback-negativo', 'autopoiese'],
        color: '#22c55e',
        layer: -1
    },
    'greve-caminhoneiros-1972': {
        name: 'Greve dos Caminhoneiros (Chile, 1972)',
        description: 'Cybersyn reorganizou logística em 24h - prova de conceito',
        connections: ['cybersyn', 'beer', 'planejamento-cibernetico', 'feedback'],
        color: '#22c55e',
        layer: -1
    },
    'golpe-pinochet': {
        name: 'Golpe de Pinochet (1973)',
        description: 'Destruiu Cybersyn - mas não sua viabilidade técnica',
        connections: ['cybersyn', 'necropolitica-digital', 'duplo-uso-militar'],
        color: '#dc2626',
        layer: -1
    },
    
    // Dependência Digital (atualização 2025)
    'dependencia-tecnologica': {
        name: 'Dependência Tecnológica',
        description: 'Periferia importa tech/IA, exporta dados brutos - nova colonialidade',
        connections: ['dependencia', 'neocolonialismo-digital', 'soberania-tecnologica', 'extrativismo-dados'],
        color: '#ef4444',
        layer: 0
    },
    'neocolonialismo-digital': {
        name: 'Neocolonialismo Digital',
        description: 'Centro-periferia atualizado: infraestrutura, algoritmos, dados',
        connections: ['centro-periferia', 'dependencia-tecnologica', 'extrativismo-dados', 'geopolitica'],
        color: '#ef4444',
        layer: 0
    },
    'extrativismo-dados': {
        name: 'Extrativismo de Dados',
        description: 'Dados = novo café/ouro/minério - extraídos da periferia de graça',
        connections: ['neocolonialismo-digital', 'mais-valia-dados', 'deterioracao-termos-troca', 'capitalismo-vigilancia'],
        color: '#ef4444',
        layer: 0
    },
    'soberania-tecnologica': {
        name: 'Soberania Tecnológica',
        description: 'Controle popular sobre infraestrutura, software, dados, algoritmos',
        connections: ['dependencia-tecnologica', 'software-livre', 'plataformas-cooperativas', 'china-tech'],
        color: '#10b981',
        layer: 1 // Futuro (proposta)
    },
    'software-livre': {
        name: 'Software Livre',
        description: 'Código aberto, auditável, modificável - soberania via transparência',
        connections: ['soberania-tecnologica', 'resistencia', 'gnu-linux', 'commons-digitais', 'infraestrutura-alternativa', 'mastodon', 'desescassificacao'],
        color: '#10b981',
        layer: 1
    },
    'gnu-linux': {
        name: 'GNU/Linux',
        description: 'Sistema operacional livre - base técnica da soberania',
        connections: ['software-livre', 'soberania-tecnologica', 'stallman'],
        color: '#10b981',
        layer: 0
    },
    'stallman': {
        name: 'Richard Stallman',
        description: 'Fundador do movimento software livre (GNU, 1983)',
        connections: ['gnu-linux', 'software-livre', 'commons-digitais'],
        color: '#10b981',
        layer: -1
    },
    'commons-digitais': {
        name: 'Commons Digitais',
        description: 'Bens comuns digitais - conhecimento não-mercantilizado',
        connections: ['software-livre', 'general-intellect', 'resistencia', 'plataformas-cooperativas'],
        color: '#10b981',
        layer: 1
    },
    'plataformas-cooperativas': {
        name: 'Plataformas Cooperativas',
        description: 'Uber/iFood de propriedade dos trabalhadores',
        connections: ['soberania-tecnologica', 'resistencia', 'nhandereko', 'commons-digitais', 'cooperativa-dados', 'cataki-exemplo'],
        color: '#10b981',
        layer: 1
    },
    'cooperativa-plataforma': {
        name: 'Cooperativa de Plataforma (alias)',
        description: 'Ver: Plataformas Cooperativas',
        connections: ['plataformas-cooperativas'],
        color: '#10b981',
        layer: 1
    },
    'china-tech': {
        name: 'Soberania Tech Chinesa',
        description: 'Baidu/Alibaba/Huawei - rompeu dependência, mas criou nova periferia',
        connections: ['soberania-tecnologica', 'geopolitica', 'neocolonialismo-digital', 'brics'],
        color: '#f59e0b',
        layer: 0
    },
    'brics': {
        name: 'BRICS Pay',
        description: 'Sistema de pagamentos Sul-Sul - escapa SWIFT/dólar',
        connections: ['soberania-tecnologica', 'china-tech', 'geopolitica'],
        color: '#10b981',
        layer: 1
    },
    
    // Ferramentas Digitais para Planejamento
    'blockchain-dao': {
        name: 'Blockchain/DAOs',
        description: 'Registros transparentes de decisões coletivas sem autoridade central',
        connections: ['planejamento-cibernetico', 'soberania-tecnologica', 'democracia-algoritmicica'],
        color: '#6366f1',
        layer: 1
    },
    'orcamento-participativo-digital': {
        name: 'Orçamento Participativo Digital',
        description: 'Plataformas como Decidim (Barcelona) - cidadãos votam prioridades',
        connections: ['planejamento-participativo', 'democracia-algoritmicica', 'barcelona-tech'],
        color: '#10b981',
        layer: 1
    },
    'barcelona-tech': {
        name: 'Barcelona Tech Soberana',
        description: 'Software livre na administração, Decidim, migração de Microsoft',
        connections: ['soberania-tecnologica', 'orcamento-participativo-digital', 'software-livre'],
        color: '#10b981',
        layer: 0
    },
    'modelagem-sistemas-dinamicos': {
        name: 'Modelagem de Sistemas Dinâmicos',
        description: 'Stella/Vensim - simula impactos de políticas antes de implementar',
        connections: ['planejamento-cibernetico', 'feedback', 'cybersyn'],
        color: '#8b5cf6',
        layer: 1
    },
    'iot-sensores': {
        name: 'Redes de Sensores IoT',
        description: 'Agricultura urbana, microgrids energéticas peer-to-peer',
        connections: ['planejamento-cibernetico', 'soberania-tecnologica', 'ecologia-digital'],
        color: '#22c55e',
        layer: 1
    },
    'xai': {
        name: 'IA Explicável (XAI)',
        description: 'Algoritmos que mostram POR QUÊ decidiram - auditoria democrática',
        connections: ['transparencia-algoritmica', 'democracia-algoritmicica', 'tres-perguntas-algoritmo'],
        color: '#6366f1',
        layer: 1
    },
    
    // Casos de Superexploração Digital
    'moderacao-filipinas': {
        name: 'Moderação nas Filipinas',
        description: 'Superexploração racial+colonial - trabalho mais violento, menor salário',
        connections: ['superexploracao', 'moderacao-conteudo', 'neocolonialismo-digital', 'necropolitica-digital'],
        color: '#dc2626',
        layer: 0
    },
    'subsuncao-real': {
        name: 'Subsunção Real',
        description: 'Capital reorganiza processo de trabalho via tecnologia (máquinas incorporam conhecimento do trabalhador)',
        connections: ['subsuncao-formal', 'zona-franca-manaus', 'gerenciamento-algoritmico', 'uberizacao', 'composicao-organica-capital', 'general-intellect', 'automacao'],
        color: '#ef4444',
        layer: 0
    },
    'subsuncao-formal': {
        name: 'Subsunção Formal',
        description: 'Capital controla trabalho sem alterar processo técnico (artesão vira empregado)',
        connections: ['subsuncao-real', 'mais-valia', 'extracao-dados'],
        color: '#f87171',
        layer: 0
    },
    'composicao-organica-capital': {
        name: 'Composição Orgânica do Capital (COC)',
        description: 'Razão c/v: capital constante (máquinas) sobre capital variável (trabalho). Alta COC = muita automação',
        connections: ['capital-constante', 'capital-variavel', 'queda-taxa-lucro', 'automacao', 'general-intellect'],
        color: '#8b5cf6',
        layer: 0
    },
    'capital-constante': {
        name: 'Capital Constante (c)',
        description: 'Meios de produção (máquinas, matéria-prima) que apenas transferem valor, não criam valor novo',
        connections: ['composicao-organica-capital', 'capital-variavel', 'automacao'],
        color: '#a78bfa',
        layer: 0
    },
    'capital-variavel': {
        name: 'Capital Variável (v)',
        description: 'Força de trabalho (salários) — única fonte que cria valor novo (mais-valia)',
        connections: ['composicao-organica-capital', 'capital-constante', 'mais-valia', 'trabalho-vivo'],
        color: '#c4b5fd',
        layer: 0
    },
    'queda-taxa-lucro': {
        name: 'Lei da Queda Tendencial da Taxa de Lucro',
        description: 'COC aumenta (mais máquinas, menos trabalho) → fonte de lucro diminui → taxa de lucro cai',
        connections: ['composicao-organica-capital', 'contratendencias', 'crise-capitalista', 'automacao', 'financeirizacao'],
        color: '#dc2626',
        layer: 0
    },
    'contratendencias': {
        name: 'Contratendências à Queda do Lucro',
        description: 'Estratégias para compensar queda: superexploração, barateamento de máquinas, imperialismo, crédito, monopólio',
        connections: ['queda-taxa-lucro', 'superexploracao', 'neocolonialismo-digital', 'financeirizacao', 'big-tech', 'uberizacao'],
        color: '#f59e0b',
        layer: 0
    },
    'general-intellect': {
        name: 'General Intellect (Intelecto Geral)',
        description: 'Conhecimento social acumulado (ciência, tecnologia, cooperação) como principal força produtiva — contradição: conhecimento quer ser livre, capital precisa cercá-lo',
        connections: ['subsuncao-real', 'trabalho-imaterial', 'composicao-organica-capital', 'software-livre', 'propriedade-intelectual', 'comum-digital', 'ia', 'algoritmos', 'plataformas'],
        color: '#a855f7',
        layer: 0
    },
    'propriedade-intelectual': {
        name: 'Propriedade Intelectual',
        description: 'Copyright, patentes, DRM — cercamento do conhecimento para criar escassez artificial',
        connections: ['general-intellect', 'comum-digital', 'pirataria', 'software-livre', 'big-tech'],
        color: '#ef4444',
        layer: 0
    },
    'comum-digital': {
        name: 'O Comum Digital',
        description: 'Conhecimento produzido coletivamente que deveria ser apropriado coletivamente (Wikipedia, Linux, ciência aberta)',
        connections: ['general-intellect', 'software-livre', 'propriedade-intelectual', 'plataformas-cooperativas', 'resistencia'],
        color: '#10b981',
        layer: 1
    }
};

// Estado do rizoma
let rizomaActive = false;
let rizomaOverlay = null;
let selectedConcept = null;
let searchFilter = '';
let layerFilter = 'all'; // 'all', -1, 0, 1
let viewMode = 'grid'; // 'grid' ou 'graph'
let searchDebounceTimer = null;

/**
 * Inicializar sistema de navegação rizomática
 */
function initializeRizoma() {
    console.log('🌀 Inicializando navegação rizomática...');

    // Criar overlay
    rizomaOverlay = document.createElement('div');
    rizomaOverlay.id = 'rizoma-overlay';
    rizomaOverlay.className = 'rizoma-overlay';
    rizomaOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(10, 10, 15, 0.95);
        z-index: 9999;
        display: none;
        overflow: auto;
        padding: 2rem;
    `;

    document.body.appendChild(rizomaOverlay);

    // Adicionar botão de fechar
    const closeBtn = document.createElement('button');
    closeBtn.innerHTML = '✕ Fechar Rizoma';
    closeBtn.style.cssText = `
        position: fixed;
        top: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, #ef4444, #dc2626);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        z-index: 10000;
        transition: all 0.3s ease;
    `;
    closeBtn.onclick = closeRizoma;
    rizomaOverlay.appendChild(closeBtn);

    // Adicionar botão de exportar
    const exportBtn = document.createElement('button');
    exportBtn.innerHTML = '📥 Exportar Rizoma';
    exportBtn.style.cssText = `
        position: fixed;
        top: 2rem;
        right: 14rem;
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        z-index: 10000;
        transition: all 0.3s ease;
    `;
    exportBtn.onmouseover = () => {
        exportBtn.style.transform = 'translateY(-2px)';
        exportBtn.style.boxShadow = '0 8px 16px rgba(139, 92, 246, 0.4)';
    };
    exportBtn.onmouseout = () => {
        exportBtn.style.transform = 'translateY(0)';
        exportBtn.style.boxShadow = 'none';
    };
    exportBtn.onclick = exportRizoma;
    rizomaOverlay.appendChild(exportBtn);

    console.log('✅ Navegação rizomática inicializada');
}

/**
 * Abrir visualização do rizoma
 * @param {string} startConcept - Conceito inicial (opcional)
 */
function openRizoma(startConcept = null) {
    console.log('🌀 Abrindo rizoma...', startConcept);

    // Verificar se há transição ternária em andamento
    if (typeof isTransitioning !== 'undefined' && isTransitioning) {
        console.warn('⏸️ Aguarde a transição ternária concluir');
        return;
    }

    if (!rizomaOverlay) {
        initializeRizoma();
    }

    selectedConcept = startConcept;
    rizomaActive = true;
    rizomaOverlay.style.display = 'block';

    // Render do grafo
    renderRizomaGraph();

    // Após render, rolar suavemente até o card do conceito inicial (se houver)
    setTimeout(() => {
        if (startConcept) {
            const card = document.querySelector(`[data-concept-key="${startConcept}"]`);
            if (card) {
                // Scroll dentro do overlay para centralizar o card
                try {
                    card.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    // foco acessível
                    if (typeof card.focus === 'function') card.focus({ preventScroll: true });
                } catch (err) {
                    // fallback simples
                    card.scrollIntoView();
                }
            }
        }
    }, 200);

    // Impedir scroll do body
    document.body.style.overflow = 'hidden';
}

/**
 * Exportar rizoma em diferentes formatos
 */
function exportRizoma() {
    console.log('📥 Exportando rizoma...');

    // Criar menu de opções
    const menu = document.createElement('div');
    menu.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, rgba(20, 20, 30, 0.98), rgba(10, 10, 20, 0.98));
        border: 2px solid rgba(139, 92, 246, 0.5);
        border-radius: 16px;
        padding: 2rem;
        z-index: 10001;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        min-width: 400px;
    `;

    menu.innerHTML = `
        <h3 style="margin: 0 0 1.5rem 0; color: #8b5cf6; font-size: 1.5rem; text-align: center;">
            📥 Exportar Rizoma
        </h3>
        <p style="color: #94a3b8; margin-bottom: 1.5rem; text-align: center; font-size: 0.9rem;">
            Escolha o formato de exportação:
        </p>
        <div style="display: flex; flex-direction: column; gap: 1rem;">
            <button id="export-json" style="
                background: linear-gradient(135deg, #3b82f6, #2563eb);
                color: white;
                border: none;
                padding: 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.3s ease;
            ">
                📄 JSON (para visualizadores externos)
            </button>
            <button id="export-graphml" style="
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                border: none;
                padding: 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.3s ease;
            ">
                🌐 GraphML (para Gephi, Cytoscape)
            </button>
            <button id="export-csv" style="
                background: linear-gradient(135deg, #f59e0b, #d97706);
                color: white;
                border: none;
                padding: 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.3s ease;
            ">
                📊 CSV (nós e arestas)
            </button>
            <button id="export-markdown" style="
                background: linear-gradient(135deg, #ec4899, #db2777);
                color: white;
                border: none;
                padding: 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.3s ease;
            ">
                📝 Markdown (documentação)
            </button>
            <button id="export-cancel" style="
                background: linear-gradient(135deg, #64748b, #475569);
                color: white;
                border: none;
                padding: 1rem;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 600;
                transition: all 0.3s ease;
            ">
                ✕ Cancelar
            </button>
        </div>
    `;

    rizomaOverlay.appendChild(menu);

    // Event listeners
    menu.querySelector('#export-json').onclick = () => {
        exportAsJSON();
        menu.remove();
    };

    menu.querySelector('#export-graphml').onclick = () => {
        exportAsGraphML();
        menu.remove();
    };

    menu.querySelector('#export-csv').onclick = () => {
        exportAsCSV();
        menu.remove();
    };

    menu.querySelector('#export-markdown').onclick = () => {
        exportAsMarkdown();
        menu.remove();
    };

    menu.querySelector('#export-cancel').onclick = () => {
        menu.remove();
    };

    // Hover effects
    menu.querySelectorAll('button').forEach(btn => {
        btn.onmouseover = () => {
            btn.style.transform = 'translateY(-2px)';
            btn.style.boxShadow = '0 8px 16px rgba(0, 0, 0, 0.3)';
        };
        btn.onmouseout = () => {
            btn.style.transform = 'translateY(0)';
            btn.style.boxShadow = 'none';
        };
    });
}

/**
 * Exportar como JSON
 */
function exportAsJSON() {
    const data = {
        meta: {
            title: 'A Revolução Cibernética - Rizoma de Conceitos',
            version: '2.0',
            date: new Date().toISOString(),
            totalConcepts: Object.keys(conceptGraph).length,
            changelog: [
                '2025-10-27 (v2): Cap 2 - Cibernética (40 conceitos)',
                '2025-10-27 (v1): Cap 1 - Marxismo (32 conceitos)'
            ]
        },
        nodes: Object.entries(conceptGraph).map(([id, concept]) => ({
            id,
            name: concept.name,
            description: concept.description,
            color: concept.color,
            layer: concept.layer,
            connections: concept.connections
        })),
        edges: []
    };

    // Gerar arestas
    Object.entries(conceptGraph).forEach(([sourceId, concept]) => {
        concept.connections.forEach(targetId => {
            data.edges.push({
                source: sourceId,
                target: targetId,
                type: 'relates_to'
            });
        });
    });

    downloadFile('rizoma-revolucao-cibernetica.json', JSON.stringify(data, null, 2), 'application/json');
    console.log('✅ Exportado como JSON');
}

/**
 * Exportar como GraphML (para Gephi, Cytoscape)
 */
function exportAsGraphML() {
    let xml = `<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
         http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">
  <key id="name" for="node" attr.name="name" attr.type="string"/>
  <key id="description" for="node" attr.name="description" attr.type="string"/>
  <key id="color" for="node" attr.name="color" attr.type="string"/>
  <key id="layer" for="node" attr.name="layer" attr.type="int"/>
  <graph id="Rizoma" edgedefault="undirected">
`;

    // Adicionar nós
    Object.entries(conceptGraph).forEach(([id, concept]) => {
        xml += `    <node id="${id}">
      <data key="name">${escapeXML(concept.name)}</data>
      <data key="description">${escapeXML(concept.description)}</data>
      <data key="color">${concept.color}</data>
      <data key="layer">${concept.layer}</data>
    </node>
`;
    });

    // Adicionar arestas (sem duplicatas)
    const edgesAdded = new Set();
    Object.entries(conceptGraph).forEach(([sourceId, concept]) => {
        concept.connections.forEach(targetId => {
            const edgeKey = [sourceId, targetId].sort().join('|');
            if (!edgesAdded.has(edgeKey)) {
                xml += `    <edge source="${sourceId}" target="${targetId}"/>\n`;
                edgesAdded.add(edgeKey);
            }
        });
    });

    xml += `  </graph>
</graphml>`;

    downloadFile('rizoma-revolucao-cibernetica.graphml', xml, 'application/xml');
    console.log('✅ Exportado como GraphML');
}

/**
 * Exportar como CSV (nós e arestas separados)
 */
function exportAsCSV() {
    // CSV de nós
    let nodesCSV = 'id,name,description,color,layer,connections_count\n';
    Object.entries(conceptGraph).forEach(([id, concept]) => {
        nodesCSV += `"${id}","${escapeCSV(concept.name)}","${escapeCSV(concept.description)}","${concept.color}",${concept.layer},${concept.connections.length}\n`;
    });

    // CSV de arestas
    let edgesCSV = 'source,target\n';
    const edgesAdded = new Set();
    Object.entries(conceptGraph).forEach(([sourceId, concept]) => {
        concept.connections.forEach(targetId => {
            const edgeKey = [sourceId, targetId].sort().join('|');
            if (!edgesAdded.has(edgeKey)) {
                edgesCSV += `"${sourceId}","${targetId}"\n`;
                edgesAdded.add(edgeKey);
            }
        });
    });

    // Download como ZIP (simulado com dois arquivos)
    downloadFile('rizoma-nodes.csv', nodesCSV, 'text/csv');
    setTimeout(() => {
        downloadFile('rizoma-edges.csv', edgesCSV, 'text/csv');
    }, 500);

    console.log('✅ Exportado como CSV (nós + arestas)');
}

/**
 * Exportar como Markdown (documentação)
 */
function exportAsMarkdown() {
    let md = `# A Revolução Cibernética - Rizoma de Conceitos

**Versão:** 2.0  
**Data:** ${new Date().toLocaleDateString('pt-BR')}  
**Total de Conceitos:** ${Object.keys(conceptGraph).length}

## 📊 Estatísticas

- **Conceitos Marxistas (Cap 1):** ${Object.values(conceptGraph).filter(c => c.color === '#ef4444').length}
- **Conceitos Cibernéticos (Cap 2):** ${Object.values(conceptGraph).filter(c => c.color === '#8b5cf6').length}
- **Conceitos de Gênero:** ${Object.values(conceptGraph).filter(c => c.color === '#ec4899').length}
- **Conceitos Ecológicos:** ${Object.values(conceptGraph).filter(c => c.color === '#22c55e').length}
- **Conceitos Militares:** ${Object.values(conceptGraph).filter(c => c.color === '#dc2626').length}

## 🗂️ Conceitos por Camada Temporal

### Camada -1: Passado (Fundamentos Históricos)

`;

    Object.entries(conceptGraph)
        .filter(([_, c]) => c.layer === -1)
        .sort((a, b) => a[1].name.localeCompare(b[1].name))
        .forEach(([id, concept]) => {
            md += `#### ${concept.name} (\`${id}\`)\n\n`;
            md += `${concept.description}\n\n`;
            md += `**Conexões:** ${concept.connections.map(c => `\`${c}\``).join(', ')}\n\n`;
            md += `---\n\n`;
        });

    md += `### Camada 0: Presente (Análise Contemporânea)

`;

    Object.entries(conceptGraph)
        .filter(([_, c]) => c.layer === 0)
        .sort((a, b) => a[1].name.localeCompare(b[1].name))
        .forEach(([id, concept]) => {
            md += `#### ${concept.name} (\`${id}\`)\n\n`;
            md += `${concept.description}\n\n`;
            md += `**Conexões:** ${concept.connections.map(c => `\`${c}\``).join(', ')}\n\n`;
            md += `---\n\n`;
        });

    md += `### Camada 1: Futuro (Horizontes de Transformação)

`;

    Object.entries(conceptGraph)
        .filter(([_, c]) => c.layer === 1)
        .sort((a, b) => a[1].name.localeCompare(b[1].name))
        .forEach(([id, concept]) => {
            md += `#### ${concept.name} (\`${id}\`)\n\n`;
            md += `${concept.description}\n\n`;
            md += `**Conexões:** ${concept.connections.map(c => `\`${c}\``).join(', ')}\n\n`;
            md += `---\n\n`;
        });

    md += `## 📝 Como Usar

Este documento pode ser usado para:

1. **Estudo:** Navegar pelos conceitos de forma não-linear
2. **Pesquisa:** Encontrar conexões entre ideias
3. **Ensino:** Material didático para cursos
4. **Desenvolvimento:** Base para aplicações de visualização de grafos

## 🔗 Importar em Ferramentas

- **Obsidian:** Cada conceito pode virar uma nota
- **Roam Research:** Importar como blocos interligados
- **Notion:** Criar database com relações
- **Anki:** Flashcards com as conexões

---

*Gerado automaticamente pela Navegação Rizomática*  
*A Revolução Cibernética © 2025*
`;

    downloadFile('rizoma-revolucao-cibernetica.md', md, 'text/markdown');
    console.log('✅ Exportado como Markdown');
}

/**
 * Funções auxiliares de escape
 */
function escapeXML(str) {
    return str.replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&apos;');
}

function escapeCSV(str) {
    return str.replace(/"/g, '""');
}

/**
 * Download de arquivo
 */
function downloadFile(filename, content, mimeType) {
    const blob = new Blob([content], { type: mimeType });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    // Mostrar notificação
    showExportNotification(filename);
}

/**
 * Mostrar notificação de exportação
 */
function showExportNotification(filename) {
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        z-index: 10002;
        font-weight: 600;
        animation: slideIn 0.3s ease;
    `;
    notification.innerHTML = `✅ ${filename} baixado com sucesso!`;

    document.body.appendChild(notification);

    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

/**
 * Fechar visualização do rizoma
 */
function closeRizoma() {
    console.log('👻 Fechando rizoma...');

    // Verificar se há transição ternária em andamento
    if (typeof isTransitioning !== 'undefined' && isTransitioning) {
        console.warn('⏸️ Aguarde a transição ternária concluir');
        return;
    }

    rizomaActive = false;
    if (rizomaOverlay) {
        rizomaOverlay.style.display = 'none';
    }

    // Restaurar scroll
    document.body.style.overflow = '';
}

/**
 * Renderizar grafo de conceitos
 */
function renderRizomaGraph() {
    if (!rizomaOverlay) return;

    // Limpar conteúdo anterior (exceto botões de controle)
    const closeBtn = rizomaOverlay.querySelector('button:nth-of-type(1)');
    const exportBtn = rizomaOverlay.querySelector('button:nth-of-type(2)');
    rizomaOverlay.innerHTML = '';
    if (closeBtn) rizomaOverlay.appendChild(closeBtn);
    if (exportBtn) rizomaOverlay.appendChild(exportBtn);

    // Container principal
    const container = document.createElement('div');
    container.style.cssText = `
        max-width: 1400px;
        margin: 0 auto;
        padding-top: 4rem;
        position: relative;
    `;

    // Título
    const title = document.createElement('h2');
    container.id = 'rizoma-main-container';
    title.style.cssText = `
        text-align: center;
        color: #ec4899;
        font-size: 2.5rem;
        margin-bottom: 1rem;
    `;
    container.appendChild(title);

    // Subtítulo
    const subtitle = document.createElement('p');
    subtitle.innerHTML = 'Conceitos interligados sem hierarquia. <strong>Clique para explorar conexões.</strong><br><small>Pressione <kbd>R</kbd> para abrir/fechar | <kbd>ESC</kbd> para fechar</small>';
    subtitle.style.cssText = `
        text-align: center;
        color: #a78bfa;
        font-size: 1.2rem;
        margin-bottom: 1rem;
    `;
    container.appendChild(subtitle);

    // Barra de busca e filtros
    const searchBar = document.createElement('div');
    searchBar.style.cssText = `
        display: flex;
        gap: 1rem;
        justify-content: center;
        align-items: center;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    `;

    // Campo de busca
    const searchInput = document.createElement('input');
    searchInput.type = 'text';
    searchInput.placeholder = '🔍 Buscar conceitos...';
    searchInput.value = searchFilter;
    searchInput.style.cssText = `
        background: rgba(26, 26, 46, 0.8);
        border: 2px solid rgba(139, 92, 246, 0.3);
        border-radius: 8px;
        padding: 0.75rem 1rem;
        color: #d1d5db;
        font-size: 1rem;
        width: 300px;
        outline: none;
        transition: all 0.3s ease;
    `;
    searchInput.addEventListener('focus', () => {
        searchInput.style.borderColor = '#8b5cf6';
        searchInput.style.boxShadow = '0 0 15px rgba(139, 92, 246, 0.3)';
    });
    searchInput.addEventListener('blur', () => {
        searchInput.style.borderColor = 'rgba(139, 92, 246, 0.3)';
        searchInput.style.boxShadow = 'none';
    });
    searchInput.addEventListener('input', (e) => {
        // Debounced update to avoid rebuilding the entire overlay on each keystroke
        searchFilter = e.target.value.toLowerCase();
        clearTimeout(searchDebounceTimer);
        searchDebounceTimer = setTimeout(() => {
            updateRizomaResults();
        }, 120);
    });
    const layerSelect = document.createElement('select');
    layerSelect.style.cssText = `
        background: rgba(26, 26, 46, 0.8);
        border: 2px solid rgba(139, 92, 246, 0.3);
        border-radius: 8px;
        padding: 0.75rem 1rem;
        color: #d1d5db;
        font-size: 1rem;
        cursor: pointer;
        outline: none;
        transition: all 0.3s ease;
    `;

    layerSelect.innerHTML = `
        <option value="all">📅 Todas as camadas</option>
        <option value="-1">🕰️ Passado (-1)</option>
        <option value="0">⚡ Presente (0)</option>
        <option value="1">🔮 Futuro (+1)</option>
    `;
    layerSelect.value = layerFilter;
    layerSelect.addEventListener('change', (e) => {
        layerFilter = e.target.value === 'all' ? 'all' : parseInt(e.target.value);
        updateRizomaResults();
    });

    // Botão limpar filtros
    const clearBtn = document.createElement('button');
    clearBtn.textContent = '🗑️ Limpar';
    clearBtn.style.cssText = `
        background: rgba(239, 68, 68, 0.2);
        border: 2px solid rgba(239, 68, 68, 0.3);
        border-radius: 8px;
        padding: 0.75rem 1rem;
        color: #ef4444;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
    `;
    clearBtn.addEventListener('click', () => {
        searchFilter = '';
        layerFilter = 'all';
        updateRizomaResults();
    });
    clearBtn.addEventListener('mouseenter', () => {
        clearBtn.style.background = 'rgba(239, 68, 68, 0.3)';
        clearBtn.style.transform = 'scale(1.05)';
    });
    clearBtn.addEventListener('mouseleave', () => {
        clearBtn.style.background = 'rgba(239, 68, 68, 0.2)';
        clearBtn.style.transform = 'scale(1)';
    });

    searchBar.appendChild(searchInput);
    searchBar.appendChild(layerSelect);
    searchBar.appendChild(clearBtn);

    // Botão de alternar visualização
    const toggleViewBtn = document.createElement('button');
    toggleViewBtn.textContent = viewMode === 'grid' ? '🕸️ Grafo' : '🔲 Grade';
    toggleViewBtn.style.cssText = `
        background: rgba(99, 102, 241, 0.2);
        border: 2px solid rgba(99, 102, 241, 0.3);
        border-radius: 8px;
        padding: 0.75rem 1rem;
        color: #6366f1;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
    `;
    toggleViewBtn.addEventListener('click', () => {
        viewMode = viewMode === 'grid' ? 'graph' : 'grid';
        updateRizomaResults();
    });
    toggleViewBtn.addEventListener('mouseenter', () => {
        toggleViewBtn.style.background = 'rgba(99, 102, 241, 0.3)';
        toggleViewBtn.style.transform = 'scale(1.05)';
    });
    toggleViewBtn.addEventListener('mouseleave', () => {
        toggleViewBtn.style.background = 'rgba(99, 102, 241, 0.2)';
        toggleViewBtn.style.transform = 'scale(1)';
    });

    searchBar.appendChild(toggleViewBtn);
    container.appendChild(searchBar);

    // Estatísticas do rizoma
    const stats = document.createElement('div');
    stats.id = 'rizoma-stats';
    const allConcepts = Object.entries(conceptGraph);

    // Aplicar filtros
    const filteredConcepts = allConcepts.filter(([key, concept]) => {
        // Filtro de busca
        const matchesSearch = !searchFilter ||
            concept.name.toLowerCase().includes(searchFilter) ||
            concept.description.toLowerCase().includes(searchFilter) ||
            key.toLowerCase().includes(searchFilter);

        // Filtro de camada
        const matchesLayer = layerFilter === 'all' || concept.layer === layerFilter;

        return matchesSearch && matchesLayer;
    });

    const totalConcepts = Object.keys(conceptGraph).length;
    const visibleConcepts = filteredConcepts.length;
    const totalConnections = Object.values(conceptGraph).reduce((sum, c) => sum + c.connections.length, 0);
    const avgConnections = (totalConnections / totalConcepts).toFixed(1);

    // Log de diagnóstico
    console.log(`🌀 Rizoma renderizado: ${totalConcepts} conceitos, ${totalConnections} conexões, média ${avgConnections}/nó`);

    stats.innerHTML = `
        <div style="text-align: center; margin-bottom: 2rem; color: #9ca3af;">
            📊 <strong>${visibleConcepts}</strong> conceitos ${visibleConcepts < totalConcepts ? `(${totalConcepts} total)` : ''} • 
            🔗 <strong>${totalConnections}</strong> conexões • 
            ⚡ <strong>${avgConnections}</strong> conexões/conceito médio
        </div>
        <div style="text-align: center; color: #9ca3af;">
            🌊 <strong>Estrutura rizomática</strong>
        </div>
    `;
    container.appendChild(stats);

    // SVG para linhas de conexão (posicionado atrás do grid)
    const svgContainer = document.createElement('div');
    svgContainer.id = 'connection-svg-container';
    svgContainer.style.cssText = `
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
    `;

    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
    svg.setAttribute('width', '100%');
    svg.setAttribute('height', '100%');
    svg.style.position = 'absolute';
    svg.style.top = '0';
    svg.style.left = '0';
    svgContainer.appendChild(svg);
    container.appendChild(svgContainer);

    // Renderizar baseado no modo de visualização
    if (viewMode === 'graph') {
        renderGraphView(container, filteredConcepts);
    } else {
        renderGridView(container, filteredConcepts);
    }

    rizomaOverlay.appendChild(container);

    // Desenhar conexões e garantir que o card selecionado esteja visível (modo grid)
    if (selectedConcept && viewMode === 'grid') {
        setTimeout(() => {
            const selectedCard = document.querySelector(`[data-concept-key="${selectedConcept}"]`);
            if (selectedCard) {
                try {
                    selectedCard.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    if (typeof selectedCard.focus === 'function') selectedCard.focus({ preventScroll: true });
                } catch (err) {
                    selectedCard.scrollIntoView();
                }
            }
            drawConnections();
        }, 200);
    }
}

/**
 * Renderizar visualização em grade
 */
function renderGridView(container, filteredConcepts) {
    // Grid de conceitos
    const grid = document.createElement('div');
    grid.id = 'concepts-grid';
    grid.style.cssText = `
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
        position: relative;
        z-index: 1;
    `;

    // Renderizar apenas conceitos filtrados
    filteredConcepts.forEach(([key, concept]) => {
        const card = createConceptCard(key, concept);
        card.dataset.conceptKey = key;
        grid.appendChild(card);
    });

    // Mensagem se não houver resultados
    if (filteredConcepts.length === 0) {
        const noResults = document.createElement('div');
        noResults.style.cssText = `
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: #9ca3af;
            font-size: 1.2rem;
        `;
        noResults.innerHTML = `
            <div style="font-size: 3rem; margin-bottom: 1rem;">🔍</div>
            <strong>Nenhum conceito encontrado</strong>
            <p style="margin-top: 0.5rem; font-size: 1rem;">Tente ajustar os filtros de busca</p>
        `;
        grid.appendChild(noResults);
    }

    container.appendChild(grid);

    // Legenda de camadas
    const legend = createLegend();
    container.appendChild(legend);
}

/**
 * Renderizar visualização em grafo (force-directed)
 */
function renderGraphView(container, filteredConcepts) {
    const graphContainer = document.createElement('div');
    graphContainer.id = 'graph-view';
    graphContainer.style.cssText = `
        position: relative;
        width: 100%;
        height: 600px;
        background: rgba(10, 10, 15, 0.5);
        border-radius: 12px;
        border: 1px solid rgba(139, 92, 246, 0.3);
        margin-bottom: 2rem;
        overflow: hidden;
    `;

    const canvas = document.createElement('canvas');
    canvas.width = 1400;
    canvas.height = 600;
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    graphContainer.appendChild(canvas);

    container.appendChild(graphContainer);

    // Inicializar simulação de força
    initForceDirectedGraph(canvas, filteredConcepts);

    // Legenda
    const legend = createLegend();
    container.appendChild(legend);
}

/**
 * Criar legenda de camadas temporais
 */
function createLegend() {
    const legend = document.createElement('div');
    legend.id = 'rizoma-legend';
    legend.style.cssText = `
        display: flex;
        justify-content: center;
        gap: 2rem;
        flex-wrap: wrap;
        padding: 2rem;
        background: rgba(139, 92, 246, 0.1);
        border-radius: 12px;
        border: 1px solid rgba(139, 92, 246, 0.3);
    `;

    legend.innerHTML = `
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 20px; height: 20px; background: #8b5cf6; border-radius: 4px;"></div>
            <span style="color: #a78bfa;">Passado (-1)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 20px; height: 20px; background: #10b981; border-radius: 4px;"></div>
            <span style="color: #10b981;">Presente (0)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 20px; height: 20px; background: #6366f1; border-radius: 4px;"></div>
            <span style="color: #a78bfa;">Futuro (+1)</span>
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div style="width: 20px; height: 20px; background: #ef4444; border-radius: 4px;"></div>
            <span style="color: #ef4444;">Crítica</span>
        </div>
    `;

    return legend;
}

/**
 * Retorna a lista de conceitos filtrados segundo `searchFilter` e `layerFilter`.
 */
function getFilteredConcepts() {
    const allConcepts = Object.entries(conceptGraph);
    return allConcepts.filter(([key, concept]) => {
        const matchesSearch = !searchFilter ||
            concept.name.toLowerCase().includes(searchFilter) ||
            concept.description.toLowerCase().includes(searchFilter) ||
            key.toLowerCase().includes(searchFilter);
        const matchesLayer = layerFilter === 'all' || concept.layer === layerFilter;
        return matchesSearch && matchesLayer;
    });
}

/**
 * Atualiza somente a área de resultados (grid ou grafo) e estatísticas sem recriar o overlay,
 * preservando foco e posição do caret no campo de busca.
 */
function updateRizomaResults() {
    const container = document.getElementById('rizoma-main-container');
    if (!container) return;

    // Atualizar estatísticas
    const filteredConcepts = getFilteredConcepts();
    const totalConcepts = Object.keys(conceptGraph).length;
    const visibleConcepts = filteredConcepts.length;
    const totalConnections = Object.values(conceptGraph).reduce((sum, c) => sum + c.connections.length, 0);
    const avgConnections = (totalConnections / totalConcepts).toFixed(1);

    const stats = document.getElementById('rizoma-stats');
    if (stats) {
        stats.innerHTML = `
            <div style="text-align: center; margin-bottom: 2rem; color: #9ca3af;">
                📊 <strong>${visibleConcepts}</strong> conceitos ${visibleConcepts < totalConcepts ? `(${totalConcepts} total)` : ''} • 
                🔗 <strong>${totalConnections}</strong> conexões • 
                ⚡ <strong>${avgConnections}</strong> conexões/conceito médio
            </div>
            <div style="text-align: center; color: #9ca3af;">
                🌊 <strong>Estrutura rizomática</strong>
            </div>
        `;
    }

    // Remover visão anterior
    const oldGrid = container.querySelector('#concepts-grid');
    if (oldGrid) oldGrid.remove();
    const oldGraph = container.querySelector('#graph-view');
    if (oldGraph) oldGraph.remove();

    // Remover legenda antiga e adicionar uma nova (simpler)
    const oldLegend = document.getElementById('rizoma-legend');
    if (oldLegend) oldLegend.remove();

    // Renderizar a vista atual com os conceitos filtrados
    if (viewMode === 'graph') {
        renderGraphView(container, filteredConcepts);
    } else {
        renderGridView(container, filteredConcepts);
    }

    // Se um conceito estiver selecionado, redesenhar conexões
    setTimeout(() => {
        if (selectedConcept && viewMode === 'grid') {
            drawConnections();
        }
    }, 50);
}

/**
 * Inicializar grafo com force-directed layout
 */
function initForceDirectedGraph(canvas, filteredConcepts) {
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;

    // Criar nós com posições iniciais
    const nodes = filteredConcepts.map(([key, concept]) => ({
        key,
        concept,
        x: Math.random() * width,
        y: Math.random() * height,
        vx: 0,
        vy: 0,
        radius: 25
    }));

    // Criar mapa de índices
    const nodeMap = {};
    nodes.forEach((node, i) => {
        nodeMap[node.key] = i;
    });

    // Criar arestas
    const edges = [];
    filteredConcepts.forEach(([key, concept]) => {
        concept.connections.forEach(connKey => {
            if (nodeMap[connKey] !== undefined && nodeMap[key] !== undefined) {
                edges.push({
                    source: nodeMap[key],
                    target: nodeMap[connKey]
                });
            }
        });
    });

    // Parâmetros da simulação
    const params = {
        repulsion: 5000,
        attraction: 0.001,
        damping: 0.85,
        centerForce: 0.02,
        minDistance: 100
    };

    let animationId;
    let isDragging = false;
    let draggedNode = null;

    // Função de atualização
    function update() {
        // Força de repulsão entre todos os nós
        for (let i = 0; i < nodes.length; i++) {
            for (let j = i + 1; j < nodes.length; j++) {
                const dx = nodes[j].x - nodes[i].x;
                const dy = nodes[j].y - nodes[i].y;
                const dist = Math.sqrt(dx * dx + dy * dy) || 1;

                if (dist < params.minDistance) {
                    const force = params.repulsion / (dist * dist);
                    const fx = (dx / dist) * force;
                    const fy = (dy / dist) * force;

                    nodes[i].vx -= fx;
                    nodes[i].vy -= fy;
                    nodes[j].vx += fx;
                    nodes[j].vy += fy;
                }
            }
        }

        // Força de atração pelas arestas
        edges.forEach(edge => {
            const source = nodes[edge.source];
            const target = nodes[edge.target];
            const dx = target.x - source.x;
            const dy = target.y - source.y;
            const dist = Math.sqrt(dx * dx + dy * dy) || 1;

            const force = dist * params.attraction;
            const fx = (dx / dist) * force;
            const fy = (dy / dist) * force;

            source.vx += fx;
            source.vy += fy;
            target.vx -= fx;
            target.vy -= fy;
        });

        // Força para o centro
        const centerX = width / 2;
        const centerY = height / 2;

        nodes.forEach(node => {
            const dx = centerX - node.x;
            const dy = centerY - node.y;
            node.vx += dx * params.centerForce;
            node.vy += dy * params.centerForce;
        });

        // Atualizar posições
        nodes.forEach(node => {
            if (node !== draggedNode) {
                node.vx *= params.damping;
                node.vy *= params.damping;
                node.x += node.vx;
                node.y += node.vy;

                // Manter dentro dos limites
                node.x = Math.max(node.radius, Math.min(width - node.radius, node.x));
                node.y = Math.max(node.radius, Math.min(height - node.radius, node.y));
            }
        });
    }

    // Função de renderização
    function render() {
        ctx.clearRect(0, 0, width, height);

        // Desenhar arestas
        ctx.strokeStyle = 'rgba(139, 92, 246, 0.2)';
        ctx.lineWidth = 1;
        edges.forEach(edge => {
            const source = nodes[edge.source];
            const target = nodes[edge.target];
            ctx.beginPath();
            ctx.moveTo(source.x, source.y);
            ctx.lineTo(target.x, target.y);
            ctx.stroke();
        });

        // Desenhar nós
        nodes.forEach(node => {
            const isSelected = node.key === selectedConcept;

            // Círculo externo (brilho se selecionado)
            if (isSelected) {
                ctx.fillStyle = node.concept.color + '40';
                ctx.beginPath();
                ctx.arc(node.x, node.y, node.radius + 10, 0, Math.PI * 2);
                ctx.fill();
            }

            // Círculo principal
            ctx.fillStyle = node.concept.color;
            ctx.beginPath();
            ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
            ctx.fill();

            // Borda
            ctx.strokeStyle = isSelected ? '#ffffff' : 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = isSelected ? 3 : 1;
            ctx.stroke();

            // Texto
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 12px sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';

            // Dividir texto em linhas se necessário
            const words = node.concept.name.split(' ');
            if (words.length > 2) {
                ctx.fillText(words.slice(0, 2).join(' '), node.x, node.y - 5);
                ctx.fillText(words.slice(2).join(' '), node.x, node.y + 8);
            } else {
                ctx.fillText(node.concept.name, node.x, node.y);
            }
        });
    }

    // Loop de animação
    function animate() {
        update();
        render();
        animationId = requestAnimationFrame(animate);
    }

    // Interação com mouse
    canvas.addEventListener('mousedown', (e) => {
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const mouseX = (e.clientX - rect.left) * scaleX;
        const mouseY = (e.clientY - rect.top) * scaleY;

        // Verificar se clicou em algum nó
        for (let node of nodes) {
            const dx = mouseX - node.x;
            const dy = mouseY - node.y;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist < node.radius) {
                isDragging = true;
                draggedNode = node;
                selectConcept(node.key);
                break;
            }
        }
    });

    canvas.addEventListener('mousemove', (e) => {
        if (isDragging && draggedNode) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            draggedNode.x = (e.clientX - rect.left) * scaleX;
            draggedNode.y = (e.clientY - rect.top) * scaleY;
            draggedNode.vx = 0;
            draggedNode.vy = 0;
        }

        // Mudar cursor se estiver sobre um nó
        const rect = canvas.getBoundingClientRect();
        const scaleX = canvas.width / rect.width;
        const scaleY = canvas.height / rect.height;
        const mouseX = (e.clientX - rect.left) * scaleX;
        const mouseY = (e.clientY - rect.top) * scaleY;

        let overNode = false;
        for (let node of nodes) {
            const dx = mouseX - node.x;
            const dy = mouseY - node.y;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist < node.radius) {
                overNode = true;
                break;
            }
        }

        canvas.style.cursor = overNode ? 'pointer' : 'default';
    });

    canvas.addEventListener('mouseup', () => {
        isDragging = false;
        draggedNode = null;
    });

    canvas.addEventListener('mouseleave', () => {
        isDragging = false;
        draggedNode = null;
    });

    // Iniciar animação
    animate();

    // Limpar ao fechar
    const originalClose = closeRizoma;
    window.closeRizoma = function () {
        if (animationId) {
            cancelAnimationFrame(animationId);
        }
        originalClose();
        window.closeRizoma = originalClose;
    };
}

/**
 * Desenhar linhas de conexão entre conceitos (modo grid)
 */
function drawConnections() {
    if (!selectedConcept) return;

    const svg = document.querySelector('#connection-svg-container svg');
    if (!svg) return;

    // Limpar conexões anteriores
    svg.innerHTML = '';

    // Obter posição do card selecionado
    const selectedCard = document.querySelector(`[data-concept-key="${selectedConcept}"]`);
    if (!selectedCard) return;

    const selectedRect = selectedCard.getBoundingClientRect();
    const containerRect = document.getElementById('concepts-grid').getBoundingClientRect();

    const selectedCenterX = selectedRect.left + selectedRect.width / 2 - containerRect.left;
    const selectedCenterY = selectedRect.top + selectedRect.height / 2 - containerRect.top;

    // Desenhar linha para cada conexão
    const concept = conceptGraph[selectedConcept];
    concept.connections.forEach(connKey => {
        const connCard = document.querySelector(`[data-concept-key="${connKey}"]`);
        if (!connCard) return;

        const connRect = connCard.getBoundingClientRect();
        const connCenterX = connRect.left + connRect.width / 2 - containerRect.left;
        const connCenterY = connRect.top + connRect.height / 2 - containerRect.top;

        // Criar linha SVG
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', selectedCenterX);
        line.setAttribute('y1', selectedCenterY);
        line.setAttribute('x2', connCenterX);
        line.setAttribute('y2', connCenterY);
        line.setAttribute('stroke', concept.color);
        line.setAttribute('stroke-width', '2');
        line.setAttribute('stroke-opacity', '0.5');
        line.setAttribute('stroke-dasharray', '5,5');

        // Animação de "formiga marchando"
        const animate = document.createElementNS('http://www.w3.org/2000/svg', 'animate');
        animate.setAttribute('attributeName', 'stroke-dashoffset');
        animate.setAttribute('from', '0');
        animate.setAttribute('to', '10');
        animate.setAttribute('dur', '0.5s');
        animate.setAttribute('repeatCount', 'indefinite');

        line.appendChild(animate);
        svg.appendChild(line);
    });
}


/**
 * Criar card de conceito
 */
function createConceptCard(key, concept) {
    const card = document.createElement('div');
    card.className = 'concept-card';
    card.dataset.concept = key;
    card.dataset.conceptKey = key;

    const isSelected = selectedConcept === key;
    const isConnected = selectedConcept && conceptGraph[selectedConcept]?.connections.includes(key);

    card.style.cssText = `
        background: ${isSelected ? 'rgba(139, 92, 246, 0.2)' : isConnected ? 'rgba(99, 102, 241, 0.15)' : 'rgba(26, 26, 46, 0.8)'};
        border: 2px solid ${isSelected ? concept.color : isConnected ? conceptGraph[selectedConcept].color : 'rgba(' + hexToRgb(concept.color) + ', 0.3)'};
        border-radius: 12px;
        padding: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        ${isSelected ? 'transform: scale(1.05); box-shadow: 0 0 30px ' + concept.color + ';' : ''}
        ${isConnected ? 'box-shadow: 0 0 20px ' + conceptGraph[selectedConcept].color + '40;' : ''}
    `;

    // Badge de camada temporal
    const layerBadge = {
        '-1': '🕰️ Passado',
        '0': '⚡ Presente',
        '1': '🔮 Futuro'
    }[concept.layer] || '❓';

    card.innerHTML = `
        <div style="position: absolute; top: 0.5rem; right: 0.5rem; font-size: 0.7rem; opacity: 0.7;">
            ${layerBadge}
        </div>
        <h3 style="color: ${concept.color}; margin-bottom: 0.5rem; font-size: 1.2rem;">${concept.name}</h3>
        <p style="color: #d1d5db; font-size: 0.9rem; margin-bottom: 1rem; line-height: 1.5;">${concept.description}</p>
        <div style="margin-top: 1rem;">
            <strong style="color: #a78bfa; font-size: 0.85rem;">Conectado a (${concept.connections.length}):</strong>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                ${concept.connections.map(conn => {
        const connConcept = conceptGraph[conn];
        if (!connConcept) return '';
        return `<span style="background: ${connConcept.color}; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">${connConcept.name}</span>`;
    }).join('')}
            </div>
        </div>
    `;

    card.addEventListener('click', () => selectConcept(key));

    card.addEventListener('mouseenter', () => {
        if (key !== selectedConcept) {
            card.style.transform = 'translateY(-5px)';
            card.style.boxShadow = `0 10px 30px ${concept.color}40`;
        }
    });

    card.addEventListener('mouseleave', () => {
        if (key !== selectedConcept) {
            card.style.transform = '';
            card.style.boxShadow = isConnected ? `0 0 20px ${conceptGraph[selectedConcept].color}40` : '';
        }
    });

    return card;
}

/**
 * Selecionar conceito
 */
function selectConcept(key) {
    console.log('🎯 Conceito selecionado:', key);
    selectedConcept = selectedConcept === key ? null : key;
    renderRizomaGraph();

    // Mostrar painel de detalhes se houver conceito selecionado
    if (selectedConcept) {
        showConceptDetails(selectedConcept);
    } else {
        hideConceptDetails();
    }
}

/**
 * Mostrar painel de detalhes do conceito
 */
function showConceptDetails(key) {
    const concept = conceptGraph[key];
    if (!concept) return;

    // Remover painel existente
    hideConceptDetails();

    // Criar painel
    const panel = document.createElement('div');
    panel.id = 'concept-details-panel';
    panel.style.cssText = `
        position: fixed;
        right: 2rem;
        top: 6rem;
        width: 400px;
        max-height: calc(100vh - 8rem);
        background: rgba(26, 26, 46, 0.95);
        border: 2px solid ${concept.color};
        border-radius: 12px;
        padding: 2rem;
        z-index: 10001;
        overflow-y: auto;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        animation: slideInRight 0.3s ease;
    `;

    // Adicionar animação CSS
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        #concept-details-panel::-webkit-scrollbar {
            width: 8px;
        }
        #concept-details-panel::-webkit-scrollbar-track {
            background: rgba(139, 92, 246, 0.1);
            border-radius: 4px;
        }
        #concept-details-panel::-webkit-scrollbar-thumb {
            background: ${concept.color};
            border-radius: 4px;
        }
    `;
    document.head.appendChild(style);

    // Badge de camada
    const layerBadge = {
        '-1': '🕰️ Passado',
        '0': '⚡ Presente',
        '1': '🔮 Futuro'
    }[concept.layer] || '❓';

    // Conteúdo do painel
    panel.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
            <h3 style="color: ${concept.color}; margin: 0; font-size: 1.5rem;">${concept.name}</h3>
            <button onclick="hideConceptDetails()" style="
                background: rgba(239, 68, 68, 0.2);
                border: 1px solid rgba(239, 68, 68, 0.3);
                color: #ef4444;
                border-radius: 6px;
                padding: 0.5rem 0.75rem;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.3s ease;
            ">✕</button>
        </div>
        
        <div style="margin-bottom: 1rem;">
            <span style="
                display: inline-block;
                background: ${concept.color}40;
                color: ${concept.color};
                padding: 0.5rem 1rem;
                border-radius: 6px;
                font-size: 0.9rem;
                font-weight: 600;
            ">${layerBadge}</span>
        </div>
        
        <p style="color: #d1d5db; line-height: 1.6; margin-bottom: 2rem;">
            ${concept.description}
        </p>
        
        <div style="margin-bottom: 2rem;">
            <h4 style="color: #a78bfa; font-size: 1.1rem; margin-bottom: 1rem;">
                🔗 Conexões (${concept.connections.length})
            </h4>
            <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                ${concept.connections.map(connKey => {
        const connConcept = conceptGraph[connKey];
        if (!connConcept) return '';
        return `
                        <div onclick="selectConcept('${connKey}')" style="
                            background: rgba(${hexToRgb(connConcept.color)}, 0.1);
                            border: 1px solid rgba(${hexToRgb(connConcept.color)}, 0.3);
                            border-radius: 8px;
                            padding: 0.75rem;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseenter="this.style.borderColor='${connConcept.color}'; this.style.transform='translateX(5px)';"
                           onmouseleave="this.style.borderColor='rgba(${hexToRgb(connConcept.color)}, 0.3)'; this.style.transform='translateX(0)';">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <div style="
                                    width: 12px;
                                    height: 12px;
                                    background: ${connConcept.color};
                                    border-radius: 50%;
                                    flex-shrink: 0;
                                "></div>
                                <div style="flex: 1;">
                                    <div style="color: ${connConcept.color}; font-weight: 600; margin-bottom: 0.25rem;">
                                        ${connConcept.name}
                                    </div>
                                    <div style="color: #9ca3af; font-size: 0.85rem;">
                                        ${connConcept.description}
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
    }).join('')}
            </div>
        </div>
        
        <div style="
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            padding-top: 1rem;
            color: #9ca3af;
            font-size: 0.85rem;
        ">
            💡 <strong>Dica:</strong> Clique em uma conexão para explorar outro conceito
        </div>
    `;

    rizomaOverlay.appendChild(panel);

    // Expor função globalmente
    window.hideConceptDetails = hideConceptDetails;
}

/**
 * Esconder painel de detalhes
 */
function hideConceptDetails() {
    const panel = document.getElementById('concept-details-panel');
    if (panel) {
        panel.remove();
    }
}

/**
 * Helper: converter hex para rgb
 */
function hexToRgb(hex) {
    const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ?
        `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` :
        '139, 92, 246';
}

/**
 * Adicionar tags de conceitos ao conteúdo existente
 */
function tagConceptsInContent() {
    console.log('🏷️ Adicionando tags de conceitos...');

    // Função auxiliar para processar nó de texto
    function processTextNode(textNode) {
        const text = textNode.textContent;

        // Build alternation of concept names (longest first to prefer longer matches)
        const concepts = Object.entries(conceptGraph).map(([key, concept]) => ({ key, name: concept.name, color: concept.color }));
        concepts.sort((a, b) => b.name.length - a.name.length);
        const alternation = concepts.map(c => escapeRegExp(c.name)).join('|');

        if (!alternation) return;

        // Build combined regex (try unicode-aware, fallback to latin-range capture)
        let combinedRegex;
        let usesPrefix = false;
        try {
            combinedRegex = new RegExp('(?<!\\p{L})(' + alternation + ')(?!\\p{L})', 'giu');
        } catch (err) {
            // Fallback for older engines: capture prefix char (or start)
            combinedRegex = new RegExp('(^|[^A-Za-zÀ-ÖØ-öø-ÿ])(' + alternation + ')(?=$|[^A-Za-zÀ-ÖØ-öø-ÿ])', 'gi');
            usesPrefix = true;
        }

        const fragment = document.createDocumentFragment();
        let lastIndex = 0;
        let match;

        while ((match = combinedRegex.exec(text)) !== null) {
            const fullIndex = match.index;
            if (usesPrefix) {
                // match[1] = prefix, match[2] = word
                const prefix = match[1] || '';
                const word = match[2];
                const start = fullIndex + prefix.length;
                const end = start + word.length;

                if (start > lastIndex) {
                    fragment.appendChild(document.createTextNode(text.slice(lastIndex, start)));
                }

                // find corresponding concept key (case-insensitive)
                const found = concepts.find(c => c.name.toLowerCase() === word.toLowerCase());
                const span = document.createElement('span');
                span.className = 'concept-tag';
                span.dataset.concept = found ? found.key : word.toLowerCase();
                span.style.color = found ? found.color : '#8b5cf6';
                span.style.textDecoration = 'underline dotted';
                span.style.cursor = 'pointer';
                span.style.fontWeight = '500';
                span.style.transition = 'all 0.3s ease';
                span.textContent = word;
                span.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); if (found) window.openRizoma(found.key); });
                span.title = `🌀 Clique para explorar '${word}' no rizoma`;
                // hover effects
                span.addEventListener('mouseenter', () => {
                    span.style.textDecoration = 'underline solid';
                    if (found) span.style.textShadow = `0 0 8px rgba(${hexToRgb(found.color)}, 0.25)`;
                });
                span.addEventListener('mouseleave', () => {
                    span.style.textDecoration = 'underline dotted';
                    span.style.textShadow = 'none';
                });

                fragment.appendChild(span);
                lastIndex = end;
            } else {
                // match[1] is the word
                const word = match[1];
                const start = match.index;
                const end = start + word.length;

                if (start > lastIndex) {
                    fragment.appendChild(document.createTextNode(text.slice(lastIndex, start)));
                }

                const found = concepts.find(c => c.name.toLowerCase() === word.toLowerCase());
                const span = document.createElement('span');
                span.className = 'concept-tag';
                span.dataset.concept = found ? found.key : word.toLowerCase();
                span.style.color = found ? found.color : '#8b5cf6';
                span.style.textDecoration = 'underline dotted';
                span.style.cursor = 'pointer';
                span.style.fontWeight = '500';
                span.style.transition = 'all 0.3s ease';
                span.textContent = word;
                span.addEventListener('click', (e) => { e.preventDefault(); e.stopPropagation(); if (found) window.openRizoma(found.key); });
                span.title = `🌀 Clique para explorar '${word}' no rizoma`;
                // hover effects
                span.addEventListener('mouseenter', () => {
                    span.style.textDecoration = 'underline solid';
                    if (found) span.style.textShadow = `0 0 8px rgba(${hexToRgb(found.color)}, 0.25)`;
                });
                span.addEventListener('mouseleave', () => {
                    span.style.textDecoration = 'underline dotted';
                    span.style.textShadow = 'none';
                });

                fragment.appendChild(span);
                lastIndex = end;
            }
        }

        if (lastIndex < text.length) {
            fragment.appendChild(document.createTextNode(text.slice(lastIndex)));
        }

        // If no matches, do nothing
        if (!fragment.childNodes.length) return;

        const parent = textNode.parentNode;
        parent.insertBefore(fragment, textNode);
        parent.removeChild(textNode);
    }

    // Procurar em parágrafos e listas, mas apenas nos nós de texto
    const selectors = 'p, li, h1, h2, h3, h4, blockquote, td';
    document.querySelectorAll(selectors).forEach(element => {
        // Pular se já foi processado ou se contém elementos interativos
        if (element.querySelector('.concept-tag') ||
            element.querySelector('a') ||
            element.querySelector('button') ||
            element.closest('.sidebar') ||
            element.closest('#rizoma-overlay')) {
            return;
        }

        // Processar apenas nós de texto diretos
        Array.from(element.childNodes).forEach(node => {
            if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
                processTextNode(node);
            }
        });
    });

    console.log('✅ Conceitos tagueados no conteúdo');
}

// Escapa caracteres especiais para construir safe regex a partir de strings
function escapeRegExp(string) {
    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

/**
 * Build a regex to match a concept name as a whole word.
 * Tries to use Unicode-aware lookarounds; if not supported, returns a fallback
 * regex that captures a non-letter prefix so we can preserve it during replacement.
 */
function buildConceptRegex(escapedName) {
    try {
        // Prefer lookaround with Unicode property escapes
        const regex = new RegExp('(?<!\\p{L})(' + escapedName + ')(?!\\p{L})', 'giu');
        return { regex, usesPrefixGroup: false };
    } catch (err) {
        // Fallback: capture a non-letter prefix (or start of string) and the word
        // Note: range A-Za-zÀ-ÖØ-öø-ÿ covers many Latin-1 accented chars
        const fallback = new RegExp('(^|[^A-Za-zÀ-ÖØ-öø-ÿ])(' + escapedName + ')(?=$|[^A-Za-zÀ-ÖØ-öø-ÿ])', 'gi');
        return { regex: fallback, usesPrefixGroup: true };
    }
}

// Inicializar ao carregar página
document.addEventListener('DOMContentLoaded', () => {
    console.log('🌀 Módulo de navegação rizomática carregado');

    // Inicializar overlay imediatamente
    initializeRizoma();

    // Expor funções globalmente ANTES de taguear
    window.openRizoma = openRizoma;
    window.closeRizoma = closeRizoma;
    window.selectConcept = selectConcept;
    window.hideConceptDetails = hideConceptDetails;

    // Esperar conteúdo carregar antes de taguear
    setTimeout(() => {
        tagConceptsInContent();
        console.log('✅ Sistema rizomático pronto!');
    }, 2000);
});

// Atalho de teclado: R para abrir rizoma, ESC para fechar
document.addEventListener('keydown', (e) => {
    // R para toggle
    if ((e.key === 'r' || e.key === 'R') && !e.ctrlKey && !e.metaKey && !e.altKey) {
        // Verificar se não está digitando em um input
        if (document.activeElement.tagName !== 'INPUT' &&
            document.activeElement.tagName !== 'TEXTAREA') {
            e.preventDefault();
            if (!rizomaActive) {
                openRizoma();
            } else {
                closeRizoma();
            }
        }
    }

    // ESC para fechar
    if (e.key === 'Escape' && rizomaActive) {
        e.preventDefault();
        closeRizoma();
    }
});

// ========================================
// ESTILOS CSS PARA ANIMAÇÕES
// ========================================
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);
